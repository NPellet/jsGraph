var t={4349:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=o(i(1107)),r=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var a=s?Object.getOwnPropertyDescriptor(t,r):null;a&&(a.get||a.set)?Object.defineProperty(i,r,a):i[r]=t[r]}return i.default=t,e&&e.set(t,i),i}(i(4167)),a=o(i(5452));function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function o(t){return t&&t.__esModule?t:{default:t}}const h={name:void 0,lineAt:!1,display:!0,flipped:!1,axisDataSpacing:{min:.1,max:.1},unitModification:!1,primaryGrid:!0,secondaryGrid:!0,primaryGridWidth:1,primaryGridColor:"#f0f0f0",primaryGridDasharray:void 0,primaryGridOpacity:void 0,primaryTicksColor:"black",secondaryGridWidth:1,secondaryGridColor:"#f0f0f0",secondaryGridDasharray:void 0,secondaryGridOpacity:void 0,secondaryTicksColor:"black",hideWhenNoSeriesShown:!1,shiftToZero:!1,tickPosition:1,tickLabels:!0,nbTicksPrimary:3,nbTicksSecondary:10,ticklabelratio:1,exponentialFactor:0,exponentialLabelFactor:0,logScale:!1,forcedMin:!1,forcedMax:!1,span:[0,1],marginMin:0,marginMax:0,scientificScale:!1,scientificScaleExponent:!1,engineeringScale:!1,unitInTicks:!1,unit:!1,unitWrapperBefore:"",unitWrapperAfter:"",tickLabelOffset:0,useKatexForLabel:!1,highestMax:void 0,lowestMin:void 0,labelValue:""};class l{constructor(){}init(t,e,i){this.unitModificationTimeTicks=[[1,[1,2,5,10,20,30]],[60,[1,2,5,10,20,30]],[3600,[1,2,6,12]],[86400,[1,2,3,4,5,10,20,40]]],this.graph=t,this.options=r.extend(!0,{},h,i,e),this.group=document.createElementNS(this.graph.ns,"g"),this.hasChanged=!0,this.rectEvent=document.createElementNS(this.graph.ns,"rect"),this.rectEvent.setAttribute("pointer-events","fill"),this.rectEvent.setAttribute("fill","transparent"),this.group.appendChild(this.rectEvent),this.graph.axisGroup.appendChild(this.group),this._lines=[],this.line=document.createElementNS(this.graph.ns,"line"),this.line.setAttribute("stroke","black"),this.line.setAttribute("shape-rendering","crispEdges"),this.line.setAttribute("stroke-linecap","square"),this.groupTicks=document.createElementNS(this.graph.ns,"g"),this.groupTickLabels=document.createElementNS(this.graph.ns,"g"),this.group.appendChild(this.groupTicks),this.group.appendChild(this.groupTickLabels),this.group.appendChild(this.line),this.label=document.createElementNS(this.graph.ns,"text"),this.labelTspan=document.createElementNS(this.graph.ns,"tspan"),this.preunit="",this.unitTspan=document.createElementNS(this.graph.ns,"tspan"),this.expTspan=document.createElementNS(this.graph.ns,"tspan"),this.expTspanExp=document.createElementNS(this.graph.ns,"tspan"),this.label.appendChild(this.labelTspan),this.label.appendChild(this.unitTspan),this.label.appendChild(this.expTspan),this.label.appendChild(this.expTspanExp),this.expTspan.setAttribute("dx",6),this.expTspanExp.setAttribute("dy",-5),this.expTspanExp.setAttribute("font-size","0.8em"),this.label.setAttribute("text-anchor","middle"),this.setTickPosition(this.options.tickPosition),this.gridLinePath={primary:"",secondary:""},this.gridPrimary=document.createElementNS(this.graph.ns,"path"),this.gridSecondary=document.createElementNS(this.graph.ns,"path"),this.graph.groupPrimaryGrids.appendChild(this.gridPrimary),this.graph.groupSecondaryGrids.appendChild(this.gridSecondary),this.setGridLinesStyle(),this.group.appendChild(this.label),this.groupSeries=document.createElementNS(this.graph.ns,"g"),this.group.appendChild(this.groupSeries),this.widthHeightTick=0,this.ticks={},this.ticksLabels=[],this.tickScaling={1:3,2:2,3:1,4:.5},this.currentTick={},this.lastCurrentTick={},this.series=[],this.totalDelta=0,this.currentAction=!1,this.group.addEventListener("mousemove",(t=>{t.preventDefault();var e=this.graph._getXY(t);this.handleMouseMoveLocal(e.x,e.y,t);for(var i=0,s=this.series.length;i<s;i++)this.series[i].handleMouseMove(!1,!0)})),this.labels=[],this.group.addEventListener("click",(t=>{t.preventDefault();var e=this.graph._getXY(t);this.addLabel(this.getVal(e.x-this.graph.getPaddingLeft()))})),this.gridPrimary.setAttribute("clip-path",`url(#_clipplot${this.graph._creation})`),this.gridSecondary.setAttribute("clip-path",`url(#_clipplot${this.graph._creation})`),this.graph._axisHasChanged(this),this.cache()}handleMouseMoveLocal(){}hide(){return this.options.display=!1,this}show(){return this.options.display=!0,this}setDisplay(t){return this.options.display=!!t,this}isDisplayed(){return this.options.hideWhenNoSeriesShown?this.graph.getSeriesFromAxis(this).reduce(((t,e)=>t||e.isShown()),!1):this.options.display}isShown(){return this.isDisplayed(...arguments)}hideGroup(){this._hidden||(this._hidden=!0,this.group.setAttribute("display","none"))}showGroup(){this._hidden&&(this._hidden=!1,this.group.setAttribute("display","initial"))}kill(t,e){this.graph.killAxis(this,t,e)}setLineAt(t){return this.options.lineAt=t,this}adaptTo(t,e,i,s){return t?(this.options.adaptTo={axis:t,thisValue:e,foreignValue:i,preference:s},this.adapt(),this):(this.options.adaptTo=!1,this)}adapt(){if(this.options.adaptTo){var t=this.options.adaptTo.axis,e=this.options.adaptTo.thisValue,i=this.options.adaptTo.foreignValue;if(void 0!==t.options.currentAxisMin&&void 0!==t.options.currentAxisMax||t.setMinMaxToFitSeries(),!1!==this.options.forcedMin&&0==this.options.forcedMax||"max"!==this.options.adaptTo.preference){!1!==this.options.forcedMin?this.options.currentAxisMin=this.options.forcedMin:this._zoomed?this.options.currentAxisMin=this.getCurrentMin():this.options.currentAxisMin=this.getMinValue()-(e-this.getMinValue())*(this.options.axisDataSpacing.min*(t.getCurrentMax()-t.getCurrentMin())/(i-t.getCurrentMin()));var s=!1!==this.options.forcedMin?this.options.forcedMin:this.options.currentAxisMin;this.options.currentAxisMax=(e-s)*(t.getCurrentMax()-t.getCurrentMin())/(i-t.getCurrentMin())+s}else!1!==this.options.forcedMax?this.options.currentAxisMax=this.options.forcedMax:this._zoomed?this.options.currentAxisMax=this.getCurrentMax():this.options.currentAxisMax=this.getMaxValue()+(this.getMaxValue()-e)*(this.options.axisDataSpacing.max*(t.getCurrentMax()-t.getCurrentMin())/(t.getCurrentMax()-i)),this.options.currentAxisMax==e&&(this.options.currentAxisMax+=this.options.axisDataSpacing.max*this.getInterval()),s=!1!==this.options.forcedMax?this.options.forcedMax:this.options.currentAxisMax,this.options.currentAxisMin=(e-s)*(t.getCurrentMin()-t.getCurrentMax())/(i-t.getCurrentMax())+s;this.graph._axisHasChanged(this)}}setFloating(t,e){return this.floating=!0,this.floatingAxis=t,this.floatingValue=e,this}getFloatingAxis(){return this.floatingAxis}getFloatingValue(){return this.floatingValue}setAxisDataSpacing(t,e){return this.options.axisDataSpacing.min=t,this.options.axisDataSpacing.max=e||t,this}dataSpacing(){return this.setAxisDataSpacing(...arguments)}setAxisDataSpacingMin(t){this.options.axisDataSpacing.min=t}setAxisDataSpacingMax(t){this.options.axisDataSpacing.max=t}setMinPx(t){this.minPx=t,this.setMinMaxFlipped()}setMaxPx(t){this.maxPx=t,this.setMinMaxFlipped()}getMinPx(){return this.minPxFlipped}getMaxPx(){return this.maxPxFlipped}getMathMaxPx(){return this.maxPx}getMathMinPx(){return this.minPx}getMinValue(){return!1!==this.options.forcedMin?this.options.forcedMin:isNaN(this.options.lowestMin)?this.dataMin:Math.max(this.options.lowestMin,this.dataMin)}getMaxValue(){return!1!==this.options.forcedMax?this.options.forcedMax:isNaN(this.options.highestMax)?this.dataMax:Math.min(this.options.highestMax,this.dataMax)}setMinValueData(t){this.dataMin=t,isNaN(this.getCurrentMin())}setMaxValueData(t){this.dataMax=t,isNaN(this.getCurrentMax())}getDataMax(){return this.dataMax}getDataMin(){return this.dataMin}setLowestMin(t){this.options.lowestMin=t,this.graph._axisHasChanged(this)}forceMin(t,e=!1){return this.options.forcedMin=t,this.setCurrentMin(e?this.getCurrentMin():void 0),this.graph._axisHasChanged(this),this}setHighestMax(t){this.options.highestMax=t,this.graph._axisHasChanged(this)}forceMax(t,e=!1){return this.options.forcedMax=t,this.setCurrentMax(e?this.getCurrentMax():void 0),this.graph._axisHasChanged(this),this}getForcedMin(){return this.options.forcedMin}getForcedMax(){return this.options.forcedMax}forceToAxis(t){return t.getMaxValue&&t.getMinValue&&(this.options.forcedMin=t.getMinValue(),this.options.forcedMax=t.getMaxValue()),this}getNbTicksPrimary(){return this.options.nbTicksPrimary}setNbTicksPrimary(t){this.options.nbTicksPrimary=t}getNbTicksSecondary(){return this.options.nbTicksSecondary}setNbTicksSecondary(t){return this.options.nbTicksSecondary=t,this}handleMouseMove(t){this.mouseVal=this.getVal(t)}handleMouseWheel(t,e,i){t=Math.min(.2,Math.max(-.2,t)),"min"==i?i=this.getMinValue():"max"==i?i=this.getMaxValue():i||(i=0),this._doZoomVal((this.getCurrentMax()-i)*(1+t)+i,(this.getCurrentMin()-i)*(1+t)+i),this.graph.draw()}set zoomLock(t){this._zoomLocked=t}get zoomLock(){return this._zoomLocked||!1}zoom(t,e,i){if(i||!this.zoomLock)return this._doZoomVal(t,e,!0)}_doZoomVal(t,e,i){return this._doZoom(this.getPx(t),this.getPx(e),t,e,i)}_doZoom(t,e,i,s,r){return i=void 0!==i?i:this.getVal(t),s=void 0!==s?s:this.getVal(e),this.setCurrentMin(Math.min(i,s)),this.setCurrentMax(Math.max(i,s)),this.cacheCurrentMin(),this.cacheCurrentMax(),this.cacheInterval(),this._zoomed=!0,this.adapt(),this._hasChanged=!0,r||this.emit("zoom",[this.options.currentAxisMin,this.options.currentAxisMax,this]),this}getSerieShift(){return this._serieShift}getSerieScale(){return this._serieScale}getMouseVal(){return this.mouseVal}getUnitPerTick(t,e,i){var s=i/(e=e?Math.min(e,t/10):t/10);switch(this.options.unitModification){case"time":case"time:min.sec":case"time:min_dec":{let t,e,i,r,a=!1;for(t=0,e=this.unitModificationTimeTicks.length;t<e;t++){for(i=0,r=this.unitModificationTimeTicks[t][1].length;i<r;i++)if(s<this.unitModificationTimeTicks[t][0]*this.unitModificationTimeTicks[t][1][i]){a=!0;break}if(a)break}h=t!==this.unitModificationTimeTicks.length?this.unitModificationTimeTicks[t][0]*this.unitModificationTimeTicks[t][1][i]:1;break}default:var r=Math.floor(Math.log(s)/Math.log(10)),a=s*Math.pow(10,-r);this.decimals=-r;var n=[1,2,5,10],o=!1;for(let t=n.length-1;t>=0;t--)(!o||Math.abs(n[t]-a)<Math.abs(o-a))&&(o=n[t]);var h=o*Math.pow(10,r)}return[h,i/h,t/e]}setMinMaxToFitSeries(t){return this.options.logScale?(this.setCurrentMin(Math.max(1e-50,.9*this.getMinValue())),this.setCurrentMax(Math.max(1e-50,1.1*this.getMaxValue()))):(this.setCurrentMax(this.getMaxValue()),this.getMinValue(),this.getMaxValue(),this.setCurrentMin(this.getDefaultMin()),this.setCurrentMax(this.getDefaultMax())),(isNaN(this.options.currentAxisMin)||isNaN(this.options.currentAxisMax))&&(this.options.currentAxisMax=void 0,this.options.currentAxisMin=void 0),this._zoomed=!1,this.adapt(),this.cache(),t||this.graph._axisHasChanged(this),this.emit("zoomOutFull",[this.options.currentAxisMin,this.options.currentAxisMax,this]),this}getDefaultMin(){var t=this.getInterval();const e=this.getMinValue();return!1===this.getForcedMin()?e-this.options.axisDataSpacing.min*t:e}getDefaultMax(){var t=this.getInterval();const e=this.getMaxValue();return!1===this.getForcedMax()?e+this.options.axisDataSpacing.max*t:e}getInterval(){return this.getMaxValue()-this.getMinValue()}getCurrentInterval(){return this.cachedInterval}getCurrentMin(){return this.cachedCurrentMin}getCurrentMax(){return this.cachedCurrentMax}cacheCurrentMin(){this.cachedCurrentMin=this.options.currentAxisMin==this.options.currentAxisMax?this.options.logScale?this.options.currentAxisMin/10:this.options.currentAxisMin-1:this.options.currentAxisMin}cacheCurrentMax(){this.cachedCurrentMax=this.options.currentAxisMax==this.options.currentAxisMin?this.options.logScale?10*this.options.currentAxisMax:this.options.currentAxisMax+1:this.options.currentAxisMax}cacheInterval(){this.cachedInterval=this.cachedCurrentMax-this.cachedCurrentMin}cache(){this.cacheCurrentMin(),this.cacheCurrentMax(),this.cacheInterval()}setCurrentMin(t){return(void 0===t||!1!==this.getForcedMin()&&(t<this.getForcedMin()||t<this.options.lowestMin||void 0===t))&&(t=this.getMinValue()),this.options.currentAxisMin=t,this.options.logScale&&(this.options.currentAxisMin=Math.max(1e-50,t)),this.cacheCurrentMin(),this.cacheInterval(),this.graph._axisHasChanged(this),this}setCurrentMax(t){(void 0===t||!1!==this.getForcedMax()&&(t>this.getForcedMax()||t>this.options.highestMax||void 0===t))&&(t=this.getMaxValue()),this.options.currentAxisMax=t,this.options.logScale&&(this.options.currentAxisMax=Math.max(1e-50,t)),this.cacheCurrentMax(),this.cacheInterval(),this.graph._axisHasChanged(this)}flip(t){return this.options.flipped=t,this.setMinMaxFlipped(),this}isFlipped(){return this.options.flipped}_draw(){var t=this;void 0!==this.options.currentAxisMin&&void 0!==this.options.currentAxisMax||this.setMinMaxToFitSeries(!0);var e=Math.abs(this.getMaxPx()-this.getMinPx()),i=this.getCurrentInterval();if(!this.isShown())return this.line.setAttribute("display","none"),0;let s;if(this.line.setAttribute("display","block"),1==this.options.scientificScale?this.options.scientificScaleExponent?this.scientificExponent=this.options.scientificScaleExponent:this.scientificExponent=Math.floor(Math.log(Math.max(Math.abs(this.getCurrentMax()),Math.abs(this.getCurrentMin())))/Math.log(10)):this.scientificExponent=0,this.gridLinePath.primary="",this.gridLinePath.secondary="",this.options.useKatexForLabel&&this.graph.hasKatexRenderer()){let t=this.getLabel();this.options.unitDecade&&this.options.unit&&0!==this.scientificExponent&&(this.scientificExponent=this.getEngineeringExponent(this.scientificExponent))&&(s=this.getExponentGreekLetter(this.scientificExponent))?(t+=s,this.preunitTspan.innerHTML=s,this.preunitTspan.setAttribute("display","visible"),this.unitTspan.setAttribute("dx",0),t+=` ${s} ${this.options.unit}`):0===this.scientificExponent||isNaN(this.scientificExponent)||(this.options.engineeringScale&&(this.scientificExponent=this.getEngineeringExponent(this.scientificExponent)),t+=` \\cdot 10^${this.scientificExponent} ${this.options.unit}`),this.katexElement=this.graph.renderWithKatex(t,this.katexElement)}else this.options.unitDecade&&this.options.unit&&0!==this.scientificExponent&&(this.scientificExponent=this.getEngineeringExponent(this.scientificExponent))&&(s=this.getExponentGreekLetter(this.scientificExponent))?(this.preunit=s,this.unitTspan.setAttribute("dx",0)):0===this.scientificExponent||isNaN(this.scientificExponent)?(this.options.unit||this.unitTspan.setAttribute("display","none"),this.preunit="",this.expTspan.setAttribute("display","none"),this.expTspanExp.setAttribute("display","none")):(this.options.engineeringScale&&(this.scientificExponent=this.getEngineeringExponent(this.scientificExponent)),this.preunit="",this.expTspan.setAttribute("display","visible"),this.expTspanExp.setAttribute("display","visible"),this.expTspan.textContent="x10",this.expTspanExp.textContent=this.scientificExponent),this.writeUnit();if(this.options.hideTicks)r=0;else if(this.resetTicksLength(),this.linkedToAxis){this.linkedToAxis.deltaPx=10;var r=this.drawLinkedToAxisTicksWrapper(e,i)}else if(this.options.logScale)r=this.drawLogTicks();else r=this.drawLinearTicksWrapper(e,i);return this.removeUselessTicks(),this.removeUselessTickLabels(),this.gridPrimary.setAttribute("d",this.gridLinePath.primary),this.gridSecondary.setAttribute("d",this.gridLinePath.secondary),this.graph.findAxesLinkedTo(this).forEach((function(e){e.linkedToAxis&&(e.setMinPx(t.getMinPx()),e.setMaxPx(t.getMaxPx()),e.draw())})),r}drawLines(){this.options.lineAt&&Array.isArray(this.options.lineAt)&&this.options.lineAt.forEach(((t,e)=>{!isNaN(t)&&this.getCurrentMin()<=t&&this.getCurrentMax()>=t?this._lines[e]=this._drawLine(t,this._lines[e]):this._hideLine(this._lines[e])}))}writeUnit(){this.options.unit?(this.unitTspan.setAttribute("display","visible"),this.unitTspan.setAttribute("dx",5),this.unitTspan.innerHTML=(this.options.unitWrapperBefore+this.preunit+this.options.unit+this.options.unitWrapperAfter).replace(/\^([-+0-9]*)(.*)/g,"<tspan dy='-5' font-size='0.7em'>$1</tspan><tspan dy='5' font-size='1em'>$2</tspan>")):this.unitTspan.setAttribute("display","none")}getExponentGreekLetter(t){switch(t){case 3:return"k";case 6:return"M";case 9:return"G";case 12:return"T";case 15:return"E";case-3:return"m";case-6:return"&mu;";case-9:return"n";case-12:return"p";case-15:return"f";default:return""}}drawLinearTicksWrapper(t,e){let i;return this.options.primaryTickUnit?i=this.options.primaryTickUnit:(i=this.getUnitPerTick(t,this.getNbTicksPrimary(),e)[0],this.options.maxPrimaryTickUnit&&this.options.maxPrimaryTickUnit<i?i=this.options.maxPrimaryTickUnit:this.options.minPrimaryTickUnit&&this.options.minPrimaryTickUnit>i&&(i=this.options.minPrimaryTickUnit)),this._primaryTickIncrement=i,this.drawTicks(this._primaryTickIncrement,this.secondaryTicks())}forcePrimaryTickUnit(t){this.options.primaryTickUnit=t,this.decimals=Math.max(0,Math.round(-Math.log(t)/Math.log(10)))}forcePrimaryTickUnitMax(t){this.options.maxPrimaryTickUnit=t}forcePrimaryTickUnitMin(t){this.options.minPrimaryTickUnit=t}getPrimaryTickUnit(){return this.incrTick}setTickLabelRatio(t){return this.options.ticklabelratio=t,this}setTickLabelRotation(t){return this.options.tickLabelRotation=t,this}doesHideWhenNoSeriesShown(){return this.options.hideWhenNoSeriesShown}draw(){this._widthLabels=0;var t=this._draw();return this._widthLabels+=t,t}drawTicks(t,e){var i,s,r,a=t,n=this.getCurrentMin(),o=this.getCurrentMax(),h=0;for(e&&(i=a/e),this._secondaryTickIncrement=i,s=this.options.shiftToZero?this.dataMin-Math.ceil((this.dataMin-n)/a)*a:Math.floor(n/a)*a,this.incrTick=t,this.firstTick=s;s<=o&&!(++h>1e3);){if(e){r=s+i,this.subIncrTick=r;for(var l=0;r<s+a&&Math.abs(r-(s+a))>1e-7&&!(++l>100);)r<n||r>o||this.drawTickWrapper(r,!1,Math.abs(r-s-a/2)<1e-4?2:3),r+=i}s<n||s>o||this.drawTickWrapper(s,!0,1),s+=t}return this.lastTick=s,this.widthHeightTick=this.getMaxSizeTick(),this.widthHeightTick}nextTick(t,e){if(this.ticks[t]=this.ticks[t]||[],this.lastCurrentTick[t]=this.lastCurrentTick[t]||0,this.currentTick[t]=this.currentTick[t]||0,this.currentTick[t]>=this.ticks[t].length){var i=document.createElementNS(this.graph.ns,"line");this.groupTicks.appendChild(i),this.ticks[t].push(i),e(i)}return i=this.ticks[t][this.currentTick[t]],this.currentTick[t]>=this.lastCurrentTick[t]&&i.setAttribute("display","visible"),this.currentTick[t]++,i}nextTickLabel(t){if(this.ticksLabels=this.ticksLabels||[],this.lastCurrentTickLabel=this.lastCurrentTickLabel||0,this.currentTickLabel=this.currentTickLabel||0,this.currentTickLabel>=this.ticksLabels.length){var e=document.createElementNS(this.graph.ns,"text");this.groupTickLabels.appendChild(e),this.ticksLabels.push(e),t(e)}return e=this.ticksLabels[this.currentTickLabel],this.currentTickLabel>=this.lastCurrentTickLabel&&e.setAttribute("display","visible"),this.currentTickLabel++,e}removeUselessTicks(){for(var t in this.currentTick){for(var e=this.currentTick[t];e<this.ticks[t].length;e++)this.ticks[t][e].setAttribute("display","none");this.lastCurrentTick[t]=this.currentTick[t],this.currentTick[t]=0}}removeUselessTickLabels(){for(var t=this.currentTickLabel;t<this.ticksLabels.length;t++)this.ticksLabels[t].setAttribute("display","none");this.lastCurrentTickLabel=this.currentTickLabel,this.currentTickLabel=0}nextGridLine(t,e,i,s,r){(t&&this.options.primaryGrid||!t&&this.options.secondaryGrid)&&(this.gridLinePath[t?"primary":"secondary"]+=`M ${e} ${s} L ${i} ${r}`)}setGridLineStyle(t,e){var i;t.setAttribute("shape-rendering","crispEdges"),t.setAttribute("stroke",e?this.getPrimaryGridColor():this.getSecondaryGridColor()),t.setAttribute("stroke-width",e?this.getPrimaryGridWidth():this.getSecondaryGridWidth()),t.setAttribute("stroke-opacity",e?this.getPrimaryGridOpacity():this.getSecondaryGridOpacity()),(i=e?this.getPrimaryGridDasharray():this.getSecondaryGridDasharray())&&t.setAttribute("stroke-dasharray",i)}setGridLinesStyle(){return this.setGridLineStyle(this.gridPrimary,!0),this.setGridLineStyle(this.gridSecondary,!1),this}resetTicksLength(){}secondaryTicks(){return this.options.nbTicksSecondary}drawLogTicks(){var t=this.getCurrentMin(),e=this.getCurrentMax(),i=Math.min(t,e);e=Math.max(t,e),i<1e-50&&(i=1e-50),Math.log(i)-Math.log(e)>20&&(e=Math.pow(10,20*Math.log(i)));var s={fontSize:"1.0em",exponential:!0,overwrite:!1};i<0&&(i=0);var r,a=0==i?0:Math.floor(Math.log(i)/Math.log(10));for(i=1;(r=i*Math.pow(10,a))<e;)1==i&&r>t&&this.drawTickWrapper(r,!0,1,s),10==i?(i=1,a++):(1!=i&&r>t&&this.drawTickWrapper(r,!1,2,{overwrite:"",fontSize:"0.6em"}),i++);return this.widthHeightTick=this.getMaxSizeTick(),this.widthHeightTick}drawTickWrapper(t,e,i,s){this.drawTick(t,i,s)}linkToAxis(t,e,i){this.linkedToAxis={axis:t,scalingFunction:e,decimals:i||1}}drawLinkedToAxisTicksWrapper(t,e){var i,s,r,a,n=this.linkedToAxis,o=0;n.deltaPx||(n.deltaPx=10);do{if(i=n.scalingFunction(n.axis.getVal(o+this.getMinPx())),n.decimals&&(this.decimals=n.decimals),!(s=this.drawTick(i,1,{},o+this.getMinPx())))throw console.error(i,o,this.getMinPx()),new Error("Unable to draw tick. Please report the test-case");if(r=8*String(s[1].textContent).length,(a=5*Math.round(r/5))>n.deltaPx)return n.deltaPx=a,void this.drawLinkedToAxisTicksWrapper(t,e);o+=n.deltaPx}while(o<t)}getPos(t){return this.getPx(t)}getPx(t){if(this.options.logScale){if(t<0)return;return(Math.log(t)-Math.log(this.getCurrentMin()))/(Math.log(this.getCurrentMax())-Math.log(this.getCurrentMin()))*(this.getMaxPx()-this.getMinPx())+this.getMinPx()}return(t-this.getCurrentMin())/this.getCurrentInterval()*(this.getMaxPx()-this.getMinPx())+this.getMinPx()}getRoundedPx(t){return Math.round(10*this.getPx(t))/10}getVal(t){return this.options.logScale?Math.exp((t-this.getMinPx())/(this.getMaxPx()-this.getMinPx())*(Math.log(this.getCurrentMax())-Math.log(this.getCurrentMin()))+Math.log(this.getCurrentMin())):(t-this.getMinPx())/(this.getMaxPx()-this.getMinPx())*this.getCurrentInterval()+this.getCurrentMin()}getRelPx(t){return t/this.getCurrentInterval()*(this.getMaxPx()-this.getMinPx())}getRelVal(t){return t/(this.getMaxPx()-this.getMinPx())*this.getCurrentInterval()}setFormatTickLabel(t){return this.options.formatTickLabel=t,this}valueToText(t,e){if(this.scientificExponent)return(t/=Math.pow(10,this.scientificExponent)).toFixed(1);if(this.options.formatTickLabel)return this.options.formatTickLabel(t);if(t=t*Math.pow(10,this.getExponentialFactor())*Math.pow(10,this.getExponentialLabelFactor()),this.options.shiftToZero&&(t-=this.dataMin),this.options.ticklabelratio&&(t*=this.options.ticklabelratio),this.options.unitModification)return this.modifyUnit(t,this.options.unitModification);var i=this.decimals-this.getExponentialFactor()-this.getExponentialLabelFactor();return isNaN(t)?"":(t=e>0?t.toFixed(e):i>0?t.toFixed(i):t.toFixed(0),this.options.unitInTicks&&this.options.unit&&(t+=` ${this.options.unit}`),t)}valueToHtml(t,e,i,s=0){var r,a=this.valueToText(t,s);return this.options.unitDecade&&this.options.unit&&0!==this.scientificExponent&&(this.scientificExponent=this.getEngineeringExponent(this.scientificExponent))&&(r=this.getExponentGreekLetter(this.scientificExponent))?a+=r:0===this.scientificExponent||isNaN(this.scientificExponent)||e||(a+="x10",a+=`<sup>${this.scientificExponent}</sup>`),this.options.unit&&!i&&(a+=this.options.unit.replace(/\^([-+0-9]*)/g,"<sup>$1</sup>")),a}getModifiedValue(t){return this.options.ticklabelratio&&(t*=this.options.ticklabelratio),this.options.shiftToZero&&(t-=this.getMinValue()*(this.options.ticklabelratio||1)),t}modifyUnit(t,e){var i,s="",r=this.incrTick;switch(e){case"time":var a=this.getModifiedValue(this.getMaxValue()),n=[[60,"min"],[3600,"h"],[86400,"d"]];if(a<3600?i=0:a<86400?i=1:a<2592e3&&(i=2),!n[i])return!1;for(t/=n[i][0],s=(o=Math.floor(t))+n[i][1],i--;r<1*n[i+1][0]&&i>-1;)t=(t-o)*n[i+1][0]/n[i][0],s+=` ${o=Math.round(t)}${n[i][1]}`,i--;break;case"time:min.sec":t/=60,s=`${o=Math.floor(t)}:${h=1==(h=`${Math.round(60*(t-o))}`).length?`0${h}`:h}`;break;case"time:min_dec":var o,h;t/=60,s=`${o=Math.floor(t)}.${h=1==(h=`${Math.round(100*(t-o))}`).length?`0${h}`:h}`}return s}setExponentialFactor(t){return this.options.exponentialFactor=t,this}getExponentialFactor(){return this.options.exponentialFactor}setExponentialLabelFactor(t){return this.options.exponentialLabelFactor=t,this}getExponentialLabelFactor(){return this.options.exponentialLabelFactor}setLabelExponentialFactor(t){return this.options.exponentialLabelFactor=t,this}getLabelExponentialFactor(){return this.options.exponentialLabelFactor}setName(t){return this.options.name=t,this}setLabel(t){return this.options.label=t,this}setLabelFont(t){return this.options.labelFont=t,this}getLabel(){return this.options.label}setSpan(t,e){return this.options.span=[t,e],this}getSpan(){return this.options.span}setLevel(t){return this._level=t,this}getLevel(){return this._level}setShift(t){this.shift=t}getShift(){return this.shift}setTickPosition(t){switch(t){case 3:case"outside":case s.default.TICKS_OUTSIDE:t=3;break;case 2:case"centered":case s.default.TICKS_CENTERED:t=2;break;case 1:case"inside":case s.default.TICKS_INSIDE:default:t=1}switch(this.options.tickPosition=t,this.options.tickPosition){case 3:this.tickPx1=-2,this.tickPx2=0;break;case 2:this.tickPx1=-1,this.tickPx2=1;break;default:case 1:this.tickPx1=0,this.tickPx2=2}return this}setGrids(t){return this.options.primaryGrid=t,this.options.secondaryGrid=t,this}setPrimaryGrid(t){return this.options.primaryGrid=t,this}setSecondaryGrid(t){return this.options.secondaryGrid=t,this}primaryGridOn(){return this.setPrimaryGrid(!0)}primaryGridOff(){return this.setPrimaryGrid(!1)}secondaryGridOn(){return this.setSecondaryGrid(!0)}secondaryGridOff(){return this.setSecondaryGrid(!1)}gridsOn(){return this.setGrids(!0)}gridsOff(){return this.setGrids(!1)}turnGridsOff(){return this.gridsOff(...arguments)}turnGridsOn(){return this.gridsOn(...arguments)}setColor(t="black"){return this.options.axisColor=t,this.options.primaryTicksColor=t,this.options.secondaryTicksColor=t,this.options.ticksLabelColor=t,this.options.primaryGridColor=t,this.options.secondaryGridColor=t,this.options.labelColor=t,this}setAxisColor(t){return this.options.axisColor=t,this}getAxisColor(){return this.options.axisColor||"black"}setTickLabelOffset(t){return this.options.tickLabelOffset=t,this}setPrimaryTicksColor(t){return this.options.primaryTicksColor=t,this}getPrimaryTicksColor(){return this.options.primaryTicksColor||"black"}setSecondaryTicksColor(t){return this.options.secondaryTicksColor=t,this}getSecondaryTicksColor(){return this.options.secondaryTicksColor||"black"}setTicksLabelColor(t){return this.options.ticksLabelColor=t,Array.isArray(this.ticksLabels)&&this.ticksLabels.forEach((e=>{e.setAttribute("fill",t)})),this}getTicksLabelColor(){return this.options.ticksLabelColor||"black"}setPrimaryGridColor(t){return this.options.primaryGridColor=t,this.setGridLinesStyle(),this}getPrimaryGridColor(){return this.options.primaryGridColor}setSecondaryGridColor(t){return this.options.secondaryGridColor=t,this.setGridLinesStyle(),this}getSecondaryGridColor(){return this.options.secondaryGridColor}setPrimaryGridWidth(t){return this.options.primaryGridWidth=t,this.setGridLinesStyle(),this}getPrimaryGridWidth(){return this.options.primaryGridWidth}setSecondaryGridWidth(t){return this.options.secondaryGridWidth=t,this.setGridLinesStyle(),this}getSecondaryGridWidth(){return this.options.secondaryGridWidth}setPrimaryGridOpacity(t){return this.options.primaryGridOpacity=t,this}getPrimaryGridOpacity(){return this.options.primaryGridOpacity}setSecondaryGridOpacity(t){return this.options.secondaryGridOpacity=t,this}getSecondaryGridOpacity(){return this.options.secondaryGridOpacity}setPrimaryGridDasharray(t){return this.options.primaryGridDasharray=t,this}getPrimaryGridDasharray(){return this.options.primaryGridDasharray}setSecondaryGridDasharray(t){return this.options.secondaryGridDasharray=t,this}getSecondaryGridDasharray(){return this.options.secondaryGridDasharray}setLabelColor(t){return this.options.labelColor=t,this}getLabelColor(){return this.options.labelColor}setTickContent(t,e,i){if(i||(i={}),i.overwrite||!i.exponential)t.textContent=i.overwrite||this.valueToText(e);else{var s=Math.round(Math.log(e)/Math.log(10)),r=Math.floor(e*Math.pow(10,-s));t.textContent=1!=r?`${r}x10`:"10";var a=document.createElementNS(this.graph.ns,"tspan");a.textContent=s,a.setAttribute("font-size","0.7em"),a.setAttribute("dy",-5),t.appendChild(a)}i.fontSize&&t.setAttribute("font-size",i.fontSize)}isX(){return!1}isY(){return!1}setUnit(t){return this.options.unit=t,this}setUnitInTicks(t){return this.options.unitInTicks=t,this}setUnitWrapper(t,e){return this.options.unitWrapperBefore=t,this.options.unitWrapperAfter=e,this}setUnitDecade(t){return this.options.unitDecade=t,this}setScientific(t=!0){return this.options.scientificScale=t,this}setScientificScaleExponent(t){return this.options.scientificScaleExponent=t,this}setEngineering(t){return this.options.scientificScale=t,this.options.engineeringScale=t,this}getEngineeringExponent(t){return t-(t>0?t%3:(3- -t%3)%3)}setLogScale(t){return this.options.logScale=t,this}isZoomed(){return!(this.options.currentAxisMin==this.getMinValue()||this.options.currentAxisMax==this.getMaxValue())}hasAxis(){return!1}getType(){return null}useKatexForLabel(t=!0){return this.options.useKatexForLabel=t,this}}l.prototype.getValue=l.prototype.getVal,l.prototype.getDeltaPx=l.prototype.getRelPx,(0,a.default)(l,"axis");var u=l;e.default=u},606:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s,r=(s=i(9763))&&s.__esModule?s:{default:s};class a extends r.default{constructor(t,e,i={}){super(t,e,i)}set categories(t){return this._barCategories=t,this}draw(){var t,e=this,i=this._barCategories;if(this.series&&0!=this.series.length||this.autoSeries(),this.forceMin(0),this.forceMax(1),this.cacheCurrentMin(),this.cacheCurrentMax(),this.cacheInterval(),i){Array.isArray(i)||(i=[i]);for(var s=0;s<=i.length;s++)this.drawTick(s/i.length,2),s<i.length&&((t=this.nextTickLabel((function(t){t.setAttribute("y",(e.top?-1:1)*((1==e.options.tickPosition?8:20)+(e.top?10:0))),t.setAttribute("text-anchor","middle"),"black"!==e.getTicksLabelColor()&&t.setAttribute("fill",e.getTicksLabelColor()),t.style.dominantBaseline="hanging"}))).setAttribute("x",this.getPos((s+.5)/i.length)),t.textContent=i[s].title);return this.drawSpecifics(),this}}autoSeries(){let t=[];for(let e of this.graph.series)e.getXAxis()==this&&t.push(e);return this.setSeries(...t),this}setSeries(){var t=this;return this.series=arguments,Array.prototype.map.call(this.series,(function(e,i){"object"!=typeof e&&(e=t.graph.getSerie(e)),e.setCategoryConfig&&e.setCategoryConfig(i,t._barCategories,t.series.length)})),this._getUsedCategories(),this}_getUsedCategories(){let t={},e=0;Array.prototype.map.call(this.series,(i=>{let s=i.getUsedCategories();for(let i of s)t.hasOwnProperty(i)||(t[i]=1,e+=1),t[i]++,e++}));let i=0;for(let e in t){let s=t[e];t[e]=i,i+=s}let s={};Array.prototype.map.call(this.series,(i=>{let r=i.getUsedCategories(),a={};r.forEach((i=>{s[i]=s[i]||.5,a[i]=(t[i]+s[i])/e,s[i]++})),i.setDataIndices(a,e)}))}getType(){return"category"}}var n=a;e.default=n},9763:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s,r=(s=i(4349))&&s.__esModule?s:{default:s};class a extends r.default{constructor(t,e,i={}){super(t,e,i),this.top="top"==e}getAxisPosition(){if(!this.options.display)return 0;let t;return 0==this.options.tickLabelOffset?(t=1==this.options.tickPosition?8:20,t+=this.graph.options.fontSize):t=1==this.options.tickPosition?0:12,this.getLabel()&&(t+=this.graph.options.fontSize),t}isX(){return!0}isY(){return!1}forceHeight(t){return this.options.forcedHeight=t,this}setShift(t){this.shift=t,void 0===t||isNaN(t)||!this.graph.getDrawingHeight()||isNaN(this.graph.getDrawingHeight())||this.group.setAttribute("transform",`translate(0 ${this.floating?this.getShift():this.top?this.shift:this.graph.getDrawingHeight()-this.shift})`)}getMaxSizeTick(){return(this.top?-1:1)*(this.options.tickPosition,10)}drawTick(t,e,i,s){var r,a=this;if(null==(r=s||this.getPos(t))||isNaN(r))return;var n=this.nextTick(e,(t=>{t.setAttribute("y1",(a.top?1:-1)*a.tickPx1*a.tickScaling[e]),t.setAttribute("y2",(a.top?1:-1)*a.tickPx2*a.tickScaling[e]),1==e?t.setAttribute("stroke",a.getPrimaryTicksColor()):t.setAttribute("stroke",a.getSecondaryTicksColor())}));n.setAttribute("x1",r),n.setAttribute("x2",r),this.nextGridLine(1==e,r,r,0,this.graph.getDrawingHeight());const o=(a.top?-1:1)*((1==a.options.tickPosition?8:20)+(a.top?10:0))+this.options.tickLabelOffset;if(1==e&&this.options.tickLabels){var h=this.nextTickLabel((t=>{t.setAttribute("y",o),t.setAttribute("text-anchor","middle"),"black"!==a.getTicksLabelColor()&&t.setAttribute("fill",a.getTicksLabelColor())}));h.setAttribute("x",r),this.options.tickLabelRotation?(this.options.tickLabelRotation<0?h.setAttribute("text-anchor","end"):h.setAttribute("text-anchor","start"),h.setAttribute("dominant-baseline","middle"),h.setAttribute("transform",`translate( ${r}, ${o} ) rotate(${this.options.tickLabelRotation}) translate( ${-r}, ${-o} )`)):h.setAttribute("dominant-baseline","hanging"),this.setTickContent(h,t,i)}return[n,h]}drawLabel(){"black"!==this.getLabelColor()&&this.label.setAttribute("fill",this.getLabelColor()),this.options.labelFont&&this.label.setAttribute("font-family",this.options.labelFont),this.label.setAttribute("text-anchor","middle"),this.label.setAttribute("style","display: initial;"),this.label.setAttribute("x",Math.abs(this.getMaxPx()+this.getMinPx())/2),this.label.setAttribute("y",(this.top?-1:1)*((1==this.options.tickPosition?10:25)+this.graph.options.fontSize)),this.labelTspan.textContent=this.getLabel()}draw(){var t=super.draw(...arguments);return this.drawSpecifics(),t}drawSpecifics(){this.drawLabel(),this.line.setAttribute("x1",this.getMinPx()),this.line.setAttribute("x2",this.getMaxPx()),this.line.setAttribute("y1",0),this.line.setAttribute("y2",0),this.line.setAttribute("stroke",this.getAxisColor()),this.top||(this.labelTspan.style=this.labelTspan.style||{},this.expTspan.style=this.expTspan.style||{},this.expTspanExp.style=this.expTspanExp.style||{},this.unitTspan.style=this.unitTspan.style||{},this.labelTspan.style.dominantBaseline="hanging",this.expTspan.style.dominantBaseline="hanging",this.expTspanExp.style.dominantBaseline="hanging",this.unitTspan.style.dominantBaseline="hanging");var t=this.getSpan();this.line.setAttribute("marker-start",this.options.splitMarks&&0!=t[0]?`url(#horionzalsplit_${this.graph.getId()})`:""),this.line.setAttribute("marker-end",this.options.splitMarks&&1!=t[1]?`url(#horionzalsplit_${this.graph.getId()})`:"")}_drawLine(t,e){let i=this.getPx(t);return e?e.setAttribute("display","initial"):e=document.createElementNS(this.graph.ns,"line"),e.setAttribute("x1",i),e.setAttribute("x2",i),e.setAttribute("y1",0),e.setAttribute("y2",this.graph.drawingSpaceHeight),e.setAttribute("stroke","black"),this.group.appendChild(e),e}_hideLine(t){t&&t.setAttribute("display","none")}handleMouseMoveLocal(t){t-=this.graph.getPaddingLeft(),this.mouseVal=this.getVal(t)}setMinMaxFlipped(){var t=this.maxPx-this.minPx;if(!isNaN(t)){var e=t*this.options.span[1]+this.minPx-this.options.marginMax,i=t*this.options.span[0]+this.minPx+this.options.marginMin;this.minPxFlipped=this.isFlipped()?e:i,this.maxPxFlipped=this.isFlipped()?i:e}}getZProj(t){return t*this.graph.options.zAxis.shiftX}}var n=a;e.default=n},9291:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s,r=(s=i(4349))&&s.__esModule?s:{default:s},a=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var a=s?Object.getOwnPropertyDescriptor(t,r):null;a&&(a.get||a.set)?Object.defineProperty(i,r,a):i[r]=t[r]}return i.default=t,e&&e.set(t,i),i}(i(4167));function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}var o,h,l,u,d,p=[{threshold:20,increments:{1:{increment:1,unit:"i",format:'HH"h"MM (dd/mm/yy)'},2:{increment:1,unit:"s",format:'MM:ss"s"'}}},{threshold:50,increments:{1:{increment:1,unit:"i",format:'HH"h"MM (dd/mm/yy)'},2:{increment:2,unit:"s",format:'MM:ss"s"'}}},{threshold:100,increments:{1:{increment:1,unit:"i",format:'HH"h"MM (dd/mm/yy)'},2:{increment:5,unit:"s",format:'MM:ss"s"'}}},{threshold:600,increments:{1:{increment:10,unit:"i",format:'HH"h"MM (dd/mm/yy)'},2:{increment:30,unit:"s",format:'MM:ss"s"'}}},{threshold:1e3,increments:{1:{increment:1,unit:"h",format:'HH"h"MM (dd/mm/yy)'},2:{increment:10,unit:"i",format:'MM"min"'}}},{threshold:1500,increments:{1:{increment:1,unit:"d",format:"dd/mm/yyyy"},2:{increment:1,unit:"i",format:'H"h"MM'}}},{threshold:3e3,increments:{1:{increment:1,unit:"d",format:"dd/mm/yyyy"},2:{increment:2,unit:"i",format:'H"h"MM'}}},{threshold:8e3,increments:{1:{increment:1,unit:"d",format:"dd/mm/yyyy"},2:{increment:10,unit:"i",format:'H"h"MM'}}},{threshold:26400,increments:{1:{increment:1,unit:"d",format:"dd/mm/yyyy"},2:{increment:20,unit:"i",format:'H"h"MM'}}},{threshold:86400,increments:{1:{increment:1,unit:"d",format:"dd/mm/yyyy"},2:{increment:1,unit:"h",format:'H"h"MM'}}},{threshold:2e5,increments:{1:{increment:1,unit:"d",format:"dd/mm/yyyy"},2:{increment:2,unit:"h",format:'H"h"MM'}}},{threshold:4e5,increments:{1:{increment:1,unit:"d",format:"dd/mm/yyyy"},2:{increment:6,unit:"h",format:'H"h"MM'}}},{threshold:14e5,increments:{1:{increment:1,unit:"d",format:"dd/mm/yyyy"},2:{increment:12,unit:"h",format:'HH"h"MM'}}},{threshold:64e5,increments:{1:{increment:1,unit:"m",format:"mmmm yyyy"},2:{increment:1,unit:"d",format:"dd"}}},{threshold:124e5,increments:{1:{increment:1,unit:"m",format:"mmmm yyyy"},2:{increment:2,unit:"d",format:"dd"}}},{threshold:432e5,increments:{1:{increment:1,unit:"m",format:"mmmm yyyy"},2:{increment:7,unit:"d",format:"dd"}}},{threshold:6912e4,increments:{1:{increment:1,unit:"m",format:"mmmm yyyy"},2:{increment:15,unit:"d",format:"dd"}}},{threshold:864e5,increments:{1:{increment:1,unit:"y",format:"yyyy"},2:{increment:3,unit:"m",format:"mm/yyyy"}}},{threshold:1728e5,increments:{1:{increment:1,unit:"y",format:"yyyy"},2:{increment:4,unit:"m",format:"mm/yyyy"}}},{threshold:864e6,increments:{1:{increment:1,unit:"y",format:"yyyy"},2:{increment:6,unit:"m",format:"mm/yyyy"}}},{threshold:10368e5,increments:{1:{increment:1,unit:"y",format:"yyyy"},2:{increment:1,unit:"y",format:"yyyy"}}}],g=(o=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[WLloSZ]|"[^"]*"|'[^']*'/g,h=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,l=/[^-+\dA-Z]/g,u=function(t,e){for(t=String(t),e=e||2;t.length<e;)t=`0${t}`;return t},d=function(t,e){var i=new Date(t[`${e}FullYear`](),0,1);return Math.ceil(((t-i)/864e5+i[`${e}Day`]()+1)/7)},function(t,e,i){var s=g;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(t)||/\d/.test(t)||(e=t,t=void 0),t=t?new Date(t):new Date,isNaN(t))throw SyntaxError(`invalid date:${t}`);"UTC:"==(e=String(s.masks[e]||e||s.masks.default)).slice(0,4)&&(e=e.slice(4),i=!0);var r=i?"getUTC":"get",a=t[`${r}Date`](),n=t[`${r}Day`](),p=t[`${r}Month`](),c=t[`${r}FullYear`](),f=t[`${r}Hours`](),m=t[`${r}Minutes`](),x=t[`${r}Seconds`](),y=t[`${r}Milliseconds`](),b=i?0:t.getTimezoneOffset(),v={d:a,dd:u(a),ddd:s.i18n.dayNames[n],dddd:s.i18n.dayNames[n+7],m:p+1,mm:u(p+1),mmm:s.i18n.monthNames[p],mmmm:s.i18n.monthNames[p+12],yy:String(c).slice(2),yyyy:c,h:f%12||12,hh:u(f%12||12),H:f,HH:u(f),M:m,MM:u(m),s:x,ss:u(x),l:u(y,3),L:u(y>99?Math.round(y/10):y),t:f<12?"a":"p",tt:f<12?"am":"pm",T:f<12?"A":"P",TT:f<12?"AM":"PM",Z:i?"UTC":(String(t).match(h)||[""]).pop().replace(l,""),o:(b>0?"-":"+")+u(100*Math.floor(Math.abs(b)/60)+Math.abs(b)%60,4),S:["th","st","nd","rd"][a%10>3?0:(a%100-a%10!=10)*a%10],W:d(t,r)};return e.replace(o,(function(t){return t in v?v[t]:t.slice(1,t.length-1)}))});function c(t,e){return Math.round(t/e)*e}function f(t,e){switch(e.unit){case"s":t.setSeconds(c(t.getSeconds(),e.increment)),t.setMilliseconds(0);break;case"i":t.setMinutes(c(t.getMinutes(),e.increment)),t.setSeconds(0),t.setMilliseconds(0);break;case"h":t.setHours(c(t.getHours(),e.increment)),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0);break;case"d":t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t.setHours(0),t.setDate(c(t.getDate(),e.increment));break;case"m":t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t.setHours(0),t.setDate(1),t.setMonth(c(t.getMonth(),e.increment));break;case"y":t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t.setHours(0),t.setDate(1),t.setMonth(0);break;default:throw new Error("Date format not recognized")}return t}function m(t,e){switch(e.unit){case"s":t.setSeconds(t.getSeconds()+e.increment),t.setMilliseconds(0);break;case"i":t.setMinutes(t.getMinutes()+e.increment),t.setSeconds(0),t.setMilliseconds(0);break;case"h":t.setHours(t.getHours()+e.increment),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0);break;case"d":t.setDate(t.getDate()+e.increment),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t.setHours(0);break;case"m":t.setMonth(t.getMonth()+e.increment),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t.setHours(0),t.setDate(1);break;case"y":t.setFullYear(t.getFullYear()+e.increment),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t.setHours(0),t.setDate(1),t.setMonth(0);break;default:throw new Error("Date format not recognized")}return t}function x(t,e,i){if(t.groups[e][i])return t.groups[e][i].group.setAttribute("display","block"),t.groups[e][i];var s={group:document.createElementNS(t.graph.ns,"g"),text:document.createElementNS(t.graph.ns,"text")},r=document.createElementNS(t.graph.ns,"line");switch(r.setAttribute("stroke","black"),r.setAttribute("y1",0),e){case 2:r.setAttribute("y2",6),s.text.setAttribute("y",15),s.line=r,s.group.appendChild(s.line);break;default:case 1:r.setAttribute("y2",20),s.text.setAttribute("y",10),s.line1=r,s.line2=r.cloneNode(),s.group.appendChild(s.line1),s.group.appendChild(s.line2)}return s.text.setAttribute("text-anchor","middle"),s.text.setAttribute("dominant-baseline","middle"),s.group.appendChild(s.text),t.getWrapper(e).appendChild(s.group),t.groups[e][i]=s}function y(t,e,i){for(;i<t.groups[e].length;i++)b(t.groups[e][i])}function b(t){t.group.setAttribute("display","none")}function v(t,e,i,s,r,a,n){switch(t){case 2:if(a<s||a>r)return void b(e);e.line.setAttribute("x1",a),e.line.setAttribute("x2",a),e.text.setAttribute("x",a),e.text.textContent=i;break;default:case 1:var o=Math.max(s,Math.min(r,a)),h=Math.max(s,Math.min(r,n));if(isNaN(h)||isNaN(o))return;for(e.line1.setAttribute("x1",o),e.line2.setAttribute("x1",h),e.line1.setAttribute("x2",o),e.line2.setAttribute("x2",h),e.text.setAttribute("x",(o+h)/2);8*i.length>h-o;)if(1==(i=`${i.substr(0,i.length-2)}.`).length){i="";break}e.text.textContent=i}}g.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},g.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};class M extends r.default{constructor(){super(...arguments)}init(t,e){super.init(t,e),this.wrapper={1:document.createElementNS(t.ns,"g"),2:document.createElementNS(t.ns,"g")},this.groups={1:[],2:[]};var i=document.createElementNS(t.ns,"rect");i.setAttribute("fill","#c0c0c0"),i.setAttribute("stroke","#808080"),i.setAttribute("height","20"),i.setAttribute("x","0"),i.setAttribute("y","0"),this.rect=i,this.wrapper[1].appendChild(this.rect),this.group.appendChild(this.wrapper[1]),this.group.appendChild(this.wrapper[2]),this.wrapper[1].setAttribute("transform","translate( 0, 25 )"),this.wrapper[2].setAttribute("transform","translate( 0, 00 )")}draw(){this.cacheCurrentMax(),this.cacheCurrentMin(),null!=this.currentAxisMin&&null!=this.currentAxisMax||this.setMinMaxToFitSeries(!0),this.line.setAttribute("x1",this.getMinPx()),this.line.setAttribute("x2",this.getMaxPx()),this.line.setAttribute("y1",0),this.line.setAttribute("y2",0);var t,e=this.maxPx-this.minPx,i=this.getCurrentInterval()/e,s=this.getCurrentMax(),r=this.getCurrentMin();if(this.rect.setAttribute("width",e),this.rect.setAttribute("x",this.minPx),!s||!r)return 0;for(d=0;d<p.length;d++)if(p[d].threshold>i){t=p[d];break}t||(t=p[p.length-1]);var n,o,h,l,u,d,c,b,M=0;for(M=1;M<=2;M++){if(!a.isNumeric(r)){y(this,M,0);break}h=f(new Date(r),t.increments[M]),d=0;do{if(c=h,b=t.increments[M].format,l=g(c,b),u=x(this,M,d),n=this.getPx(h.getTime()),h=m(h,t.increments[M]),o=this.getPx(h.getTime()),v(M,u,l,this.getMinPx(),this.getMaxPx(),n,o),++d>100)break}while(h.getTime()<s);y(this,M,d)}}isX(){return!0}getWrapper(t){return this.wrapper[t]}setShift(t){this.shift=t,this.group.setAttribute("transform",`translate(0 ${this.top?this.shift:this.graph.getDrawingHeight()-this.shift})`)}getAxisPosition(){return 60}setMinMaxFlipped(){var t=this.maxPx-this.minPx,e=t*this.options.span[1]+this.minPx,i=t*this.options.span[0]+this.minPx;this.minPxFlipped=this.isFlipped()?e:i,this.maxPxFlipped=this.isFlipped()?i:e}}var A=M;e.default=A},4083:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s,r=(s=i(4349))&&s.__esModule?s:{default:s};class a extends r.default{constructor(t,e,i){super(t,e,i),this.leftright=e,this.left="left"==e}forceWidth(t){return this.options.forcedWidth=t,this}setAxisPosition(t){this.shiftPosition=t}getAxisPosition(){return this.shiftPosition||0}getAdditionalWidth(){let t=0;return this.getLabel()&&(t+=this.graph.options.fontSize),this.isShown()&&(t+=Math.abs(this.tickMargin)),t}isX(){return!1}isY(){return!0}resetTicksLength(){this.longestTick=[!1,0]}getMaxSizeTick(){return this.longestTick&&this.longestTick[0]?this.longestTick[0].getComputedTextLength()+5:0}draw(){this.tickMargin=this.left?-5-this.tickPx1*this.tickScaling[1]:2-this.tickPx1*this.tickScaling[1];var t=super.draw(...arguments);return t+=this.getAdditionalWidth(),this.drawSpecifics(t),this.fullwidthlabel=t,t}equalizePosition(t){return this.placeLabel(this.left?-t:t),this.getLabel()?t+this.graph.options.fontSize:0}drawTick(t,e,i,s){let r,a,n;r=s||this.getPos(t),null==r||isNaN(r)||(a=this.nextTick(e,(t=>{t.setAttribute("x1",(this.left?1:-1)*this.tickPx1*this.tickScaling[e]),t.setAttribute("x2",(this.left?1:-1)*this.tickPx2*this.tickScaling[e]),1==e?t.setAttribute("stroke",this.getPrimaryTicksColor()):t.setAttribute("stroke",this.getSecondaryTicksColor())})),a.setAttribute("y1",r),a.setAttribute("y2",r),this.nextGridLine(1==e,0,this.graph.getDrawingWidth(),r,r),1==e&&this.options.tickLabel&&(n=this.nextTickLabel((t=>{t.setAttribute("x",this.tickMargin+this.options.tickLabelOffset),"black"!==this.getTicksLabelColor()&&t.setAttribute("fill",this.getTicksLabelColor()),this.left?t.setAttribute("text-anchor","end"):t.setAttribute("text-anchor","start"),t.style.dominantBaseline="central"})),n.setAttribute("y",r),this.setTickContent(n,t,i),String(n.textContent).length>=this.longestTick[1]&&(this.longestTick[0]=n,this.longestTick[1]=String(n.textContent).length)))}drawLabel(){"black"!==this.getLabelColor()&&this.label.setAttribute("fill",this.getLabelColor()),this.label.setAttribute("dominant-baseline",(this.left,"auto")),this.labelTspan.textContent=this.getLabel()}placeLabel(t){this.label.setAttribute("transform",`translate(${t}, ${Math.abs(this.getMaxPx()+this.getMinPx())/2}) rotate(-90)`)}drawSpecifics(){this.line.setAttribute("y1",this.getMinPx()),this.line.setAttribute("y2",this.getMaxPx()),this.line.setAttribute("x1",0),this.line.setAttribute("x2",0),this.line.setAttribute("stroke",this.getAxisColor());var t=this.getSpan();this.line.setAttribute("marker-start",this.options.splitMarks&&0!=t[0]?`url(#verticalsplit_${this.graph.getId()})`:""),this.line.setAttribute("marker-end",this.options.splitMarks&&1!=t[1]?`url(#verticalsplit_${this.graph.getId()})`:"")}setShift(t){if(this.shift=t,!this.shift||!this.graph.getWidth())return;let e=this.shift;e=this.floating||this.isLeft()?e:this.graph.getWidth()-this.graph.getPaddingRight()-this.graph.getPaddingLeft()-e,this.group.setAttribute("transform",`translate( ${e} 0 )`),this.drawLabel()}isLeft(){return this.left}isRight(){return!this.left}isFlipped(){return!this.options.flipped}_drawLine(t,e){let i=this.getPx(t);return e?e.setAttribute("display","initial"):e=document.createElementNS(this.graph.ns,"line"),e.setAttribute("y1",i),e.setAttribute("y2",i),e.setAttribute("x1",0),e.setAttribute("x2",this.graph.drawingSpaceWidth),e.setAttribute("stroke","black"),this.group.appendChild(e),e}_hideLine(t){t&&t.setAttribute("display","none")}handleMouseMoveLocal(t,e){e-=this.graph.getPaddingTop(),this.mouseVal=this.getVal(e)}scaleToFitAxis(t,e,i,s,r,a){t&&t.isX()||(t=this.graph.getXAxis()),isNaN(i)&&(i=t.getCurrentMin()),isNaN(s)&&(s=t.getCurrentMax()),void 0===r&&(r=!0),void 0===a&&(a=!0),"number"==typeof e&&(s=i,i=e,e=!1);for(var n=-1/0,o=1/0,h=0,l=0,u=this.graph.series.length;l<u;l++)this.graph.series[l].isShown()&&this.graph.series[l]!=e&&this.graph.series[l].getXAxis()==t&&this.graph.series[l].getYAxis()===this&&(h++,n=a?Math.max(n,this.graph.series[l].getMax(i,s)):0,o=r?Math.min(o,this.graph.series[l].getMin(i,s)):0);if(0==h)this.setMinMaxToFitSeries();else{o=r?o:this.getCurrentMin();var d=(n=a?n:this.getCurrentMax())-o;o-=this.options.axisDataSpacing.min*d,n+=this.options.axisDataSpacing.max*d,this._doZoomVal(o,n)}return this}setMinMaxFlipped(){var t=this.maxPx-this.minPx;if(!isNaN(t)){var e=this.maxPx-t*this.options.span[0]-this.options.marginMin,i=this.maxPx-t*this.options.span[1]+this.options.marginMax;this.minPxFlipped=this.isFlipped()?e:i,this.maxPxFlipped=this.isFlipped()?i:e}}getZProj(t){return t*this.graph.options.zAxis.shiftY}}var n=a;e.default=n},1107:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.nsxlink=e.ns=e.__VERSION__=void 0;var s=u(i(8697)),r=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=l();if(e&&e.has(t))return e.get(t);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var a=s?Object.getOwnPropertyDescriptor(t,r):null;a&&(a.get||a.set)?Object.defineProperty(i,r,a):i[r]=t[r]}return i.default=t,e&&e.set(t,i),i}(i(4167)),a=u(i(7035)),n=u(i(6871)),o=i(1748),h=i(2513);function l(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return l=function(){return t},t}function u(t){return t&&t.__esModule?t:{default:t}}function d(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const p="0.0.1";e.__VERSION__=p;const g="http://www.w3.org/2000/svg";e.ns=g;const c="http://www.w3.org/1999/xlink";var f;e.nsxlink=c,function(t){t.TOP="top",t.BOTTOM="bottom",t.LEFT="left",t.RIGHT="right"}(f||(f={}));const m={title:"",paddingTop:30,paddingBottom:5,paddingLeft:20,paddingRight:20,close:{left:!0,right:!0,top:!0,bottom:!0},closeColor:"black",fontSize:12,fontFamily:"Myriad Pro, Helvetica, Arial",plugins:{},pluginAction:{},mouseActions:[],keyActions:[],wheel:{},dblclick:{},shapesUnselectOnClick:!0,shapesUniqueSelection:!0};class x{constructor(t,e,i={[f.TOP]:[],[f.BOTTOM]:[],[f.LEFT]:[],[f.RIGHT]:[]}){for(var s in d(this,"ns",void 0),d(this,"nsxlink",void 0),d(this,"uid",r.guid()),d(this,"wrapper",void 0),d(this,"options",void 0),d(this,"prevented",!1),d(this,"axis",void 0),d(this,"shapes",void 0),d(this,"shapesLocked",!1),d(this,"plugins",void 0),d(this,"selectedShapes",void 0),d(this,"series",void 0),d(this,"_axesHaveChanged",void 0),d(this,"currentAction",void 0),d(this,"height",void 0),d(this,"width",void 0),d(this,"dom",void 0),d(this,"domTitle",void 0),d(this,"sizeSet",void 0),d(this,"_lockUpdate",!1),d(this,"legend",void 0),d(this,"innerHeight",void 0),d(this,"innerWidth",void 0),d(this,"offsetCached",void 0),d(this,"axisGroup",void 0),d(this,"groupPrimaryGrids",void 0),d(this,"groupSecondaryGrids",void 0),d(this,"markerHorizontalSplit",void 0),d(this,"markerVerticalSplit",void 0),d(this,"markerArrow",void 0),d(this,"clip",void 0),d(this,"clipRect",void 0),d(this,"rectEvent",void 0),d(this,"savedAxisState",void 0),d(this,"selectedSerie",void 0),d(this,"toolbar",void 0),d(this,"cancelUnselectShape",void 0),d(this,"layers",void 0),d(this,"plotGroup",void 0),d(this,"bypassHandleMouse",void 0),d(this,"drawn",!1),d(this,"closingLines",void 0),d(this,"graphingZone",void 0),d(this,"forcedPlugin",void 0),d(this,"activePlugin",void 0),d(this,"zAxis",void 0),d(this,"groupGrids",void 0),d(this,"groupEvent",void 0),d(this,"_sizeChanged",!1),d(this,"drawingSpaceWidth",void 0),d(this,"drawingSpaceHeight",void 0),d(this,"drawingSpaceMinX",void 0),d(this,"drawingSpaceMinY",void 0),d(this,"drawingSpaceMaxX",void 0),d(this,"drawingSpaceMaxY",void 0),d(this,"trackingLineShape",void 0),d(this,"_katexRenderer",void 0),d(this,"vertLineArrow",void 0),d(this,"defs",void 0),d(this,"_trackingLegend",void 0),this.ns=g,this.nsxlink=c,t!==Object(t)||t instanceof HTMLElement||(e=t,t=void 0),e||(e={}),e.axes||(e.axes=i),this.options=r.extend({},m,e),this.dom=document.createElementNS(g,"svg"),t&&this.setWrapper(t),this.axis={[f.LEFT]:[],[f.TOP]:[],[f.BOTTOM]:[],[f.RIGHT]:[]},this.shapes=[],this.shapesLocked=!1,this.plugins={},this.options.pluginAction)this.options.pluginAction.plugin=s,this.options.mouseActions.push(this.options.pluginAction);if(this.selectedShapes=[],this.series=[],this._axesHaveChanged=!0,this.options.hasOwnProperty("padding")&&r.isNumeric(this.options.padding)&&(this.options.paddingTop=this.options.paddingBottom=this.options.paddingLeft=this.options.paddingRight=this.options.padding),this.currentAction=!1,e.axes)for(var s in e.axes)for(var a=0,n=e.axes[s].length;a<n;a++)switch(s){case"top":this.getTopAxis(a,e.axes[s][a]);break;case"left":this.getLeftAxis(a,e.axes[s][a]);break;case"right":this.getRightAxis(a,e.axes[s][a]);break;case"bottom":this.getBottomAxis(a,e.axes[s][a])}this._pluginsInit(),this.dom.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),r.setAttributeTo(this.dom,{xmlns:g,"font-family":this.options.fontFamily,"font-size":this.options.fontSize});try{r.setAttributeTo(this.dom,{"data-jsgraph-version":p})}catch(t){}this.defs=document.createElementNS(g,"defs"),this.dom.appendChild(this.defs),this.groupEvent=document.createElementNS(g,"g"),this.rectEvent=document.createElementNS(g,"rect"),r.setAttributeTo(this.rectEvent,{"pointer-events":"fill",fill:"transparent"}),this.groupEvent.appendChild(this.rectEvent),this.dom.appendChild(this.groupEvent),this.domTitle=document.createElementNS(g,"text"),this.setTitle(this.options.title),this.options.titleFontSize&&this.setTitleFontSize(this.options.titleFontSize),this.options.titleFontColor&&this.setTitleFontSize(this.options.titleFontColor),this.options.titleFontFamily&&this.setTitleFontFamily(this.options.titleFontFamily),r.setAttributeTo(this.domTitle,{"text-anchor":"middle",y:20}),this.groupEvent.appendChild(this.domTitle),this.graphingZone=document.createElementNS(g,"g"),this.updateGraphingZone(),this.groupEvent.appendChild(this.graphingZone),this.axisGroup=document.createElementNS(g,"g"),this.graphingZone.appendChild(this.axisGroup),this.groupGrids=document.createElementNS(g,"g"),this.groupGrids.setAttribute("clip-path","url(#_clipplot"+this.uid+")"),this.groupPrimaryGrids=document.createElementNS(g,"g"),this.groupSecondaryGrids=document.createElementNS(g,"g"),this.axisGroup.appendChild(this.groupGrids),this.groupGrids.appendChild(this.groupSecondaryGrids),this.groupGrids.appendChild(this.groupPrimaryGrids),this.plotGroup=document.createElementNS(g,"g"),this.graphingZone.appendChild(this.plotGroup),this.layers=[],this._makeClosingLines(),this.clip=document.createElementNS(g,"clipPath"),this.clip.setAttribute("id",`_clipplot${this.uid}`),this.defs.appendChild(this.clip),this.clipRect=document.createElementNS(g,"rect"),this.clip.appendChild(this.clipRect),this.clip.setAttribute("clipPathUnits","userSpaceOnUse"),this.markerArrow=document.createElementNS(g,"marker"),this.markerArrow.setAttribute("viewBox","0 0 10 10"),this.markerArrow.setAttribute("id",`arrow${this.uid}`),this.markerArrow.setAttribute("refX","6"),this.markerArrow.setAttribute("refY","5"),this.markerArrow.setAttribute("markerUnits","strokeWidth"),this.markerArrow.setAttribute("markerWidth","8"),this.markerArrow.setAttribute("markerHeight","6"),this.markerArrow.setAttribute("orient","auto");var o,h=document.createElementNS(g,"path");h.setAttribute("d","M 0 0 L 10 5 L 0 10 z"),this.markerArrow.appendChild(h),this.defs.appendChild(this.markerArrow),this.markerHorizontalSplit=document.createElementNS(g,"marker"),this.markerHorizontalSplit.setAttribute("viewBox","0 0 6 8"),this.markerHorizontalSplit.setAttribute("id",`horionzalsplit_${this.getId()}`),this.markerHorizontalSplit.setAttribute("refX","3"),this.markerHorizontalSplit.setAttribute("refY","4"),this.markerHorizontalSplit.setAttribute("markerUnits","strokeWidth"),this.markerHorizontalSplit.setAttribute("markerWidth","6"),this.markerHorizontalSplit.setAttribute("markerHeight","8"),(o=document.createElementNS(g,"line")).setAttribute("x1","0"),o.setAttribute("y1","8"),o.setAttribute("x2","6"),o.setAttribute("y2","0"),o.setAttribute("stroke","black"),this.markerHorizontalSplit.appendChild(o),this.defs.appendChild(this.markerHorizontalSplit),this.markerVerticalSplit=document.createElementNS(g,"marker"),this.markerVerticalSplit.setAttribute("viewBox","0 0 8 6"),this.markerVerticalSplit.setAttribute("id",`verticalsplit_${this.getId()}`),this.markerVerticalSplit.setAttribute("refX","4"),this.markerVerticalSplit.setAttribute("refY","3"),this.markerVerticalSplit.setAttribute("markerUnits","strokeWidth"),this.markerVerticalSplit.setAttribute("markerWidth","8"),this.markerVerticalSplit.setAttribute("markerHeight","6"),(o=document.createElementNS(g,"line")).setAttribute("x1","0"),o.setAttribute("y1","0"),o.setAttribute("x2","8"),o.setAttribute("y2","6"),o.setAttribute("stroke","black"),this.markerVerticalSplit.appendChild(o),this.defs.appendChild(this.markerVerticalSplit),this.vertLineArrow=document.createElementNS(g,"marker"),this.vertLineArrow.setAttribute("viewBox","0 0 10 10"),this.vertLineArrow.setAttribute("id",`verticalline${this.uid}`),this.vertLineArrow.setAttribute("refX","0"),this.vertLineArrow.setAttribute("refY","5"),this.vertLineArrow.setAttribute("markerUnits","strokeWidth"),this.vertLineArrow.setAttribute("markerWidth","20"),this.vertLineArrow.setAttribute("markerHeight","10"),this.vertLineArrow.setAttribute("orient","auto"),this.vertLineArrow.setAttribute("stroke-width","1px");var l=document.createElementNS(g,"path");l.setAttribute("d","M 0 -10 L 0 10"),l.setAttribute("stroke","black"),this.vertLineArrow.appendChild(l),this.defs.appendChild(this.vertLineArrow),this.plotGroup.setAttribute("clip-path","url(#_clipplot"+this.uid+")"),this.bypassHandleMouse=!1}setWrapper(t){if("string"==typeof t&&(t=document.getElementById(t)),!t)throw new Error("The wrapper DOM element was not found.");if(!t.appendChild)throw new Error("The wrapper appears to be an invalid HTMLElement");if(t.style.userSelect="none",t.style.position="relative",t.style.outline="none",this.wrapper=t,!this.height||!this.width){var e=getComputedStyle(t),i=parseInt(e.width,10),s=parseInt(e.height,10);this.setSize(i,s),this._resize()}t.appendChild(this.dom),this._registerEvents()}_registerEvents(){if(!this.wrapper)throw"No wrapper exists. Cannot register the events.";this.dom.setAttribute("tabindex","0"),this.dom.addEventListener("keydown",(t=>{b(this,t,"keydown")})),this.dom.addEventListener("keypress",(t=>{b(this,t,"keypress")})),this.dom.addEventListener("keyup",(t=>{b(this,t,"keyup")})),this.dom.addEventListener("mousemove",(t=>{const e=this._getXY(t);!function(t,e,i,s){if(t.bypassHandleMouse)return void t.bypassHandleMouse.handleMouseMove(s);if(t.activePlugin&&t._pluginExecute(t.activePlugin,"onMouseMove",[t,e,i,s]))return;let r,a=e;var n;if(t._applyToAxes("handleMouseMove",[e-t.options.paddingLeft,s],!0,!1),t._applyToAxes("handleMouseMove",[i-t.options.paddingTop,s],!1,!0),!t.activePlugin&&t.options.trackingLine&&t.options.trackingLine.enable)if("common"==t.options.trackingLine.mode&&t.options.trackingLine.snapToSerie){var o=t.options.trackingLine.snapToSerie;n=o.handleMouseMove(!1,!0),t.trackingLineShape&&(n?(t.trackingLineShape.show(),t.trackingLineShape.getPosition(0).x=n.xClosest,t.trackingLineShape.getPosition(1).x=n.xClosest,t.trackingLineShape.redraw(),r=n.xClosest,a=o.getXAxis().getPx(n.xClosest)+t.options.paddingLeft):t.trackingLineShape.hide());var h=t.options.trackingLine.series;if(!h)return;if(!n)return;t._trackingLegend=M(t,h,a,i,t._trackingLegend)}else if("individual"==t.options.trackingLine.mode){const r=[];t.options.trackingLine.series.forEach((a=>{if(!a.options.tracking)return;const n=a.getClosestPointToXY(a.getXAxis().getMouseVal(),a.getYAxis().getMouseVal(),a.options.tracking.withinPx,a.options.tracking.withinPx,a.options.tracking.useAxis,!0);"common"==t.options.trackingLine.legendType&&(a._trackingLegend=M(t,[],!1,!1,a._trackingLegend)),n?a.trackingShape&&(a.trackingShape.show(),a.trackingShape.setPosition({x:n.xClosest,y:n.yClosest}),a.trackingShape.redraw(),"independent"==t.options.trackingLine.legendType&&(a._trackingLegend=M(t,[{serie:a,closestPoint:n}],e,i,a._trackingLegend)),a.emit("track",s,n)):a.trackingShape&&(a.trackingShape.hide(),"independent"==t.options.trackingLine.legendType&&(a._trackingLegend=M(t,[],!1,!1,a._trackingLegend))),n&&r.push({serie:a,closestPoint:n})})),"common"==t.options.trackingLine.legendType?t._trackingLegend=M(t,r,e,i,t._trackingLegend):t._trackingLegend=M(t,[],!1,!1,t._trackingLegend)}if(t.options.mouseMoveData){const e={};for(let i=0;i<t.series.length;i++){let s=t.series[i];s.options.tracking?e[t.series[i].getName()]=t.series[i].getClosestPointToXY(void 0,void 0,s.options.tracking.withinPxX||0,s.options.tracking.withinPxY||0,s.options.tracking.useAxis,!0):console.warn("Tracking not enabled for this serie")}"function"==typeof t.options.mouseMoveData&&t.options.mouseMoveData.call(t,s,e),t.emit("mouseMoveData",s,e)}v(t,s,[t,e,i,s],"onMouseMove")}(this,e.x,e.y,t)})),this.dom.addEventListener("mouseleave",(t=>{this.options.handleMouseLeave&&this.options.handleMouseLeave.call(this)})),this.groupEvent.addEventListener("mousedown",(t=>{if(this.focus(),3!=t.which&&!t.ctrlKey){var e=this._getXY(t);!function(t,e,i,s){if(t.forcedPlugin)return t.activePlugin=t.forcedPlugin,void t._pluginExecute(t.forcedPlugin,"onMouseDown",[t,e,i,s]);t.activePlugin&&(t.activePlugin=void 0),v(t,s,[t,e,i,s],"onMouseDown")}(this,e.x,e.y,t)}})),this.dom.addEventListener("mouseup",(t=>{this.emit("mouseUp",t);const e=this._getXY(t);!function(t,e,i,s){if(t.bypassHandleMouse)return t.bypassHandleMouse.handleMouseUp(s),void(t.activePlugin=void 0);t.activePlugin&&t._pluginExecute(t.activePlugin,"onMouseUp",[t,e,i,s]),t.activePlugin=void 0}(this,e.x,e.y,t)})),this.wrapper.addEventListener("mouseup",(t=>{t.stopPropagation()})),this.dom.addEventListener("dblclick",(t=>{this.emit("dblClick",t);const e=this._getXY(t);!function(t,e,i,s){v(t,s,[e,i,s],"onDblClick")}(this,e.x,e.y,t)})),this.groupEvent.addEventListener("click",(t=>{if(3!=t.which&&!t.ctrlKey){var e=this._getXY(t);this.prevent(!1)||function(t,e,i,s){t.emit("click",[t,e,i,s]),v(t,s,[e,i,s],"onClick"),s.target.jsGraphIsShape||t.prevent(!1)||!t.options.shapesUnselectOnClick||t.unselectShapes(!1)}(this,e.x,e.y,t)}})),this.groupEvent.addEventListener("wheel",(t=>{const e=this._getXY(t);return function(t,e,i,s,r){v(t,r,[e,r,i,s],"onMouseWheel")&&(r.preventDefault(),r.stopPropagation())}(this,-t.deltaY,e.x,e.y,t),!1}))}getDom(){return this.dom}getId(){return this.uid}getWrapper(){if(!this.wrapper)throw"Wrapper does not exist";return this.wrapper}setOption(t,e){return this.options[t]=e,this}setTitle(t){this.options.title=t,this.domTitle.textContent=t}setTitleFontSize(t){this.domTitle.setAttribute("font-size",t)}setTitleFontColor(t){this.domTitle.setAttribute("fill",t)}setTitleFontFamily(t){this.domTitle.setAttribute("font-family",t)}displayTitle(){this.domTitle.setAttribute("display","inline")}hideTitle(){this.domTitle.setAttribute("display","none")}hide(){"none"!==this.dom.style.display&&(this.dom.style.display="none")}show(){"none"==this.dom.style.display&&(this.dom.style.display="initial")}redraw(t,e){return!(!this.width||!this.height||(this.sizeSet?!t||e||(i=this._axesHaveChanged,this._axesHaveChanged=!1,i)||function(t){var e=t._sizeChanged;return t._sizeChanged=!1,e}(this)?(this.executeRedrawSlaves(),this.refreshDrawingZone(),0):(this.executeRedrawSlaves(),1):(this._resize(),this.executeRedrawSlaves(),0)));var i}executeRedrawSlaves(){this._pluginsExecute("preDraw")}draw(t=!1){this.drawn=!0,this.updateLegend(!0),this.drawSeries(this.redraw(!0,t)),this._pluginsExecute("postDraw")}delayUpdate(){return this._lockUpdate=!0,this}doUpdate(){return this.legend&&this.legend.update(),this.draw(),this.legend&&this.legend.update(),this}resumeUpdate(){return this._lockUpdate=!1,this}isDelayedUpdate(){return this._lockUpdate}setWidth(t,e){this.width=t,e||this._resize()}setHeight(t,e){this.height=t,e||this._resize()}resize(t,e){return t&&e&&this.setSize(t,e),this._resize(),this}setSize(t,e){this.setWidth(t,!0),this.setHeight(e,!0),this.getDrawingHeight(),this.getDrawingWidth()}getWidth(){return this.width}getHeight(){return this.height}getPaddingTop(){return this.options.paddingTop}getPaddingLeft(){return this.options.paddingLeft}getPaddingBottom(){return this.options.paddingBottom}getPaddingRight(){return this.options.paddingRight}getDrawingHeight(t=!0){return t&&this.innerHeight?this.innerHeight:this.innerHeight=this.height-this.options.paddingTop-this.options.paddingBottom}getDrawingWidth(t=!0){return t&&this.innerWidth?this.innerWidth:this.innerWidth=this.width-this.options.paddingLeft-this.options.paddingRight}cacheOffset(){this.offsetCached=r.getOffset(this.wrapper)}uncacheOffset(){this.offsetCached=!1}getNumAxes(t){return this.axis[t].length}getXAxis(t=0,e={}){return this.axis[f.TOP].length>0&&0==this.axis[f.BOTTOM].length?this.getTopAxis(t,e):this.getBottomAxis(t,e)}getYAxis(t=0,e={}){return this.axis[f.RIGHT].length>0&&0==this.axis[f.LEFT].length?this.getRightAxis(t,e):this.getLeftAxis(t,e)}getTopAxis(t=0,e={}){return this._getAxis(t,e,f.TOP)}getBottomAxis(t=0,e={}){return this._getAxis(t,e,f.BOTTOM)}getLeftAxis(t=0,e={}){return this._getAxis(t,e,f.LEFT)}getRightAxis(t=0,e={}){return this._getAxis(t,e,f.RIGHT)}setXAxis(t,e){this.setBottomAxis(t,e)}setYAxis(t,e){this.setLeftAxis(t,e)}setLeftAxis(t,e){e=e||0,this.axis[f.LEFT][e]&&this.axis[f.LEFT][e].kill(),this.axis[f.LEFT][e]=t}setRightAxis(t,e){e=e||0,this.axis[f.RIGHT][e]&&this.axis[f.RIGHT][e].kill(),this.axis[f.RIGHT][e]=t}setTopAxis(t,e){e=e||0,this.axis[f.TOP][e]&&this.axis[f.TOP][e].kill(),this.axis[f.TOP][e]=t}setBottomAxis(t,e){e=e||0,this.axis[f.BOTTOM][e]&&this.axis[f.BOTTOM][e].kill(),this.axis[f.BOTTOM][e]=t}killAxis(t,e=!1,i=!1){var s;t.isX()&&((s=this.axis[f.BOTTOM].indexOf(t))>-1&&this.axis[f.BOTTOM].splice(s,1),(s=this.axis[f.TOP].indexOf(t))>-1&&this.axis[f.TOP].splice(s,1),i||this.series.forEach((e=>{e.getXAxis()==t&&e.kill()}))),t.isY()&&((s=this.axis[f.LEFT].indexOf(t))>-1&&this.axis[f.LEFT].splice(s,1),(s=this.axis[f.RIGHT].indexOf(t))>-1&&this.axis[f.RIGHT].splice(s,1),i||this.series.forEach((e=>{e.getYAxis()==t&&e.kill()}))),this.axisGroup.removeChild(t.group),this.groupPrimaryGrids.removeChild(t.gridPrimary),this.groupSecondaryGrids.removeChild(t.gridSecondary),e||this.draw(!0)}hasXAxis(t){return this.hasTopAxis(t)||this.hasBottomAxis(t)}hasYAxis(t){return this.hasLeftAxis(t)||this.hasRightAxis(t)}hasTopAxis(t){return this.hasAxis(t,this.axis[f.TOP])}hasBottomAxis(t){return this.hasAxis(t,this.axis[f.BOTTOM])}hasLeftAxis(t){return this.hasAxis(t,this.axis[f.LEFT])}hasRightAxis(t){return this.hasAxis(t,this.axis[f.RIGHT])}hasAxis(t,e){for(var i=0,s=e.length;i<s;i++){if(e[i]==t)return!0;if(e[i].hasAxis(t))return!0}return!1}autoscaleAxes(){return this._applyToAxes("setMinMaxToFitSeries",null,!0,!0),this}autoscale(){return this.autoscaleAxes()}autoScale(){return this.autoscaleAxes()}autoScaleAxes(){return this.autoscaleAxes()}autoScaleAxis(t){return t?(t.setMinMaxToFitSeries(),this):this}gridsOff(){this._applyToAxes((t=>{t.gridsOff()}),void 0,!0,!0)}gridsOn(){this._applyToAxes((t=>{t.gridsOn()}),void 0,!0,!0)}setBackgroundColor(t){return this.rectEvent.setAttribute("fill",t),this}getAxisState(){var t={[f.TOP]:[],[f.BOTTOM]:[],[f.LEFT]:[],[f.RIGHT]:[]};for(let e in f){const i=this.axis[e].map((function(t){return[t.getCurrentMin(),t.getCurrentMax()]}));t[e]=i}return t}setAxisState(t){var e,i;for(var s in t)if(this.axis[s])for(e=0,i=t[s].length;e<i;e++)this.axis[s][e]&&(this.axis[s][e].setCurrentMin(t[s][e][0]),this.axis[s][e].setCurrentMax(t[s][e][1]));this.draw()}saveAxisState(t){return this.savedAxisState=this.savedAxisState||{},this.savedAxisState[t]=this.getAxisState(),this}recallAxisState(t){return this.savedAxisState[t]&&this.recallAxisState(this.savedAxisState[t]),this}_applyToAxis(t){switch(t){case"string":return(t,e,i)=>{for(var s=0;s<this.axis[t].length;s++)this.axis[t][s][e].apply(this.axis[t][s],i)};case"function":return(t,e,i)=>{for(var s=0;s<this.axis[t].length;s++)e.call(this,this.axis[t][s],t,i)};default:throw new Error("You must either execute a function or provide a string that registers a function")}}getBoundaryAxis(t,e,i){return this.getBoundaryAxisFromSeries(t,e,i)}getBoundaryAxisFromSeries(t,e,i){var s,r,a,n,o,h,l="min"==e,u=(t.isX()?["getMinX","getMaxX"]:["getMinY","getMaxY"])[l?0:1],d=l?1/0:-1/0;for(s=d,o=0,h=(a=this.getSeriesFromAxis(t)).length;o<h;o++)(r=a[o]).isShown()&&(n=r[u](i),s=Math[e](isNaN(s)?d:s,isNaN(n)?d:n));return s}getSeriesFromAxis(t){for(var e=[],i=this.series.length-1;i>=0;i--)this.series[i].getXAxis()!=t&&this.series[i].getYAxis()!=t||e.push(this.series[i]);return e}updateDataMinMaxAxes(t){var e,i;for(let s in this.axis){let r=s;for(i=this.axis[r].length-1;i>=0;i--){e=this.axis[r][i];let s=this.getBoundaryAxis(this.axis[r][i],"min",t),a=this.getBoundaryAxis(this.axis[r][i],"max",t);isFinite(a)&&e.setMaxValueData(a),isFinite(s)&&e.setMinValueData(s)}}}_applyToAxes(t,e,i=!1,s=!1){var r,a=[],n=0;for((i||null==i)&&(a.push("top"),a.push("bottom")),(s||null==s)&&(a.push("left"),a.push("right")),r=a.length;n<r;n++)this._applyToAxis(typeof t).call(this,a[n],t,e)}findAxesLinkedTo(t){var e=[];return this._applyToAxes((function(i){i.linkedToAxis&&i.linkedToAxis.axis==t&&e.push(i)}),{},t instanceof this.getConstructor("graph.axis.x"),t instanceof this.getConstructor("graph.axis.y")),e}_axisHasChanged(){this._axesHaveChanged=!0}newSerie(t,e,i){let s;return"object"==typeof e||i||(i=e,e={}),i||(i=h.SERIE_TYPE.LINE),(s=this.getSerie(t))||(s=new(this.getConstructor(i))(this,t,e),this.appendSerieToDom(s),this.series.push(s),this.emit("newSerie",s)),s}emit(t,...e){throw new Error("Method not implemented.")}getSerie(t){if("number"==typeof t)return this.series[t]||!1;"function"==typeof t&&(t=t());for(var e=0,i=this.series.length;e<i;e++)if(this.series[e].getName()==t||this.series[e]==t)return this.series[e];return!1}getSeries(){return this.series}allSeries(...t){return this.series.filter((e=>t.includes(e.getType())))}sortSeries(t){return this.series.sort(t),this}drawSerie(t,e){if(!t.draw)throw new Error("Serie has no method draw");t.draw(e)}drawSeries(t){if(this.width&&this.height)for(var e=this.series.length-1;e>=0;e--)this.series[e].isShown()&&this.drawSerie(this.series[e],t)}resetSeries(){this.removeSeries()}killSeries(){this.resetSeries()}killLegend(){this.legend&&this.legend.kill(),this.legend=void 0}killShapes(){this.shapes.forEach((t=>{t.kill(!1)}))}removeSeries(){for(;this.series[0];)this.series[0].kill(!0);this.series=[],this.legend&&this.legend.update()}selectSerie(t,e){"object"!=typeof t&&(t=this.getSerie(t)),this.selectedSerie==t&&this.selectedSerie.selectionType==e||(this.selectedSerie!==t&&this.selectedSerie?this.unselectSerie(this.selectedSerie):(this.selectedSerie=t,this.triggerEvent("onSelectSerie",t),t.select(e||"selected")))}getSelectedSerie(){return this.selectedSerie}unselectSerie(t){t.unselect(),this.selectedSerie=!1,this.triggerEvent("onUnselectSerie",t)}getShapesOfSerie(t){for(var e=[],i=this.shapes.length-1;i>=0;i--)this.shapes[i].getSerie()==t&&e.push(this.shapes[i]);return e}makeToolbar(t){var e=this.getConstructor("graph.toolbar");return this.toolbar=new e(this,t)}getShapes(){return this.shapes||[]}newShape(t,e,i=!1,a={}){if(this.prevent(!1),!i&&(this.emit("beforeNewShape",e),this.prevent(!1)))return!1;var n;if("object"==typeof t&&(i=e,t=(e=t).type),(e=e||{})._id=r.guid(),!(n="function"==typeof t?t:this.getConstructor(`graph.shape.${t}`)))return r.throwError("No constructor for this shape");var o=new n(this,e);if(!o)return r.throwError("Failed to construct shape.");if(o.type=t,o.graph=this,o._data=e,void 0!==e.properties&&o.setProperties(e.properties),o.init(this,a,!!a&&a.simplified),void 0!==e.props)for(var h in e.props)o.setProp(h,e.props[h]);if(e.position)for(var l=0,u=e.position.length;l<u;l++)o.setPosition(new s.default(e.position[l]),l);if(void 0!==e.fillColor&&o.setFillColor(e.fillColor),void 0!==e.fillOpacity&&o.setFillOpacity(e.fillOpacity),void 0!==e.strokeColor&&o.setStrokeColor(e.strokeColor),void 0!==e.strokeWidth&&o.setStrokeWidth(e.strokeWidth),void 0!==e.layer&&o.setLayer(e.layer),1==e.locked&&o.lock(),1==e.movable&&o.movable(),1==e.selectable&&o.selectable(),1==e.resizable&&o.resizable(),void 0!==e.attributes&&o.setProp("attributes",e.attributes),void 0!==e.handles&&o.setProp("handles",e.handles),void 0!==e.selectOnMouseDown&&o.setProp("selectOnMouseDown",!0),void 0!==e.selectOnClick&&o.setProp("selectOnClick",!0),void 0!==e.transforms&&Array.isArray(e.transforms)&&e.transforms.forEach((({type:t,value:e})=>{o.addTransform(t,e)})),void 0!==e.highlightOnMouseOver&&o.setProp("highlightOnMouseOver",!0),e.labelEditable&&o.setProp("labelEditable",e.labelEditable),e.labels&&!e.label&&(e.label=e.labels),void 0!==e.label)for(Array.isArray(e.label)||(e.label=[e.label]),l=0,u=e.label.length;l<u;l++)o.showLabel(l),o.setLabelText(e.label[l].text,l),o.setLabelPosition(e.label[l].position,l),o.setLabelColor(e.label[l].color||"black",l),o.setLabelSize(e.label[l].size,l),o.setLabelAngle(e.label[l].angle||0,l),o.setLabelBaseline(e.label[l].baseline||"no-change",l),o.setLabelAnchor(e.label[l].anchor||"start",l),o.setLabelBackgroundColor(e.label[l].backgroundColor||"transparent",l),o.setLabelBackgroundOpacity(e.label[l].backgroundOpacity||1,l);return e.serie&&o.setSerie(this.getSerie(e.serie)),o.createHandles(),o.applyStyle(),this.shapes.push(o),i||this.emit("newShape",o,e),o}newPosition(){return new s.default(...arguments)}redrawShapes(){for(var t=0,e=this.shapes.length;t<e;t++)this.shapes[t].redraw()}removeShapes(){for(var t=0,e=this.shapes.length;t<e;t++)this.shapes[t]&&this.shapes[t].kill&&this.shapes[t].kill(!0);this.shapes=[]}selectShape(t,e){if(t){if(this.selectedShapes.indexOf(t)>-1)return!1;if(!t.isSelectable())return!1;e||this.emit("beforeShapeSelect",t),this.prevent(!1)||(this.selectedShapes.length>0&&this.options.shapesUniqueSelection&&this.unselectShapes(e),t._select(e),this.selectedShapes.push(t),e||this.emit("shapeSelect",t))}}getSelectedShapes(){return this.selectedShapes}unselectShape(t,e){-1!=this.selectedShapes.indexOf(t)&&(e||this.emit("beforeShapeUnselect",t),this.cancelUnselectShape?this.cancelUnselectShape=!1:(t._unselect(),this.selectedShapes.splice(this.selectedShapes.indexOf(t),1),e||this.emit("shapeUnselect",t)))}unselectShapes(t){for(;this.selectedShapes[0];)this.unselectShape(this.selectedShapes[0],t);return this}_removeShape(t){this.shapes.splice(this.shapes.indexOf(t),1)}appendShapeToDom(t){this.wrapper&&(t.isHTML()&&this.wrapper.insertBefore(t._dom,this.dom),this.getLayer(t.getLayer(),"shape").appendChild(t.simplified?t._dom:t.group))}removeShapeFromDom(t){this.wrapper&&(t.isHTML()&&this.wrapper.removeChild(t._dom),this.getLayer(t.getLayer(),"shape").removeChild(t.group))}appendSerieToDom(t){this.getLayer(t.getLayer(),"serie").appendChild(t.groupMain)}removeSerieFromDom(t){this.getLayer(t.getLayer(),"serie").removeChild(t.groupMain)}getLayer(t,e){if(!this.layers[t]){this.layers[t]=[],this.layers[t][0]=document.createElementNS(g,"g"),this.layers[t][0].setAttribute("data-layer",t),this.layers[t][1]=document.createElementNS(g,"g"),this.layers[t][2]=document.createElementNS(g,"g"),this.layers[t][0].appendChild(this.layers[t][1]),this.layers[t][0].appendChild(this.layers[t][2]);for(var i,s=1;!(i=this.layers[t-s])&&t-s>=0;)s++;i?i.nextSibling?this.plotGroup.insertBefore(this.layers[t][0],i.nextSibling):this.plotGroup.appendChild(this.layers[t][0]):this.plotGroup.insertBefore(this.layers[t][0],this.plotGroup.firstChild)}return this.layers[t]["shape"==e?2:1]}focus(){this.wrapper&&this.wrapper.focus()}elementMoving(t){this.bypassHandleMouse=t}stopElementMoving(t){t&&t==this.bypassHandleMouse?this.bypassHandleMouse=!1:t||(this.bypassHandleMouse=!1)}_makeClosingLines(){this.closingLines={};for(var t=["top","bottom","left","right"],e=0;e<4;e++){var i=document.createElementNS(g,"line");i.setAttribute("stroke",this.options.closeColor),i.setAttribute("shape-rendering","crispEdges"),i.setAttribute("stroke-linecap","square"),i.setAttribute("display","none"),this.closingLines[t[e]]=i,this.graphingZone.appendChild(i)}}isActionAllowed(t,e){if((e.type===t.type||void 0===e.type&&"mousedown"===t.type||("wheel"===t.type||"mousewheel"===t.type)&&"mousewheel"==e.type)&&(!e.enabled||("function"==typeof e.enabled?e.enabled(this):e.enabled))){if(e.key&&e.key!==t.keyCode){let i={backspace:8,enter:13,tab:9,shift:16,ctrl:17,alt:18,pause:19,escape:27,up:33,down:34,left:37,right:39};if(Object.keys(i).includes(e.key)&&i[e.key]!==t.keyCode)return}return void 0===e.shift&&(e.shift=!1),void 0===e.ctrl&&(e.ctrl=!1),void 0===e.meta&&(e.meta=!1),void 0===e.alt&&(e.alt=!1),t.shiftKey==e.shift&&t.ctrlKey==e.ctrl&&t.metaKey==e.meta&&t.altKey==e.alt}}forcePlugin(t){this.forcedPlugin=t}unforcePlugin(){this.forcedPlugin=!1}_pluginsExecute(t,...e){for(var i in this.plugins)this.plugins[i]&&this.plugins[i][t]&&this.plugins[i][t].apply(this.plugins[i],e)}_pluginExecute(t,e,i){if(t)return this.plugins[t]&&this.plugins[t][e]?(this.plugins[t][e].apply(this.plugins[t],i),!0):void 0}pluginYieldActiveState(){this.activePlugin=void 0}_serieExecute(t,e,...i){"object"!=typeof t&&(t=this.getSerie(t)),"function"==typeof t[e]&&t.apply(t,...i)}_pluginsInit(){var t,e,i;for(var s in this.options.plugins)e=s,i=this.options.plugins[s],(t=this.getConstructor(`graph.plugin.${e}`))?(this.plugins[e]=new t(i),r.mapEventEmission(this.plugins[e].options,this.plugins[e]),this.plugins[e].init(this,i)):r.throwError(`Plugin "${e}" has not been registered`)}getPlugin(t){return this.plugins[t]||r.throwError(`Plugin "${t}" has not been loaded or properly registered`)}hasPlugin(t){return!!this.plugins[t]}triggerEvent(t,...e){if("function"==typeof this.options[t])return this.options[t].apply(this,e)}makeLegend(t){if(this.legend)return this.legend;var e=this.getConstructor("graph.legend");return e?(this.legend=new e(this,t),this.legend):r.throwError("Graph legend is not available as it has not been registered")}updateLegend(t=!1){if(this.legend)return this.legend.update(t),this}getLegend(){if(this.legend)return this.legend}requireLegendUpdate(){this.legend&&this.legend.requireDelayedUpdate()}orthogonalProjectionSetup(){this.options.zAxis=r.extend(!0,{maxZ:10,minZ:0,shiftX:-25,shiftY:-15,xAxis:this.getXAxis(),yAxis:this.getYAxis()})}orthogonalProjectionUpdate(){this.zAxis||(this.zAxis={g:document.createElementNS(g,"g"),l:document.createElementNS(g,"line")},this.zAxis.g.appendChild(this.zAxis.l),this.groupGrids.appendChild(this.zAxis.g));let t=this.options.zAxis.xAxis,e=this.options.zAxis.yAxis;var i=t.getMinPx(),s=e.getMinPx(),r=t.getZProj(this.options.zAxis.maxZ),a=e.getZProj(this.options.zAxis.maxZ);this.zAxis.l.setAttribute("stroke","black"),this.zAxis.l.setAttribute("x1",i),this.zAxis.l.setAttribute("x2",i+r),this.zAxis.l.setAttribute("y1",s),this.zAxis.l.setAttribute("y2",s+a),this.updateDataMinMaxAxes(!0);var n=this.series.map((t=>[t.getZPos(),t]));n.sort(((t,e)=>e[0]-t[0]));let o=0;n.forEach((t=>{t[1].setLayer(o),this.appendSerieToDom(t[1]),o++})),this.drawSeries(!0)}kill(){this.wrapper&&this.wrapper.removeChild(this.dom)}_removeSerie(t){this.series.splice(this.series.indexOf(t),1),this._pluginsExecute("serieRemoved",t)}contextListen(t,e,i){if(this.options.onContextMenuListen)return this.options.onContextMenuListen(t,e,i)}lockShapes(){this.shapesLocked=!0;for(var t=0,e=this.shapes.length;t<e;t++)this.shapes[t].moving=!1,this.shapes[t].resizing=!1}unlockShapes(){this.shapesLocked=!1}prevent(t){var e=this.prevented;return-1!=t&&(this.prevented=null==t||t),e}_getXY(t){var e=t.clientX,i=t.clientY,s=this.offsetCached||r.getOffset(this.wrapper);return{x:e-=s.left,y:i-=s.top}}_resize(){this.width&&this.height&&(this.getDrawingWidth(),this.getDrawingHeight(),this.sizeSet=!0,this.dom.setAttribute("width",this.width),this.dom.setAttribute("height",this.height),this.domTitle.setAttribute("x",this.width/2),this._sizeChanged=!0,this.drawn&&(this.requireLegendUpdate(),this.draw(!0)))}updateGraphingZone(){r.setAttributeTo(this.graphingZone,{transform:`translate(${this.options.paddingLeft}, ${this.options.paddingTop})`}),this._sizeChanged=!0}getDrawingSpaceWidth(){return()=>this.drawingSpaceWidth}getDrawingSpaceHeight(){return()=>this.drawingSpaceHeight}getDrawingSpaceMinX(){return()=>this.drawingSpaceMinX}getDrawingSpaceMinY(){return()=>this.drawingSpaceMinY}getDrawingSpaceMaxX(){return()=>this.drawingSpaceMaxX}getDrawingSpaceMaxY(){return()=>this.drawingSpaceMaxY}tracking(t){return this.trackingLine(t)}trackingLine(t){var e=this;if("boolean"==typeof t)return void(this.options.trackingLine&&(this.options.trackingLine.enable=t));t&&(this.options.trackingLine=t),t.enable=void 0===t.enable||!!t.enable;const i=new Set;if(Array.isArray(t.series)?t.series.forEach((t=>{i.add(this.getSerie(t))})):"all"==t.series&&this.allSeries().forEach((t=>i.add(t))),t.series=i,"individual"==t.mode)i.forEach((i=>{e.addSerieToTrackingLine(i,t.serieOptions)}));else{if(t.noLine)return;this.trackingLineShape||(this.trackingLineShape=this.newShape("line",r.extend(!0,{position:[{y:"min"},{y:"max"}],stroke:"black",layer:-1},t.trackingLineShapeOptions))),this.trackingLineShape.draw()}}addSerieToTrackingLine(t,e={}){let i;this.options.trackingLine||this.trackingLine({mode:"individual"}),this.options.trackingLine.series.add(t),i=this.options.trackingLine.serieShape?this.options.trackingLine.serieShape:{shape:"ellipse",properties:{rx:[3*t.getLineWidth()+"px"],ry:[3*t.getLineWidth()+"px"]}},t.options.tracking=Object.assign({},e),t.trackingShape||(t.trackingShape=this.newShape(i.shape,{fillColor:t.getLineColor(),strokeColor:"White",strokeWidth:t.getLineWidth()},!0,i.properties).setSerie(t).forceParentDom(t.groupMain).draw())}setKatexRenderer(t){this._katexRenderer=t}hasKatexRenderer(){return!!this._katexRenderer}renderWithKatex(t,e){if(this._katexRenderer){e?e.removeChild(e.firstChild):e=document.createElementNS(g,"foreignObject");let i=document.createElement("div");return e.appendChild(i),this._katexRenderer(t,i),e}return!1}exportToSchema(){let t={};t.title=this.options.title,t.width=this.getWidth(),t.height=this.getHeight();let e=[],i={x:[],y:[]};for(let t in this.axis)e=e.concat(this.axis[t].map((e=>({type:t,label:e.options.label,unit:e.options.unit,min:e.options.forcedMin,max:e.options.forcedMax,flip:e.options.flipped})))),"top"==t||"bottom"==t?i.x=i.x.concat(this.axis[t]):i.y=i.y.concat(this.axis[t]);t.axis=e;let s=t=>{switch(t){case h.SERIE_TYPE.BAR:return"bar";case h.SERIE_TYPE.LINE_COLORED:return"color";case h.SERIE_TYPE.SCATTER:return"scatter";default:case h.SERIE_TYPE.LINE:return"line"}},r=(t,e)=>{let i=[];switch(t.getType()){case x.SERIE_LINE:for(var s=0;s<t.data.length;s++)for(var r=0;r<t.data[s].length-1;r+=2)i.push(t.data[s][r+(e&&t.isFlipped()||!e&&!t.isFlipped()?1:0)]);break;case x.SERIE_SCATTER:for(r=0;r<t.data.length-1;r+=2)i.push(t.data[r+(e&&t.isFlipped()||!e&&!t.isFlipped()?1:0)])}return i};return t.data=[].concat(this.series.map((t=>{let e=[],a=[];if(t.getType()==x.SERIE_LINE)for(var n in t.styles){a.push({styleName:n,color:t.styles[n].lineColor,lineWidth:t.styles[n].lineWidth,lineStyle:t.styles[n].lineStyle});let i={styleName:n,styles:[]};e.push(i),i.styles=i.styles.concat((t.styles[n].markers||[]).map((t=>({shape:t.type,zoom:t.zoom,lineWidth:t.strokeWidth,lineColor:t.strokeColor,color:t.fillColor,points:t.points}))))}return{label:t.getLabel(),id:t.getName(),type:s(t.getType()),x:r(t,!0),y:r(t,!1),xAxis:i.x.indexOf(t.getXAxis()),yAxis:i.y.indexOf(t.getYAxis()),style:e,lineStyle:a}}))),t}_getAxis(t,e,i){e=e||{};var s,r={def:{x:this.getConstructor("graph.axis.x"),y:this.getConstructor("graph.axis.y")},time:{x:this.getConstructor("graph.axis.x.time"),y:void 0},bar:{x:this.getConstructor("graph.axis.x.bar"),y:void 0}};let a;switch(e.type){case"time":a=r.time;break;case"bar":a=r.bar;break;default:a=r.def}switch(i){case"top":case"bottom":s=a.x;break;case"left":case"right":if(!a.hasOwnProperty("y"))throw"Axis does not exist for axis y";s=a.y;break;default:return}return"object"==typeof(t=t||0)&&(e=t,t=0),this.axis[i][t]||(this.axis[i][t]=new s(this,i,e),this.axis[i][t].init(this,e)),this.axis[i][t]}_closeLine(t,e,i,s,r){if(!1!==this.options.close){var a=0;this.axis[t].map((function(t){t.isDisplayed()&&!t.floating&&a++})),!0!==this.options.close&&!this.options.close[t]||0!=a?this.closingLines[t].setAttribute("display","none"):(this.closingLines[t].setAttribute("display","block"),this.closingLines[t].setAttribute("x1",e),this.closingLines[t].setAttribute("x2",i),this.closingLines[t].setAttribute("y1",s),this.closingLines[t].setAttribute("y2",r))}}refreshDrawingZone(){var t={top:[],bottom:[],left:[],right:[]},e={top:[],bottom:[],left:[],right:[]};console.log("refresh it"),console.log("sdfdsf"),this._applyToAxes((function(i,s){if(i.isShown()){if(i.showGroup(),!i.floating){var r=y(i.getSpan(),e[s]);i.setLevel(r),t[s][r]=Math.max(i.getAxisPosition(),t[s][r]||0)}}else i.hideGroup()}),!1,!0,!1);var i=t.top.reduce((function(t,e){return t+e}),0),s=t.bottom.reduce((function(t,e){return t+e}),0);this.drawingSpaceHeight=this.getDrawingHeight()-i-s,[t.top,t.bottom].map((function(t){t.reduce((function(e,i,s){return t[s]=e+i,e+i}),0)})),this._applyToAxes((function(e,i){e.isShown()&&!e.floating&&e.setShift(t[i][e.getLevel()])}),!1,!0,!1),this._applyToAxes(((r,a)=>{if(r.isShown()?r.showGroup():r.hideGroup(),r.setMinPx(i),r.setMaxPx(this.getDrawingHeight(!0)-s),r.floating)return;let n=r.linkedToAxis?0:r.draw();if(r.isShown()){var o=y(r.getSpan(),e[a]);r.setLevel(o),r.options.forcedWidth?t[a][o]=r.options.forcedWidth:(t[a][o]=Math.max(n,t[a][o]||0),o<t[a].length-1&&(t[a][o]+=10))}}),!1,!1,!0);var a=r.extend(!0,{},t);this._applyToAxes((function(e,i){e.isShown()&&!e.floating&&(a[i][e.getLevel()]=Math.max(t[i][e.getLevel()],e.equalizePosition(t[i][e.getLevel()])))}),!1,!1,!0);var n=(t=a).left.reduce((function(t,e){return t+e}),0),o=t.right.reduce((function(t,e){return t+e}),0);this.drawingSpaceWidth=this.getDrawingWidth()-n-o,[t.left,t.right].forEach((function(t){t.reduce((function(e,i,s){return t[s]=e+i,e+i}),0)})),this._applyToAxes(((e,i)=>{e.isShown()&&!e.floating&&e.setShift(t[i][e.getLevel()])}),!1,!1,!0),this._applyToAxes(((t,e)=>{t.isShown(),t.setMinPx(n),t.setMaxPx(this.getDrawingWidth(!0)-o),t.floating||t.linkedToAxis||t.draw()}),!1,!0,!1),this._applyToAxes((function(t,e){if(t.floating){var i=t.getFloatingAxis(),s=t.getFloatingValue(),r=i.getPx(s);t.setShift(r),t.linkedToAxis||t.draw()}}),!1,!0,!0),this._closeLine("right",this.getDrawingWidth(!0),this.getDrawingWidth(!0),i,this.getDrawingHeight(!0)-s),this._closeLine("left",0,0,i,this.getDrawingHeight(!0)-s),this._closeLine("top",n,this.getDrawingWidth(!0)-o,0,0),this._closeLine("bottom",n,this.getDrawingWidth(!0)-o,this.getDrawingHeight(!0)-s,this.getDrawingHeight(!0)-s),this.clipRect.setAttribute("y",i.toString()),this.clipRect.setAttribute("x",n.toString()),this.clipRect.setAttribute("width",(this.getDrawingWidth()-n-o).toString()),this.clipRect.setAttribute("height",(this.getDrawingHeight()-i-s).toString()),this.rectEvent.setAttribute("y",i+this.getPaddingTop()),this.rectEvent.setAttribute("x",n+this.getPaddingLeft()),this.rectEvent.setAttribute("width",this.drawingSpaceWidth),this.rectEvent.setAttribute("height",this.drawingSpaceHeight),this.drawingSpaceMinX=n+this.getPaddingLeft(),this.drawingSpaceMinY=i+this.getPaddingTop(),this.drawingSpaceMaxX=this.getDrawingWidth()-o+this.getPaddingLeft(),this.drawingSpaceMaxY=this.getDrawingHeight()-s+this.getPaddingTop(),this._applyToAxes((function(t,e){t.isShown()&&t.drawLines()}),!1,!0,!0),this.redrawShapes()}static registerConstructor(t,e){if(x._constructors.has(t))return r.throwError(`Constructor ${t} already exists.`);x._constructors.set(t,e)}static getConstructor(t){if(!x._constructors.has(t))throw new Error(`Constructor "${t}" doesn't exist`);return x._constructors.get(t)}getConstructor(t){return x.getConstructor(t)}static newWaveform(){return new o.Waveform(...arguments)}static waveform(){return new o.Waveform(...arguments)}static newWaveformHash(){return new o.WaveformHash(...arguments)}static waveformHash(){return new o.WaveformHash(...arguments)}static saveStyle(t,e){x._styles.set(t,e)}static getStyle(t){return x._styles.get(t)||h.SERIE_DEFAULT_STYLE}}function y(t,e){for(var i=0,s=e.length;i<s;i++){for(var r=!0,a=0,n=e[i].length;a<n;a++)t[0]<e[i][a][0]&&t[1]<e[i][a][0]||t[0]>e[i][a][1]&&t[1]>e[i][a][1]||(r=!1);if(r)return e[i].push(t),i}return e.push([t]),e.length-1}function b(t,e,i){if(t.forcedPlugin)return t.activePlugin=t.forcedPlugin,void t._pluginExecute(t.forcedPlugin,i,[t,e]);!function(t,e,i,s){var r,a,n=t.options.keyActions;for(r=0,a=n.length;r<a;r++){if(n[r].plugin){if(t.forcedPlugin==n[r].plugin||t.isActionAllowed(e,n[r]))return n[r].options&&i.push(n[r].options),t.activePlugin=n[r].plugin,t._pluginExecute(n[r].plugin,s,i),e.preventDefault(),e.stopPropagation(),!0}else if(n[r].callback&&t.isActionAllowed(e,n[r]))return n[r].options&&i.push(n[r].options),e.preventDefault(),e.stopPropagation(),n[r].callback.apply(t,i),!0;n[r].removeSelectedShape&&t.isActionAllowed(e,n[r])&&(e.preventDefault(),e.stopPropagation(),t.selectedShapes.map((t=>{t.kill(n[r].keepInDom)})))}}(t,e,[t,e],i)}function v(t,e,i,s){var r,a,n=t.options.mouseActions,o=!1;for(r=0,a=n.length;r<a;r++)if(n[r].plugin){if(t.forcedPlugin==n[r].plugin||t.isActionAllowed(e,n[r])){n[r].options&&i.push(n[r].options),"wheel"!==e.type&&"mousewheel"!==e.type&&(t.activePlugin=n[r].plugin),t._pluginExecute(n[r].plugin,s,i),o=!0;continue}}else{if(n[r].callback&&t.isActionAllowed(e,n[r])){n[r].options&&i.push(n[r].options),n[r].callback.apply(t,i),o=!0;continue}if(n[r].series){var h;if("all"===n[r].series)h=t.series;else{if(Array.isArray(n[r].series))throw"Not implemented";h=[h]}for(n[r].options&&i.push(n[r].options);0<h.length;r++)t._serieExecute(h[r],s,i);o=!0;continue}}return o}d(x,"SERIE_BAR",void 0),d(x,"SERIE_LINE_COLORED",void 0),d(x,"SERIE_SCATTER",void 0),d(x,"SERIE_LINE",void 0),d(x,"_constructors",new Map),d(x,"_styles",new Map);var M=function(t,e,i,s,r){const a=t.options.trackingLine.textMethod||_;var n=!1;if(!r&&t.options.trackingLine.legend&&(n=!0,r=function(t){var e=document.createElement("div");return e.setAttribute("class","trackingLegend"),e.style.position="absolute",e.style.borderRadius="4px",e.style.boxShadow="1px 1px 3px 0px rgba(100,100,100,0.6)",e.style.border="2px solid #333333",e.style.backgroundColor="rgba(255, 255, 255, 0.5 )",e.style.pointerEvents="none",e.style.paddingTop="5px",e.style.paddingBottom="5px",e.style.paddingLeft="10px",e.style.paddingRight="10px",t.getWrapper().insertBefore(e,t.getDom()),e}(t)),t.options.trackingLine.legend){if(0==e.length)return r.style.display="none",r;"none"==r.style.display||n?A(t,r,i,s,!0):S(t,r,i,s),r.style.display="block";var o=a(e,void 0,i,s);return r.innerHTML=o,r}},A=function(t,e,i,s,r){var a=Date.now(),n=e.offsetHeight,o=parseInt(e.style.marginLeft.replace("px","")||0,10),h=parseInt(e.style.marginTop.replace("px","")||0,10);if(i=i>t.getWidth()/2?i-i%10-20-e.offsetWidth:i-i%10+30,s=s-s%10+n/2,r)return e.style.marginLeft=`${i}px`,void(e.style.marginTop=`${s}px`);window.requestAnimationFrame((function t(){var r=(Date.now()-a)/200;r>1&&(r=1),e.style.marginLeft=`${(i-o)*r+o}px`,e.style.marginTop=`${(s-h)*r+h}px`,r<1&&window.requestAnimationFrame(t)}))},S=(...t)=>{r.debounce(A,50)(...t)};const _=t=>{let e="";for(var i in t)t[i].closestPoint&&(e+=`${t[i].serie.getName()}: ${t[i].serie.getYAxis().valueToHtml(t[i].closestPoint.yClosest,void 0,void 0,2)}\n      `);return e};(0,a.default)(x),(0,n.default)(x);var k=x;e.default=k},3187:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s,r=(s=i(8697))&&s.__esModule?s:{default:s},a=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var a=s?Object.getOwnPropertyDescriptor(t,r):null;a&&(a.get||a.set)?Object.defineProperty(i,r,a):i[r]=t[r]}return i.default=t,e&&e.set(t,i),i}(i(4167));function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}var o={backgroundColor:"rgba(255, 255, 255, 0.8)",frame:!0,frameWidth:1,frameColor:"black",paddingTop:10,paddingLeft:10,paddingBottom:10,paddingRight:10,color:"black",frameRounding:0,movable:!1,shapesToggleable:!0,isSerieHideable:!0,isSerieSelectable:!0};function h(t){try{return t.getBBox()}catch(t){return{height:0,width:0,x:0,y:0}}}e.default=class{constructor(t,e){this.options=a.extend({},o,e),this.graph=t,this.svg=document.createElementNS(this.graph.ns,"g"),this.subG=document.createElementNS(this.graph.ns,"g"),this.groups=[],this.rect=document.createElementNS(this.graph.ns,"rect"),this.rectBottom=document.createElementNS(this.graph.ns,"rect"),this.autoPosition=void 0,this.rect.setAttribute("x",0),this.rect.setAttribute("y",0),this.rectBottom.setAttribute("x",0),this.rectBottom.setAttribute("y",0),this.series=!1,this.svg.setAttribute("display","none"),this.pos={x:void 0,y:void 0,transformX:0,transformY:0},this.setEvents(),this.eyeId=a.guid(),this.eyeCrossedId=a.guid();var i=a.SVGParser(`<svg xmlns="http://www.w3.org/2000/svg"><symbol id="${this.eyeCrossedId}" viewBox="0 -256 1850 1850"><rect pointer-events="fill" fill="transparent" x="-256" y="0" width="2106" height="1850" /><g transform="matrix(1,0,0,-1,30.372881,1214.339)"><path d="m 555,201 78,141 q -87,63 -136,159 -49,96 -49,203 0,121 61,225 Q 280,812 128,576 295,318 555,201 z m 389,759 q 0,20 -14,34 -14,14 -34,14 -125,0 -214.5,-89.5 Q 592,829 592,704 q 0,-20 14,-34 14,-14 34,-14 20,0 34,14 14,14 14,34 0,86 61,147 61,61 147,61 20,0 34,14 14,14 14,34 z m 363,191 q 0,-7 -1,-9 Q 1201,954 991,576 781,198 675,9 l -49,-89 q -10,-16 -28,-16 -12,0 -134,70 -16,10 -16,28 0,12 44,87 Q 349,154 228.5,262 108,370 20,507 0,538 0,576 q 0,38 20,69 153,235 380,371 227,136 496,136 89,0 180,-17 l 54,97 q 10,16 28,16 5,0 18,-6 13,-6 31,-15.5 18,-9.5 33,-18.5 15,-9 31.5,-18.5 16.5,-9.5 19.5,-11.5 16,-10 16,-27 z m 37,-447 Q 1344,565 1265,450.5 1186,336 1056,286 l 280,502 q 8,-45 8,-84 z m 448,-128 q 0,-35 -20,-69 Q 1733,443 1663,362 1513,190 1315.5,95 1118,0 896,0 l 74,132 q 212,18 392.5,137 180.5,119 301.5,307 -115,179 -282,294 l 63,112 q 95,-64 182.5,-153 87.5,-89 144.5,-184 20,-34 20,-69 z" fill="#c0c0c0"></path></g></symbol></svg>`),s=a.SVGParser(`<svg xmlns="http://www.w3.org/2000/svg"><symbol id="${this.eyeId}" viewBox="0 -256 1850 1850"><rect pointer-events="fill" x="-256" y="0" fill="transparent" width="2106" height="1850" /><g transform="matrix(1,0,0,-1,30.372881,1259.8983)"><path d="m 1664,576 q -152,236 -381,353 61,-104 61,-225 0,-185 -131.5,-316.5 Q 1081,256 896,256 711,256 579.5,387.5 448,519 448,704 448,825 509,929 280,812 128,576 261,371 461.5,249.5 662,128 896,128 1130,128 1330.5,249.5 1531,371 1664,576 z M 944,960 q 0,20 -14,34 -14,14 -34,14 -125,0 -214.5,-89.5 Q 592,829 592,704 q 0,-20 14,-34 14,-14 34,-14 20,0 34,14 14,14 14,34 0,86 61,147 61,61 147,61 20,0 34,14 14,14 14,34 z m 848,-384 q 0,-34 -20,-69 Q 1632,277 1395.5,138.5 1159,0 896,0 633,0 396.5,139 160,278 20,507 0,542 0,576 q 0,34 20,69 140,229 376.5,368 236.5,139 499.5,139 263,0 499.5,-139 236.5,-139 376.5,-368 20,-35 20,-69 z" fill="#444444" /></g></symbol></svg>`);this.svg.appendChild(document.adoptNode(s.documentElement.firstChild)),this.svg.appendChild(document.adoptNode(i.documentElement.firstChild)),this.svg.appendChild(this.subG),this.applyStyle()}setPosition(t,e,i){t&&(this.position=t,this.alignToX=e||"left",this.alignToY=i||"top")}setDraggable(t){this.options.movable=t}setAutoPosition(t){if(["bottom","left","top","right"].indexOf(t=t.toLowerCase())>-1)return this.autoPosition=t,this;this.requireDelayedUpdate(),this.autoPosition=!1}autoPosition(){return this.setAutoPosition(...arguments)}kill(){this.autoPosition?this.graph.getDom().removeChild(this.getDom()):this.graph.graphingZone.removeChild(this.getDom())}buildLegendBox(){var t=this.series||this.graph.getSeries(),e=0,i=this.options.paddingTop;this.autoPosition?this.graph.getDom().appendChild(this.getDom()):this.graph.graphingZone.appendChild(this.getDom());for(var s=0,r=t.length;s<r;s++)t[s].excludedFromLegend&&!this.series||("bottom"!=this.autoPosition&&"top"!=this.autoPosition||e+(a=h(this.groups[s])).width>this.graph.getDrawingWidth()-this.options.paddingRight&&(i+=16,e=0),this.groups[s].setAttribute("transform",`translate( ${e}, ${i})`),"bottom"==this.autoPosition||"top"==this.autoPosition?(e+=a.width+10,i+=0):(e=0,i+=16));var a=h(this.subG);switch(this.width=a.width+this.options.paddingRight+this.options.paddingLeft,this.height=a.height+this.options.paddingBottom+this.options.paddingTop,this.rect.setAttribute("width",this.width),this.rect.setAttribute("height",this.height),this.rect.setAttribute("fill","none"),this.rect.setAttribute("pointer-events","fill"),this.rect.setAttribute("display","none"),this.options.movable&&(this.rectBottom.style.cursor="move"),this.rectBottom.setAttribute("width",this.width),this.rectBottom.setAttribute("height",this.height),this.rectBottom.setAttribute("x",a.x-this.options.paddingLeft),this.rectBottom.setAttribute("y",a.y-this.options.paddingTop),this.position=this.position||{},this.autoPosition){case"bottom":this.position.y=`${this.graph.getHeight()}px`,this.position.x=`${(this.graph.drawingSpaceWidth-this.width)/2+this.graph.drawingSpaceMinX}px`,this.alignToY="bottom",this.alignToX=!1;break;case"left":this.position.x="6px",this.position.y=(this.graph.getHeight()-this.height)/2+"px",this.alignToX="left",this.alignToY=!1;break;case"right":this.position.x=`${this.graph.getWidth()}px`,this.position.y=(this.graph.getHeight()-this.height)/2+"px",this.alignToX="right",this.alignToY=!1;break;case"top":this.position.x=`${(this.graph.drawingSpaceWidth-this.width)/2+this.graph.drawingSpaceMinX}px`,this.position.y="10px",this.alignToY="top",this.alignToX=!1;break;case void 0:return;default:return void console.error("Position is not supported")}if(this.autoPosition){let t;switch(this.autoPosition){case"bottom":this.graph.options.paddingBottom=this.height+10,t=this.height!==this.previousHeight;break;case"top":this.graph.options.paddingTop=this.height+14,t=this.height!==this.previousHeight;break;case"left":this.graph.options.paddingLeft=this.width+5,t=this.width!==this.previousWidth;break;case"right":this.graph.options.paddingRight=this.width+10,t=this.width!==this.previousWidth}t&&(this.graph.draw(!0),this.previousHeight=this.height,this.previousWidth=this.width)}this.bbox=a}calculatePosition(){var t=r.default.check(this.position);let e=t.compute(this.graph,this.graph.getXAxis(),this.graph.getYAxis());e&&(t.y,t.x,"right"==this.alignToX&&(e.x-=this.width),"bottom"==this.alignToY&&(e.y-=this.height),this.pos.transformX=e.x,this.pos.transformY=e.y,this._setPosition())}update(t){if(!(this.graph.isDelayedUpdate()||!this._requiredUpdate&&t)){this._requiredUpdate=!1;var e=this;for(this.applyStyle();this.subG.hasChildNodes();)this.subG.removeChild(this.subG.lastChild);this.svg.insertBefore(this.rectBottom,this.svg.firstChild);var i=this.series||this.graph.getSeries();if(i.length>0){this.svg.setAttribute("display","block"),("bottom"==this.autoPosition||"top"==this.autoPosition)&&this.graph.getDrawingWidth();for(let t=0,d=i.length;t<d;t++){if(i[t].excludedFromLegend&&!this.series)continue;var s;const d=t;"bottom"!=this.autoPosition&&"top"!=this.autoPosition||this.graph.getDrawingWidth(),s=document.createElementNS(e.graph.ns,"g");var r=document.createElementNS(e.graph.ns,"rect");e.subG.appendChild(s),s.appendChild(r),i[t].getSymbolForLegend();var a=i[t]._getSymbolForLegendContainer(),n=i[t].getMarkerForLegend(),o=i[t].getTextForLegend(),l=35;const p=document.createElementNS(e.graph.ns,"use");this.isHideable()&&(l+=20,p.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",`#${i[t].isShown()?this.eyeId:this.eyeCrossedId}`),p.setAttribute("width",15),p.setAttribute("height",15),p.setAttribute("x",35),p.setAttribute("y",-8),p.addEventListener("click",(function(t){var s;t.stopPropagation(),i[d].isShown()?(i[d].hide(e.options.hideShapesOnHideSerie),s=e.eyeCrossedId):(i[d].show(e.options.hideShapesOnHideSerie),s=e.eyeId),p.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",`#${s}`)}))),o.setAttribute("transform",`translate(${l}, 3)`),o.setAttribute("fill",this.options.color),a&&s.appendChild(a),"scatter"==i[t].getType()&&a.setAttribute("transform","translate( 20, 0 )"),n&&s.appendChild(n),p&&s.appendChild(p),s.appendChild(o);var u=h(s);r.setAttribute("x",u.x),r.setAttribute("y",u.y),r.setAttribute("width",u.width),r.setAttribute("height",u.height),r.setAttribute("fill","none"),r.setAttribute("pointer-events","fill"),e.groups[t]=s,s.addEventListener("click",(function(s){var r=i[t];r.isShown()&&(e.isSelectable()&&!r.isSelected()?e.graph.selectSerie(r):e.graph.unselectSerie(r),s.preventDefault(),s.stopPropagation())}))}this.svg.appendChild(this.rect),this.buildLegendBox(),this.calculatePosition()}}}isHideable(){return this.options.isSerieHideable}notHideable(){return this.options.isSerieHideable=!1,this}hideable(){return this.options.isSerieHideable=!0,this}set seriesHideable(t){this.options.isSerieHideable=!!t}get seriesHideable(){return this.options.isSerieHideable}isSelectable(){return this.options.isSerieSelectable}isToggleShapes(){return this.options.shapesToggleable}getDom(){return this.svg}setEvents(){var t=this,e=this.pos;this.svg.addEventListener("mousedown",(function(i){i.stopPropagation(),t.options.movable&&(e.x=i.clientX,e.y=i.clientY,i.preventDefault(),t.mousedown=!0,t.graph.elementMoving(t),t.rect.setAttribute("display","block"))})),this.svg.addEventListener("click",(function(t){t.stopPropagation()})),this.svg.addEventListener("dblclick",(function(t){t.stopPropagation()})),this.svg.addEventListener("mousemove",(function(e){t.handleMouseMove(e)}))}handleMouseUp(t){t.stopPropagation(),t.preventDefault(),this.mousedown=!1,this.rect.setAttribute("display","none"),this.graph.elementMoving(!1)}handleMouseMove(t){if(this.mousedown){var e=this.pos,i=t.clientX-e.x,s=t.clientY-e.y;e.transformX+=i,e.transformY+=s,e.x=t.clientX,e.y=t.clientY,t.stopPropagation(),t.preventDefault(),this._setPosition()}}_setPosition(){var t=this.pos;isNaN(t.transformX)||isNaN(t.transformY)||!1===t.transformX||!1===t.transformY||this.svg.setAttribute("transform",`translate(${t.transformX}, ${t.transformY})`)}applyStyle(){this.options.frame&&(this.rectBottom.setAttribute("stroke",this.options.frameColor),this.rectBottom.setAttribute("stroke-width",`${this.options.frameWidth}px`),this.rectBottom.setAttribute("rx",this.options.frameRounding),this.rectBottom.setAttribute("ry",this.options.frameRounding)),this.rectBottom.setAttribute("fill",this.options.backgroundColor)}fixSeries(){var t=[];if(!1===arguments[0])return this.series=!1,void this.update();for(var e=0,i=arguments.length;e<i;e++)Array.isArray(arguments[e])?t=t.concat(arguments[e]):t.push(arguments[e]);this.update(),this.series=t}fixSeriesAdd(t){this.series=this.series||[],this.series.push(t)}requireDelayedUpdate(){this._requiredUpdate=!0}}},3426:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(t,e){!function(t,e){e=e||50,i[t]||(i[t]={},r[t]=0),a[t]=e}(t,e)},e.get=o,e.store=function(t,e,o){return function(t,e,o){var h,l,u;i[t]&&void 0!==r[t]&&a[t]&&(u=s[t],i[t][e]?(n(t,e),i[t][e].data.data=o,i[t][e].data.timeout=Date.now()):(h={data:{data:o,timeout:Date.now()}},void 0===u?(h.prev=h,h.next=h):(h.prev=u.prev,h.next=u.next,u.next.prev=h,u.next=h),s[t]=h,i[t][e]=h,r[t]++),r[t]>a[t]&&u&&(l=u.next,u.next.next.prev=u,u.next=u.next.next,l.next.next=void 0,l.next.prev=void 0,r[t]--))}(t,e,o),o},e.empty=function(t){!function(t){i[t]={},r[t]=0}(t)},e.exist=function(t){return i[t]},e.default=void 0;var i={},s={},r={},a={};function n(t,e){var r,a;if(i[t]&&i[t][e])return a=s[t],(r=i[t][e]).prev=a,r.next=a.next,a.next.prev=r,a.next=r,s[t]=r,r.data}function o(t,e){var i;if(null!=(i=n(t,e)))return i}var h=o;e.default=h},8697:(t,e)=>{function i(t){return!!(t&&t.indexOf&&t.indexOf("px")>-1)&&parseInt(t.replace("px",""))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;class s{constructor(t,e,i,s){"object"==typeof t?(this.x=t.x,this.y=t.y,this.dx=t.dx,this.dy=t.dy):(this.x=t,this.y=e,this.dx=i,this.dy=s)}duplicate(){return new s(this.x,this.y,this.dx,this.dy)}compute(t,e,i,s){if(t&&e&&i&&t.hasXAxis&&t.hasYAxis||t.throw(),!t.hasXAxis(e))throw"Graph does not contain the x axis that was used as a parameter";if(!t.hasYAxis(i))throw"Graph does not contain the x axis that was used as a parameter";return this._compute(t,e,i,s)}_compute(t,e,s,r){var a=this._relativeTo;if(a)var n=a._compute(t,e,s,r);var o,h={x:!1,y:!1};for(var l in e||(e=t.getXAxis()),s||(s=t.getYAxis()),h){var u="x"==l?e:s,d=this[l],p=this[`d${l}`];if(void 0===d&&(void 0!==p&&void 0===a||void 0===a)){if("x"==l){if(void 0===p)continue;h[l]=a?a[l]:0}else if(void 0!==this.x&&r)if(!1!==i(this.x))console.warn("You have defined x in px and not y. Makes no sense. Returning 0 for y"),h[l]=0;else try{if(!(c=r.getClosestPointToXY(this.x)))throw new Error(`Could not find y position for x = ${this.x} on serie "${r.getName()}". Returning 0 for y.`);h[l]=r.getY(c.yClosest)}catch(t){console.error(t),h[l]=0}}else void 0!==d&&(h[l]=this.getPx(d,u));if(void 0!==p){var g=void 0!==d||null==n||null==n[l]?h[l]:n[l];if("y"==l&&n&&void 0!==n.x&&null==n.y){if(!r)throw new Error("Error. No serie exists. Cannot find y value");var c;(c=r.getClosestPointToXY(a.x))&&(g=r.getY(c.yMin))}g||(g=0),!1!==(o=i(p))?h[l]=g+o:!1!==(o=this._parsePercent(p))?h[l]=g+this._getPositionPx(o,!0,u,t):u&&(h[l]=g+u.getRelPx(p))}}return h}_getPositionPx(t,e,s,r){var a;return!1!==(a=i(t))?a:!1!==(a=this._parsePercent(t))?a/100*(e?r.getDrawingWidth():r.getDrawingHeight()):s?s.getPos(t):void 0}_parsePercent(t){return!!(t&&t.indexOf&&t.indexOf("%")>-1)&&t}getDeltaPx(t,e){var s;return!1!==(s=i(t))?`${s}px`:`${e.getRelPx(t)}px`}deltaPosition(t,e,s){var r,a,n=this[t="y"==t?"y":"x"],o=this[`d${t}`];if(void 0!==n)!1!==(r=i(n))?!1!==(a=i(e))?this[t]=`${r+a}px`:this[t]=`${r+s.getRelPx(e)}px`:(n=this.getValPosition(n,s),!1!==(a=i(e))?this[t]=n+s.getRelVal(a):this[t]=n+e);else if(void 0!==o){if("y"==t&&void 0===n&&!this._relativeTo)return;!1!==(r=i(o))?!1!==(a=i(e))?this[`d${t}`]=`${r+a}px`:this[`d${t}`]=`${r+s.getRelPx(e)}px`:(o=this.getValPosition(o,s),!1!==(a=i(e))?this[`d${t}`]=o+s.getRelVal(a):this[`d${t}`]=o+e)}}getValPosition(t,e){return"max"==t?e.getMaxValue():"min"==t?e.getMinValue():"max"==t?e.getMaxValue():"min"==t?e.getMinValue():t}getPx(t,e,s){var r,a;if("function"==typeof t)return t(e,s);if(!1!==(r=i(t)))return r;if(!1!==(r=this._parsePercent(t)))return r;if(e){if("min"==t)return e.getMinPx();if("max"==t)return e.getMaxPx();if(s)return e.getRelPx(t);if(a=t,!isNaN(parseFloat(a))&&isFinite(a))return e.getPos(t)}}getPxRel(t,e){return this.getPx(t,e,!0)}relativeTo(t){return this._relativeTo=s.check(t),this}static check(t,e){if(t instanceof s)return t;var i=new s(t);if(t&&t.relativeTo){const s=e(t.relativeTo);s&&i.relativeTo(s)}return i}}var r=s;e.default=r},5936:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"SERIE_TYPE",{enumerable:!0,get:function(){return $.SERIE_TYPE}}),e.default=void 0;var s=V(i(1107)),r=V(i(8697)),a=V(i(3187)),n=V(i(9763)),o=V(i(4083)),h=V(i(606)),l=V(i(9291)),u=V(i(7645)),d=V(i(1755)),p=V(i(3312)),g=V(i(2210)),c=V(i(5096)),f=V(i(9907)),m=V(i(5718)),x=V(i(6244)),y=V(i(7328)),b=V(i(1255)),v=V(i(2663)),M=V(i(6141)),A=V(i(5737)),S=V(i(5642)),_=V(i(5731)),k=V(i(3669)),w=V(i(5886)),P=V(i(2251)),L=V(i(6025)),C=V(i(6186)),T=V(i(8644)),E=V(i(8342)),D=V(i(2941)),X=V(i(7493)),O=V(i(3172)),Y=V(i(4885)),N=V(i(8796)),I=V(i(366)),B=V(i(3175)),H=V(i(1156)),F=V(i(6010)),W=V(i(3525)),j=V(i(6901)),R=V(i(267)),z=i(1748),$=i(2513);function V(t){return t&&t.__esModule?t:{default:t}}s.default.registerConstructor("graph.position",r.default),s.default.registerConstructor("graph.axis.x",n.default),s.default.registerConstructor("graph.axis.y",o.default),s.default.registerConstructor("graph.axis.x.bar",h.default),s.default.registerConstructor("graph.axis.x.time",l.default),s.default.registerConstructor("graph.serie.line",d.default),s.default.registerConstructor("graph.serie.line.3d",p.default),s.default.registerConstructor("graph.serie.line.color",f.default),s.default.registerConstructor("graph.serie.contour",v.default),s.default.registerConstructor("graph.serie.histogram",u.default),s.default.registerConstructor("graph.serie.bar",g.default),s.default.registerConstructor("graph.serie.box",c.default),s.default.registerConstructor("graph.serie.scatter",m.default),s.default.registerConstructor("graph.serie.zone",x.default),s.default.registerConstructor("graph.serie.zone.3d",y.default),s.default.registerConstructor("graph.serie.densitymap",b.default),s.default.registerConstructor($.SERIE_TYPE.LINE,d.default),s.default.registerConstructor($.SERIE_TYPE.HISTOGRAM,u.default),s.default.registerConstructor($.SERIE_TYPE.LINE_3D,p.default),s.default.registerConstructor($.SERIE_TYPE.LINE_COLORED,f.default),s.default.registerConstructor($.SERIE_TYPE.CONTOUR,v.default),s.default.registerConstructor($.SERIE_TYPE.BAR,g.default),s.default.registerConstructor($.SERIE_TYPE.BOX,c.default),s.default.registerConstructor($.SERIE_TYPE.SCATTER,m.default),s.default.registerConstructor($.SERIE_TYPE.ZONE,x.default),s.default.registerConstructor($.SERIE_TYPE.ZONE_3D,y.default),s.default.registerConstructor($.SERIE_TYPE.DENSITY_MAP,b.default),s.default.registerConstructor("graph.plugin.shape",N.default),s.default.registerConstructor("graph.plugin.drag",Y.default),s.default.registerConstructor("graph.plugin.zoom",B.default),s.default.registerConstructor("graph.plugin.selectScatter",I.default),s.default.registerConstructor("graph.plugin.timeSerieManager",H.default),s.default.registerConstructor("graph.plugin.serielinedifference",F.default),s.default.registerConstructor("graph.plugin.serieLineDifference",F.default),s.default.registerConstructor("graph.plugin.axissplitting",W.default),s.default.registerConstructor("graph.plugin.makeTracesDifferent",j.default),s.default.registerConstructor("graph.plugin.peakPicking",R.default),s.default.registerConstructor("graph.shape",M.default),s.default.registerConstructor("graph.shape.areaundercurve",A.default),s.default.registerConstructor("graph.shape.arrow",S.default),s.default.registerConstructor("graph.shape.ellipse",_.default),s.default.registerConstructor("graph.shape.polygon",P.default),s.default.registerConstructor("graph.shape.label",k.default),s.default.registerConstructor("graph.shape.polyline",w.default),s.default.registerConstructor("graph.shape.line",L.default),s.default.registerConstructor("graph.shape.nmrintegral",C.default),s.default.registerConstructor("graph.shape.html",O.default),s.default.registerConstructor("graph.shape.peakintegration2d",T.default),s.default.registerConstructor("graph.shape.rect",E.default),s.default.registerConstructor("graph.shape.rectangle",E.default),s.default.registerConstructor("graph.shape.cross",D.default),s.default.registerConstructor("graph.shape.peakboundariescenter",X.default),s.default.registerConstructor("graph.legend",a.default),s.default.registerConstructor("graph.waveform",z.Waveform);var G=s.default;e.default=G},4167:(t,e)=>{function i(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}function s(t,e){return t._savedAttributes&&void 0!==t._savedAttributes[e]}function r(t,e){if(t&&t._savedAttributesIds){t._savedAttributesIds.splice(t._savedAttributesIds.indexOf(e),1),delete t._attributes[e];var i={};for(var s in t._savedAttributes)i[s]=t._savedAttributes[s];s=0;for(var r=t._savedAttributesIds.length;s<r;s++)for(var a in t._attributes[t._savedAttributesIds[s]])i[a]=t._attributes[t._savedAttributesIds[s]][a];for(var a in i)t.setAttribute(a,i[a])}}Object.defineProperty(e,"__esModule",{value:!0}),e.setAttributeTo=function(t,e,i){var s;if(i)for(s in e)t.setAttributeNS(i,s,e[s]);else for(s in e)t.setAttribute(s,e[s])},e.mapEventEmission=function(t,e){var i;for(var s in e||(e=this),t)0==s.indexOf("on")&&"function"==typeof t[s]&&(i=(i=s.substring(2)).substring(0,1).toLowerCase()+i.substring(1),e.on&&function(s){e.on(i,(function(){t[s].apply(e,arguments)}))}(s))},e.guid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))},e.throwError=function(t){console.error(t)},e.warn=function(t){console.warn(t)},e.isNumeric=function(t){return!Array.isArray(t)&&t-parseFloat(t)+1>=0},e.hue2rgb=i,e.hslToRgb=function(t,e,s){var r,a,n;if(0==e)r=a=n=s;else{var o=s<.5?s*(1+e):s+e-s*e,h=2*s-o;r=i(h,o,t+1/3),a=i(h,o,t),n=i(h,o,t-1/3)}return[Math.round(255*r),Math.round(255*a),Math.round(255*n)]},e.saveDomAttributes=function(t,e,i){if(t)for(var s in t._savedAttributesIds=t._savedAttributesIds||[],t._savedAttributesIds.indexOf(i)>-1&&r(t,i),t._savedAttributes=t._savedAttributes||{},t._attributes=t._attributes||{},t._attributes[i]=e,t._savedAttributesIds.push(i),e)t._savedAttributes[s]||(t._savedAttributes[s]=t.getAttribute(s)),t.setAttribute(s,e[s])},e.hasSavedAttribute=s,e.overwriteDomAttribute=function(t,e,i){s(t,e)&&(t._savedAttributes[e]=i)},e.restoreDomAttributes=r,e.debounce=function(t,e,i){var s;return function(){var r=this,a=arguments,n=function(){s=null,i||t.apply(r,a)},o=i&&!s;clearTimeout(s),s=setTimeout(n,e),o&&t.apply(r,a)}},e.SVGParser=function(t){return(new DOMParser).parseFromString(t,"image/svg+xml")},e.reverseArray=function(t){var e=null,i=null;for(e=0,i=t.length-1;e<i;e+=1,i-=1){var s=t[e];t[e]=t[i],t[i]=s}return t},e.getOffset=function(t){var e=t.getBoundingClientRect();return{top:e.top,left:e.left}},e.setCSS=function(t,e){var i=t.style;for(var s in e)i[s]=e[s]},e.ajaxGet=function(t){return new Promise((function(e,i){var s=new XMLHttpRequest;s.open(t.type||"GET",t.url,!0),t.json&&s.setRequestHeader("Accept","application/json"),s.onload=function(){if(200===s.status){var r=s.responseText;t.json&&(r=JSON.parse(r)),e(r)}else i(new Error(`Request error: ${s.status}`))},s.onerror=function(){i(new Error(`Network error: ${s.status}`))},s.send()}))},e.extend=function t(){var e,i,s,r,a,n,l=arguments[0],u=1,d=arguments.length,p=!1;for("boolean"==typeof l?(p=l,l=arguments[1]||{},u=2):("object"!=typeof l&&"function"!=typeof l||null==l)&&(l={});u<d;++u)if(null!=(e=arguments[u]))for(i in e)s=l[i],l!==(r=e[i])&&(p&&r&&(h(r)||(a=o(r)))?(a?(a=!1,n=s&&o(s)?s:[]):n=s&&h(s)?s:{},l[i]=t(p,n,r)):void 0!==r&&(l[i]=r));return l},e.mix=function(t,e){for(let i in e)e.hasOwnProperty(i)&&(t.prototype[i]=e[i])},e.emptyDom=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},e.isPlainObject=e.isArray=e.default=void 0;var a=Object.prototype.hasOwnProperty,n=Object.prototype.toString,o=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===n.call(t)};e.isArray=o;var h=function(t){if(!t||"[object Object]"!==n.call(t))return!1;var e,i=a.call(t,"constructor"),s=t.constructor&&t.constructor.prototype&&a.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!i&&!s)return!1;for(e in t);return void 0===e||a.call(t,e)};e.isPlainObject=h,e.default={}},1148:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var n=s?Object.getOwnPropertyDescriptor(t,a):null;n&&(n.get||n.set)?Object.defineProperty(i,a,n):i[a]=t[a]}return i.default=t,e&&e.set(t,i),i}(i(4167));function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}var a={makeBarY:function(t,e,i){if(t&&void 0!==i){var r=s.isNumeric(i.width)?i.width:10;return` V ${t} m -${r/2} 0 h ${r} m -${r/2} 0 V ${e} `}},makeBoxY:function(t,e,i){if(t&&void 0!==i)return` m 5 0 V ${t} h -10 V ${e} m 5 0 `},makeBarX:function(t,e,i){if(t&&void 0!==i){var r=s.isNumeric(i.width)?i.width:10;return` H ${t} m 0 -${r/2} v ${r} m 0 -${r/2} H ${e} `}},makeBoxX:function(t,e,i){if(t&&void 0!==i)return` v 5 H ${t} v -10 H ${e} v 5 `},setErrorBarStyle:function(t){return this.errorbarStyle=this._setErrorStyle(t),this},setErrorBoxStyle:function(t){return this.errorboxStyle=this._setErrorStyle(t),this},_setErrorStyle(t={}){var e=[],i=[["y","top","bottom"],["x","left","right"]],r=t=>{t.dom=document.createElementNS(this.graph.ns,"path"),t.dom.setAttribute("fill",t.fillColor||"none"),t.dom.setAttribute("stroke",t.strokeColor||"black"),t.dom.setAttribute("stroke-opacity",t.strokeOpacity||1),t.dom.setAttribute("fill-opacity",t.fillOpacity||1),t.dom.setAttribute("stroke-width",t.strokeWidth||1),this.groupMain.appendChild(t.dom)};e={},"string"==typeof t&&(t={});for(var a=0,n=i.length;a<n;a++){t.all&&(t[i[a][1]]=s.extend(!0,{},t.all),t[i[a][2]]=s.extend(!0,{},t.all)),t[i[a][0]]&&(t[i[a][1]]=s.extend(!0,{},t[i[a][0]]),t[i[a][2]]=s.extend(!0,{},t[i[a][0]]));for(var o=1;o<=2;o++)t[i[a][o]]&&(e[i[a][o]]=t[i[a][o]],r(e[i[a][o]]))}return e},errorDrawInit:function(){this.errorboxStyle&&(this.errorboxStyle.paths={top:"",bottom:"",left:"",right:""}),this.errorbarStyle&&(this.errorbarStyle.paths={top:"",bottom:"",left:"",right:""})},errorAddPoint:function(t,e,i,s,r){let a;this.errorbarStyle&&((a=this.waveform.getErrorBarXBelow(t))&&(this.errorbarStyle.paths.left+=` M ${s} ${r}`,this.errorbarStyle.paths.left+=this.makeBarX(this.getX(e-a),s,this.errorbarStyle.left)),(a=this.waveform.getErrorBarXAbove(t))&&(this.errorbarStyle.paths.right+=` M ${s} ${r}`,this.errorbarStyle.paths.right+=this.makeBarX(this.getX(e+a),s,this.errorbarStyle.right)),(a=this.waveform.getErrorBarYBelow(t))&&(this.errorbarStyle.paths.bottom+=` M ${s} ${r}`,this.errorbarStyle.paths.bottom+=this.makeBarY(this.getY(i-a),r,this.errorbarStyle.bottom)),(a=this.waveform.getErrorBarYAbove(t))&&(this.errorbarStyle.paths.top+=` M ${s} ${r}`,this.errorbarStyle.paths.top+=this.makeBarY(this.getY(i+a),r,this.errorbarStyle.top))),this.errorboxStyle&&((a=this.waveform.getErrorBoxXBelow(t))&&(this.errorboxStyle.paths.left+=` M ${s} ${r}`,this.errorboxStyle.paths.left+=this.makeBoxX(this.getX(e-a),s,this.errorboxStyle.left)),(a=this.waveform.getErrorBoxXAbove(t))&&(this.errorboxStyle.paths.right+=` M ${s} ${r}`,this.errorboxStyle.paths.right+=this.makeBoxX(this.getX(e+a),s,this.errorboxStyle.right)),(a=this.waveform.getErrorBoxYBelow(t))&&(this.errorboxStyle.paths.bottom+=` M ${s} ${r}`,this.errorboxStyle.paths.bottom+=this.makeBoxY(this.getY(i-a),r,this.errorboxStyle.bottom)),(a=this.waveform.getErrorBoxYAbove(t))&&(this.errorboxStyle.paths.top+=` M ${s} ${r}`,this.errorboxStyle.paths.top+=this.makeBoxY(this.getY(i+a),r,this.errorboxStyle.top)))},errorAddPointBarChart:function(t,e,i,s){var r;this.error&&(r=this.error[t])&&this.doErrorDraw("y",r,e,s,i,s)},errorDraw:function(){if(this.errorbarStyle)for(var t in this.errorbarStyle.paths)this.errorbarStyle[t]&&this.errorbarStyle[t].dom&&this.errorbarStyle[t].dom.setAttribute("d",this.errorbarStyle.paths[t]);if(this.errorboxStyle)for(var t in this.errorboxStyle.paths)this.errorboxStyle[t]&&this.errorboxStyle[t].dom&&this.errorboxStyle[t].dom.setAttribute("d",this.errorboxStyle.paths[t])}};e.default=a},6871:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.EventMixin=e.trigger=void 0;const i=function(t,...e){var i,s;null!==(i=this.__eventHandlers)&&void 0!==i&&i[t]&&this.__eventHandlers[t].forEach((t=>t.apply(this,e)));const r=null===(s=this.__eventHandlers)||void 0===s?void 0:s.__all;r&&r.forEach((i=>i.apply(this,[t,...e])))};e.trigger=i;const s={on(t,e){return this.__eventHandlers||(this.__eventHandlers={}),this.__eventHandlers[t]||(this.__eventHandlers[t]=[]),this.__eventHandlers[t].push(e),this},off(t,e){var i;let s=null===(i=this.__eventHandlers)||void 0===i?void 0:i[t];if(s){if(e)for(let t=0,i=s.length;t<i;t++)s[t]==e&&s.splice(t--,1);else s=[];return this}},onAll(t){return this.on("__all",t)},ofAll(t){return this.off("__all",t)},trigger(...t){return i.apply(this,t),this},emit(t,...e){return this.trigger(t,...e)}};e.EventMixin=s,e.default=t=>{Object.assign(t.prototype,s)}},5452:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=i(6871);let r=t=>Object.assign({},s.EventMixin,{trigger(e,...i){return s.trigger.call(this,e,...i),this.graph&&this.graph.trigger(t+"."+e,...i),this},emit(t,...e){return this.trigger(t,...e)}});e.default=(t,e="__")=>{Object.assign(t.prototype,r(e))}},6190:(t,e)=>{function i(t,e,i){let s,r,a,n,o,h=t.getWaveforms();for(let l of h)for(s=0,r=l.getLength(),a=l.getData();s<r;s+=1)n=e?t.getXAxis().getVal(t.getX(l.getX(s,!0))):t.getYAxis().getVal(t.getY(a[s])),o=0==s?n:i?Math.min(o,n):Math.max(o,n);return o}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={getX:function(t){return(t=this.getXAxis().getPx(t))-t%.2+this.getXAxis().getZProj(this.options.zpos)},getY:function(t){return(t=this.getYAxis().getPx(t))-t%.2+this.getYAxis().getZProj(this.options.zpos)},getZPos:function(){return this.options.zpos},getMinX:function(t){return t?i(this,!0,!0):this.minX},getMaxX:function(t){return t?i(this,!0,!1):this.maxX},getMinY:function(t){return t?i(this,!1,!0):this.minY},getMaxY:function(t){return t?i(this,!1,!1):this.maxY}};e.default=s},3525:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=d(i(1107)),r=d(i(9763)),a=d(i(4083)),n=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var a=s?Object.getOwnPropertyDescriptor(t,r):null;a&&(a.get||a.set)?Object.defineProperty(i,r,a):i[r]=t[r]}return i.default=t,e&&e.set(t,i),i}(i(4167)),o=d(i(1755)),h=d(i(5718)),l=(d(i(4349)),d(i(1530)));function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function d(t){return t&&t.__esModule?t:{default:t}}class p extends o.default{constructor(){super(...arguments),this.subSeries=[]}draw(){return this}}class g extends h.default{constructor(){super(...arguments),this.subSeries=[]}draw(){return this}getMarkerForLegend(){return!!this.subSeries[0]&&this.subSeries[0].getMarkerForLegend()}}var c=["constructor","init","draw","setLineColor","setLineWidth","setLineStyle","getLineColor","getLineWidth","getLineStyle","setMarkers","getMarkerDom","getMarkerDomIndependant","getMarkerPath","_recalculateMarkerPoints","getSymbolForLegend","_getSymbolForLegendContainer"],f=[];Object.getOwnPropertyNames(o.default.prototype).concat(f).map((function(t){var e;c.indexOf(t)>-1||(p.prototype[t]=(e=t,function(){var t=arguments;this.subSeries.map((i=>{i[e](...t)}))}))}));var m=["getSymbolForLegend"];f=["_getSymbolForLegendContainer"],Object.getOwnPropertyNames(o.default.prototype).map((function(t){var e;-1!=m.indexOf(t)&&(p.prototype[t]=(e=t,function(){var t=arguments;return this.subSeries[0][e](...t)}),g.prototype[t]=function(t){return function(){var e=arguments;return this.subSeries[0][t](...e)}}(t))})),f.map((t=>{var e;p.prototype[t]=(e=t,function(){var t=arguments;return this.subSeries[0][e](...t)}),g.prototype[t]=function(t){return function(){var e=arguments;return this.subSeries[0][t](...e)}}(t)}));class x extends l.default{constructor(t){super(...arguments),this.series=new Map}static default(){return{axes:{margins:{high:5,low:5}}}}init(t){this.graph=t}newXAxis(t){return this.newBottomAxis(t)}newYAxis(t){return this.newLeftAxis(t)}newTopAxis(t){return t=this.getOptions(t),new v(this.graph,"top",t)}newBottomAxis(t){return t=this.getOptions(t),new v(this.graph,"bottom",t)}newLeftAxis(t){return t=this.getOptions(t),new M(this.graph,"left",t)}newRightAxis(t){return t=this.getOptions(t),new M(this.graph,"right",t)}getOptions(t){var e={marginMin:this.options.axes.margins.low,marginMax:this.options.axes.margins.high};return n.extend(!0,e,t)}preDraw(){var t,e;this.series.forEach((({serie:i})=>{t=i.getXAxis(),e=i.getYAxis();let r=1;for(t.splitNumber&&(r*=t.splitNumber),e.splitNumber&&(r*=e.splitNumber);i.subSeries.length<r;){const t=`${i.getName()}_${i.subSeries.length}`,e=this.graph.newSerie(t,{},i.getType()||s.default.SERIE_LINE);e.excludedFromLegend=!0,e.styles=i.styles,e.waveform=i.waveform,i.getType()==s.default.SERIE_LINE&&(e.markerPoints=i.markerPoints,e.markerFamilies=i.markerFamilies),i.subSeries.push(e),i.postInit()}for(;i.subSeries.length>r;){let t=this.graph.getSerie(`${i.getName()}_${i.subSeries.length-1}`);t&&t.kill&&t.kill(),i.subSeries.pop()}!i.getXAxis().splitNumber&&i.getXAxis().splitAxis&&i.getXAxis().splitAxis(),!i.getYAxis().splitNumber&&i.getYAxis().splitAxis&&i.getYAxis().splitAxis(),i.subSeries.map(((e,s)=>{var r,a;if(i.getXAxis().getSubAxis){let e=s%(t.splitNumber||1);r=i.getXAxis().getSubAxis(e)}else r=i.getXAxis();if(e.setXAxis(r),i.getYAxis().getSubAxis){let e=Math.floor(s/(t.splitNumber||1));a=i.getYAxis().getSubAxis(e)}else a=i.getYAxis();e.setYAxis(a),e.draw(!0)}))}))}newSerie(t,e={},i){switch(i){case"line":return this.newLineSerie(t,e);case"scatter":return this.newScatterSerie(t,e)}throw`Cannot create a split serie of type ${i}`}newLineSerie(t,e){var i={type:"lineSerie",serie:new p(this.graph,t,e,"line")};return this.series.set(t,i),this.graph.series.push(i.serie),i.serie}newScatterSerie(t,e){var i={type:"scatterSerie",serie:new g(this.graph,t,e,"scatter")};return this.series.set(t,i),this.graph.series.push(i.serie),i.serie}}var y={splitMarks:!0},b=function(t){var e=class extends t{constructor(t,e,i={}){super(t,e,i),this.axes=[],this.position=e,this.constructorOptions=n.extend(!0,{},y,i),this._splitVal=[]}all(t){if("function"==typeof t)return this.axes.map(t),this}splitAxis(...t){t.push(1);let e=t.length;for(;this.axes.length>e;)this.axes.pop().kill(!0,!0);for(;this.axes.length<e;){let t=new(this.getConstructor())(this.graph,this.position,this.constructorOptions);this.axes.push(t),t.zoomLock=!0,t.init(this.graph,this.constructorOptions)}let i=0,s=0;for(let e of this.axes)e.options.marginMin=10,e.options.marginMax=10,0==s&&(e.options.marginMin=0),s==this.axes.length-1&&(e.options.marginMax=0),e.setSpan(i,i=t[s]),e.setMinMaxFlipped(),s++;return this._splits=t,this}fixGridIntervalBasedOnAxis(t){return this.fixGridFor=t,this.graph._axisHasChanged(),this}splitSpread(t){return this.autoSpread=!!t,this}hasAxis(t){return this.axes.indexOf(t)>-1}_splitSpread(){let t=[],e=0,i=0;for(let t of this._splitVal)e+=t[1]-t[0];for(let s of this._splitVal)t.push(i+=(s[1]-s[0])/e);t.pop(),this.splitAxis(...t)}setChunkBoundaries(t){let e,i,s=0;for(let r of this.axes)Array.isArray(t[s])&&t[s].length>1&&!e&&(e=t[s][1]-t[s][0],i=s),1!=t[s].length&&Array.isArray(t[s])?r.forceMin(t[s][0]).forceMax(t[s][1]):(r._mean=t[s],Array.isArray(r._mean)&&(r._mean=r._mean[0])),s++;return this._baseWidthVal=e,this._baseWidthIndex=i,this._splitVal=t,this.graph._axisHasChanged(),this}setMinMaxToFitSeries(){(!this._splitVal||this._splitVal.length<1)&&(super.setMinMaxToFitSeries(...arguments),this._splitVal[0]=this._splitVal[0]||[],this._splitVal[this._splitVal.length-1]=this._splitVal[this._splitVal.length-1]||[],this._splitVal[0][0]=this.getCurrentMin(),this._splitVal[this._splitVal.length-1][1]=this.getCurrentMax(),this.setChunkBoundaries(this._splitVal))}draw(){this.autoSpread&&this._splitSpread();let t,e,i,s=0;if(this._baseWidthIndex>=0&&(e=this.getSubAxis(this._baseWidthIndex))&&(i=e.getSpan()),e=void 0,this.fixGridFor>=0&&(e=this.getSubAxis(this.fixGridFor))){if(void 0!==e._mean){let t=(e.getSpan()[1]-e.getSpan()[0])/(i[1]-i[0])*this._baseWidthVal;e.forceMin(e._mean-t/2),e.forceMax(e._mean+t/2)}s=e.draw(),t=e.getPrimaryTickUnit()}return this.axes.map((r=>{if(e!==r){if(void 0!==r._mean){let t=(r.getSpan()[1]-r.getSpan()[0])/(i[1]-i[0])*this._baseWidthVal;r.forceMin(r._mean-t/2),r.forceMax(r._mean+t/2)}t&&r.forcePrimaryTickUnit(t),s=Math.max(s,r.draw())}})),this.writeUnit(),s}setMinPx(t){super.setMinPx(t);for(let e of this.axes)e.setMinPx(t)}setMaxPx(t){super.setMaxPx(t);for(let e of this.axes)e.setMaxPx(t)}setShift(){super.setShift(...arguments);for(let t of this.axes)t.setShift(...arguments)}init(){super.init(...arguments),this.splitAxis()}getAxisPosition(){var t=0;return this.axes.map((e=>{t=Math.max(t,e.getAxisPosition())})),t}getSubAxis(t){if(this.axes.length<=t)throw`Impossible to reach axis. Index ${t} is out of range`;return this.axes[t]}get splitNumber(){return this._splits.length}};return["turnGridsOff","turnGridsOn","gridsOff","gridsOn","setEngineering","setScientificScaleExponent","setScientific","setLabelColor","setSecondaryGridDasharray","setPrimaryGridDasharray","setSecondaryGridsOpacity","setPrimaryGridOpacity","setSecondaryGridWidth","setPrimaryGridWidth","setSecondaryGridColor","setPrimaryGridColor","setTicksLabelColor","setSecondaryTicksColor","setPrimaryTicksColor","setAxisColor","secondaryGridOn","secondaryGridOff","primaryGridOff","primaryGridOn","setSecondaryGrid","setPrimaryGrid","setGrids","setTickPosition","setExponentialFactor","setExponentialLabelFactor","setGridLinesStyle","forcePrimaryTickUnitMin","forcePrimaryTickUnitMax","forcePrimaryTickUnit","flip","show","hide","setDisplay"].map((t=>{var i;e.prototype[t]=(i=t,function(){return this.axes.map((t=>{t[i](...arguments)})),this})})),e};class v extends(b(r.default)){constructor(t,e,i){super(...arguments),this.topbottom=e}getConstructor(){return r.default}getAxisPosition(){var t=super.getAxisPosition(...arguments);return this.labelPosY=t,this.getLabel()&&(t+=this.graph.options.fontSize),t}drawLabel(){super.drawLabel(),this.label.setAttribute("y",(this.top?-1:1)*(this.graph.options.fontSize+this.labelPosY))}draw(){var t=super.draw(...arguments);return this.drawLabel(),t}}class M extends(b(a.default)){constructor(t,e,i){super(...arguments)}getConstructor(){return a.default}drawLabel(){super.drawLabel()}equalizePosition(t){var e=t;if(this.getLabel()&&this.axes.map((i=>{e=Math.max(i.equalizePosition(t),e)})),this.getLabel())return this.placeLabel(this.left?-e:e),e+this.graph.options.fontSize}}n.mix(v,new r.default),n.mix(M,new a.default);var A=x;e.default=A},4885:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s,r=(s=i(1530))&&s.__esModule?s:{default:s};class a extends r.default{static default(){return{dragX:!0,dragY:!0,persistanceX:!1,persistanceY:!1}}init(t){this.graph=t,this.time=null,this.totaltime=2e3}onMouseDown(t,e,i,s,r){return this._draggingX=e,this._draggingY=i,this._lastDraggingX=this._draggingX,this._lastDraggingY=this._draggingY,this.stopAnimation=!0,this.moved=!1,!0}onMouseMove(t,e,i,s,r){var a=e-this._draggingX,n=i-this._draggingY;this.options.dragX&&t._applyToAxes((function(t){t.setCurrentMin(t.getVal(t.getMinPx()-a)),t.setCurrentMax(t.getVal(t.getMaxPx()-a))}),!1,!0,!1),this.options.dragY&&t._applyToAxes((function(t){t.setCurrentMin(t.getVal(t.getMinPx()-n)),t.setCurrentMax(t.getVal(t.getMaxPx()-n))}),!1,!1,!0),this._lastDraggingX=this._draggingX,this._lastDraggingY=this._draggingY,this._draggingX=e,this._draggingY=i,this.moved=!0,this.time=Date.now(),this.emit("dragging"),t.draw(!0)}onMouseUp(t,e,i,s,r){var a=Date.now()-this.time;e!=this._lastDraggingX&&i!=this._lastDraggingY?(this.speedX=(e-this._lastDraggingX)/a,this.speedY=(i-this._lastDraggingY)/a,isNaN(this.speedX)||isNaN(this.speedY)?this.emit("dragged"):(t._applyToAxes((function(t){t._pluginDragMin=t.getCurrentMin(),t._pluginDragMax=t.getCurrentMax()}),!1,!0,!0),this.stopAnimation=!1,this.accelerationX=-this.speedX/this.totaltime,this.accelerationY=-this.speedY/this.totaltime,this.options.persistanceX||this.options.persistanceY?this._persistanceMove(t):this.emit("dragged"))):this.moved&&this.emit("dragged")}_persistanceMove(t){var e=this;e.stopAnimation?e.emit("dragged"):window.requestAnimationFrame((function(){var i=Date.now()-e.time,s=(.5*e.accelerationX*i+e.speedX)*i,r=(.5*e.accelerationY*i+e.speedY)*i;e.options.persistanceX&&t._applyToAxes((function(t){t.setCurrentMin(-t.getRelVal(s)+t._pluginDragMin),t.setCurrentMax(-t.getRelVal(s)+t._pluginDragMax),t.cacheCurrentMin(),t.cacheCurrentMax(),t.cacheInterval()}),!1,!0,!1),e.options.persistanceY&&t._applyToAxes((function(t){t.setCurrentMin(-t.getRelVal(r)+t._pluginDragMin),t.setCurrentMax(-t.getRelVal(r)+t._pluginDragMax),t.cacheCurrentMin(),t.cacheCurrentMax(),t.cacheInterval()}),!1,!1,!0),t.draw(),i<e.totaltime?(e.emit("dragging"),e._persistanceMove(t)):e.emit("dragged")}))}}var n=a;e.default=n},1530:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s,r=(s=i(5452))&&s.__esModule?s:{default:s};class a{static default(){return{}}constructor(t){this.options=Object.assign({},a.default(),this.constructor.default(),t)}init(t){this.graph=t}onMouseDown(){}onMouseUp(){}onMouseMove(){}}(0,r.default)(a,"plugin");var n=a;e.default=n},6901:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=a();if(e&&e.has(t))return e.get(t);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=s?Object.getOwnPropertyDescriptor(t,r):null;n&&(n.get||n.set)?Object.defineProperty(i,r,n):i[r]=t[r]}i.default=t,e&&e.set(t,i)}(i(4167));var s,r=(s=i(1530))&&s.__esModule?s:{default:s};function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}class n extends r.default{constructor(){super(...arguments)}init(t,e){super.init(t,e)}static default(){return{}}checkHSL(t){let e,i,s,r={};return(e=t.h||t.hue)?(e<1&&(e=Math.round(360*e)),r.hue=e):r.h=0,(i=t.s||t.saturation)?(i>1&&(i/=100),r.saturation=i):r.saturation=.75,(s=t.lightness||t.l)?(s>1&&(s/=100),r.lightness=s):r.lightness=.5,r}buildHSLString(t){return`hsl( ${Math.round(t.h)}, ${Math.round(100*t.s)}%, ${Math.round(100*t.l)}%)`}colorizeAll(t,e=!1){let i,s;if(t.serieTypes?(Array.isArray(t.serieTypes)||(t.serieTypes=[t.serieTypes]),i=this.graph.allSeries(...t.serieTypes)):i=this.graph.getSeries(),s=i.length,!t.startingColorHSL){if(!t.colorHSL)throw"No starting color was provided. There must exist either options.colorHSL or options.startingColorHSL";t.startingColorHSL=this.checkHSL(t.colorHSL)}if(t.endingColorHSL)t.endingColorHSL=Object.assign({},t.startingColorHSL,t.endingColorHSL);else switch(t.affect&&["h","s","l","hue","saturation","lightness"].include(t.affect)||(t.affect="h"),t.affect){case"h":case"hue":t.endingColorHSL={h:t.startingColorHSL.h+300,s:t.startingColorHSL.s,l:t.startingColorHSL.l};break;case"saturation":case"s":let e;e=t.startingColorHSL.s>.5?0:1,t.endingColorHSL={h:t.startingColorHSL.h,s:e,l:t.startingColorHSL.l};break;case"lightness":case"l":let i;i=t.startingColorHSL.l>.5?0:.75,t.endingColorHSL={h:t.startingColorHSL.h,s:t.startingColorHSL.s,l:i}}return i.map(((i,r)=>{if(!i.setLineColor)throw`The serie ${i.getName()} does not implement the method \`startingColor\``;let a;return a=1==s?this.buildHSLString({h:t.startingColorHSL.h,s:t.startingColorHSL.s,l:t.startingColorHSL.l}):this.buildHSLString({h:t.startingColorHSL.h+r/(s-1)*(t.endingColorHSL.h-t.startingColorHSL.h),s:t.startingColorHSL.s+r/(s-1)*(t.endingColorHSL.s-t.startingColorHSL.s),l:t.startingColorHSL.l+r/(s-1)*(t.endingColorHSL.l-t.startingColorHSL.l)}),i.setLineColor(a),"function"==typeof e&&e(r,a),a}))}}var o=n;e.default=o},267:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=a();if(e&&e.has(t))return e.get(t);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=s?Object.getOwnPropertyDescriptor(t,r):null;n&&(n.get||n.set)?Object.defineProperty(i,r,n):i[r]=t[r]}i.default=t,e&&e.set(t,i)}(i(4167));var s,r=(s=i(1530))&&s.__esModule?s:{default:s};function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}class n extends r.default{constructor(){super(...arguments)}static default(){return{autoPeakPicking:!1,autoPeakPickingNb:4,autoPeakPickingMinDistance:10,autoPeakPickingFormat:!1,autoPeakPickingAllowAllY:!1}}init(t,e){super.init(t,e),this.picks=[];for(var i=0,s=this.options.autoPeakPickingNb;i<s;i++){var r=this.graph.newShape({type:"label",label:{text:"",position:{x:0},anchor:"middle"},selectable:!0,shapeOptions:{minPosY:15}});r.draw(),this.picks.push(r)}}setSerie(t){this.serie=t,this.picks.map((t=>{t.show()}))}serieRemoved(t){this.serie==t&&this.picks.map((t=>{t.hide()}))}preDraw(){this.serie&&(this.detectedPeaks=[],this.lastYPeakPicking=!1)}postDraw(){if(!this.serie)return;let t,e=!0,i=!1,s=[],r=this.serie.getWaveform();if(!r)throw"The serie must have a waveform for the peak picking to work";let a,n=r.getLength(),o=0;for(;o<n;o++)a=r.getY(o),this.serie.options.lineToZero?s.push([r.getX(o),a]):t?a>=t[1]&&e||a<=t[1]&&i?t=[r.getX(o),a]:(a<t[1]&&e||a>t[1]&&i)&&(i?(i=!1,e=!0):(i=!0,e=!1,s.push(t),t=!1),t=[r.getX(o),a]):t=[r.getX(o),a];var h,l,u,d,p=s,g=[],c=p.length;o=0;var f=this.graph.selectedShapes.map((function(t){return t.getProp("xval")}));for(p.sort((function(t,e){return e[1]-t[1]})),d=0;o<c;o++)if(h=p[o][0],l=this.serie.getX(h),u=0,a=this.serie.getY(p[o][1]),!(l<this.serie.getXAxis().getMinPx()||l>this.serie.getXAxis().getMaxPx())&&(this.options.autoPeakPickingAllowAllY||!(a>this.serie.getYAxis().getMinPx()||a<this.serie.getYAxis().getMaxPx()))){for(;u<g.length&&!(Math.abs(g[u]-l)<this.options.autoPeakPickingMinDistance);u++);if(!(u<g.length))if(f.indexOf(h)>-1)g.push(l);else{if(!this.picks[d])return;for(this.serie.getYAxis().getPx(p[o][1])-20<0?(this.picks[d].setLabelPosition({x:h,y:"5px"}),this.picks[d].setLabelBaseline("hanging")):(this.picks[d].setLabelBaseline("no-change"),this.picks[d].setLabelPosition({x:h,y:p[o][1],dy:"-15px"})),this.picks[d].setProp("xval",h),this.options.autoPeakPickingFormat?this.picks[d].setLabelText(this.options.autoPeakPickingFormat.call(this.picks[d],h,d)):this.picks[d].setLabelText(String(Math.round(1e3*h)/1e3)),this.picks[d].makeLabels(),d++;this.picks[d]&&this.picks[d].isSelected();)d++;if(g.length==this.options.autoPeakPickingNb)break}}}hidePeakPicking(t){if(this._hidePeakPickingLocked||(this._hidePeakPickingLocked=t),this.picks)for(var e=0;e<this.picks.length;e++)this.picks[e].hide()}showPeakPicking(t){if((!this._hidePeakPickingLocked||t)&&this.picks)for(var e=0;e<this.picks.length;e++)this.picks[e].show()}killPeakPicking(){if(this.picks)for(var t=0,e=this.picks.length;t<e;t++)this.picks[t].kill()}getSerie(){return this.serie}}var o=n;e.default=o},366:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s,r=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var a=s?Object.getOwnPropertyDescriptor(t,r):null;a&&(a.get||a.set)?Object.defineProperty(i,r,a):i[r]=t[r]}return i.default=t,e&&e.set(t,i),i}(i(4167)),a=(s=i(1530))&&s.__esModule?s:{default:s};function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}class o extends a.default{constructor(){super(...arguments)}static default(){return{}}init(t,e){this._path=document.createElementNS(t.ns,"path"),r.setAttributeTo(this._path,{display:"none",fill:"rgba(0,0,0,0.1)",stroke:"rgba(0,0,0,1)","shape-rendering":"crispEdges",x:0,y:0,height:0,width:0,d:""}),this.graph=t,t.dom.appendChild(this._path)}setSerie(t){this.options.serie=t}onMouseDown(t,e,i,s,r){if(!this.options.serie)return;const a=t.getSerie(this.options.serie);this.path=`M ${e} ${i} `,this.currentX=e,this.currentY=i,this.xs=[a.getXAxis().getVal(e-t.getPaddingLeft())],this.ys=[a.getYAxis().getVal(i-t.getPaddingTop())],this._path.setAttribute("d",""),this._path.setAttribute("display","block")}onMouseMove(t,e,i,s,r){if(!this.options.serie)return;const a=t.getSerie(this.options.serie);Math.pow(e-this.currentX,2)+Math.pow(i-this.currentY,2)>25&&(this.path+=` L ${e} ${i} `,this.currentX=e,this.currentY=i,this.xs.push(a.getXAxis().getVal(e-t.getPaddingLeft())),this.ys.push(a.getYAxis().getVal(i-t.getPaddingTop())),this._path.setAttribute("d",`${this.path} z`),this.findPoints())}findPoints(){if(!this.options.serie)return;const t=this.graph.getSerie(this.options.serie);for(var e,i=t.waveform,s=[],r=0,a=0,n=i.getLength();a<n;a+=1){r=0;for(var o=0,h=this.xs.length;o<h;o+=1)e=o==h-1?0:o+1,(this.ys[o]<i.getY(a)&&this.ys[e]>i.getY(a)||this.ys[o]>i.getY(a)&&this.ys[e]<i.getY(a))&&i.getX(a)>(i.getY(a)-this.ys[o])/(this.ys[e]-this.ys[o])*(this.xs[e]-this.xs[o])+this.xs[o]&&r++;r%2==1?(s.push(a),t.selectMarker(a,!0,"selected")):t.unselectMarker(a)}this.selected=s,this.emit("selectionProcess",s)}onMouseUp(t,e,i,s){this._path.setAttribute("display","none"),this.emit("selectionEnd",this.selected)}}var h=o;e.default=h},6010:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s,r=i(1748),a=(s=i(1530))&&s.__esModule?s:{default:s};class n extends a.default{constructor(){super(...arguments)}static default(){return{positiveStyle:{fillColor:"green",fillOpacity:.2,strokeWidth:0},negativeStyle:{fillColor:"red",fillOpacity:.2,strokeWidth:0},from:0,to:0}}init(t,e){this.graph=t,this.series=[],this.pathsPositive=[],this.pathsNegative=[],this.positivePolyline=this.graph.newShape("polyline").draw(),this.positivePolyline.setFillColor(this.options.positiveStyle.fillColor).setFillOpacity(this.options.positiveStyle.fillOpacity).setStrokeWidth(this.options.positiveStyle.strokeWidth).applyStyle(),this.negativePolyline=this.graph.newShape("polyline").draw(),this.negativePolyline.setFillColor(this.options.negativeStyle.fillColor).setFillOpacity(this.options.negativeStyle.fillOpacity).setStrokeWidth(this.options.negativeStyle.strokeWidth).applyStyle()}setSeries(t,e){this.serie1=t,this.serie2=e}setBoundaries(t,e){this.options.from=t,this.options.to=e}getFrom(){return this.options.from}getTo(){return this.options.to}draw(){const t=this.serie1.getWaveform(),e=this.serie2.getWaveform(),i=t.duplicate(!0).subtract(e).add(e),s=t.duplicate(!0).subtract(t.duplicate(!0).subtract(e)),a=[];let n;var o=(t=!1)=>{(t||0!=n.wave1.length||0!=n.wave2.length)&&(n={above:void 0,wave1:[],wave2:[]},a.push(n))};o(!0);for(var h=0;h<i.getLength();h++)if(isNaN(i.getY(h))||isNaN(s.getY(h)))o();else{if(h>0&&n.wave1.length>0){if(i.getY(h)>s.getY(h)&&!n.above){const t=this.computeCrossing(i.getX(h-1),i.getY(h-1),i.getX(h),i.getY(h),s.getX(h-1),s.getY(h-1),s.getX(h),s.getY(h));n.wave1.push([t.x,t.y]),o(),n.wave1.push([t.x,t.y]),n.above=!0}if(i.getY(h)<s.getY(h)&&n.above){const t=this.computeCrossing(i.getX(h-1),i.getY(h-1),i.getX(h),i.getY(h),s.getX(h-1),s.getY(h-1),s.getX(h),s.getY(h));n.wave1.push([t.x,t.y]),o(),n.wave1.push([t.x,t.y]),n.above=!1}}0==n.wave1.length&&(n.above=i.getY(h)>s.getY(1)),n.wave1.push([i.getX(h),i.getY(h)]),n.wave2.push([s.getX(h),s.getY(h)])}this.series.forEach((t=>t.kill())),this.series=a.forEach(((t,e)=>{const i=this.graph.newSerie(`__graph_serielinedifference_${this.serie1.getName()}_${this.serie2.getName()}_${e}`),s=new r.Waveform;s.setData(t.wave1.map((t=>t[1])).concat(t.wave2.reverse().map((t=>t[1]))),t.wave1.map((t=>t[0])).concat(t.wave2.map((t=>t[0])))),t.wave1[0]&&s.append(t.wave1[0][0],t.wave1[0][1]),i.setWaveform(s),i.setXAxis(this.serie1.getXAxis()),i.setYAxis(this.serie1.getYAxis()),t.above?i.setFillColor(this.options.positiveStyle.fillColor):i.setFillColor(this.options.negativeStyle.fillColor)}))}computeCrossing(t,e,i,s,r,a,n,o){var h=(s-e)/(i-t),l=(o-a)/(n-r),u=s-h*i;if(t==i||r==n)return!1;if(h==l)return{x:t,y1:e,y2:e,y:e};var d=(u-(o-l*n))/(l-h);return!(d>i||d<t||d<r||d>n)&&{x:d,y:h*d+u}}getPositivePolyline(){return this.positivePolyline}getNegativePolyline(){return this.negativePolyline}}var o=n;e.default=o},8796:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s,r=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var a=s?Object.getOwnPropertyDescriptor(t,r):null;a&&(a.get||a.set)?Object.defineProperty(i,r,a):i[r]=t[r]}return i.default=t,e&&e.set(t,i),i}(i(4167)),a=(s=i(1530))&&s.__esModule?s:{default:s};function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}class o extends a.default{constructor(){super(...arguments)}static default(){return{}}init(t,e){super.init(t,e),this.shapeType=e.type}setShape(t){this.shapeInfo.shapeType=t}onMouseDown(t,e,i,s,a){if(!this.shapeType&&!this.options.url)return;var n,o,h=this;this.count=this.count||0,e-=t.getPaddingLeft(),i-=t.getPaddingTop();var l={position:[{x:n=t.getXAxis().getVal(e),y:o=t.getYAxis().getVal(i)},{x:n,y:o}],onChange:function(e){t.triggerEvent("onAnnotationChange",e)},locked:!1,selectable:!0,resizable:!0,movable:!0};let u=this.options.properties;if(r.extend(!0,l,this.options),this.emit("beforeNewShape",s,l),!this.graph.prevent(!1)){var d=t.newShape(l.type,l,!1,u);this.emit("createdShape",s,d),d&&(h.currentShape=d,h.currentShapeEvent=s),t.once("mouseUp",(()=>{this.currentShape||h.emit("newShape",s,d)}))}}onMouseMove(t,e,i,s){if(this.currentShape){this.count++;var r=this.currentShape;this.currentShape=!1,t.selectedSerie&&!r.serie&&r.setSerie(t.selectedSerie),r.resizing=!0,r.options&&r.options.onCreate&&r.options.onCreate.call(r),r.draw(),t.selectShape(r),r.handleMouseDown(this.currentShapeEvent,!0),r.handleSelected=this.options.handleSelected||1,r.handleMouseMove(s,!0)}}onMouseUp(){this.currentShape&&(this.currentShape.kill(),this.currentShape=!1)}}var h=o;e.default=h},1156:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=h(i(1107)),r=h(i(3426)),a=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var a=s?Object.getOwnPropertyDescriptor(t,r):null;a&&(a.get||a.set)?Object.defineProperty(i,r,a):i[r]=t[r]}return i.default=t,e&&e.set(t,i),i}(i(4167)),n=h(i(1530));function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function h(t){return t&&t.__esModule?t:{default:t}}class l extends n.default{constructor(){super(...arguments),this.series=[],this.plugins=[],this.currentSlots={},this.requestLevels=new Map,this.update=(t,e)=>{this.series.forEach((function(e){this.updateSerie(e,t)})),t||this.recalculateSeries(e)}}static default(){return{LRUName:"PluginTimeSerieManager",intervals:[1e3,15e3,6e4,9e5,36e5,864e4],maxParallelRequests:3,optimalPxPerPoint:2,nbPoints:1e3,url:""}}init(t,e){this.graph=t,r.default.create(this.options.LRUName,200),this.requestsRunning=0}setURL(t){return this.options.url=t,this}setAvailableIntervals(){this.options.intervals=arguments}newSerie(t,e,i,r,a){var n=this.graph.newSerie(t,e,i);return this.currentSlots[t]={min:0,max:0,interval:0},n.on("hide",(function(){n._zoneSerie&&n._zoneSerie.hide()})),n.on("show",(function(){n._zoneSerie&&n._zoneSerie.show()})),n.setInfo("timeSerieManagerDBElements",r),a||(n._zoneSerie=this.graph.newSerie(`${t}_zone`,{},s.default.SERIE_ZONE)),this.series.push(n),n}registerPlugin(t,e){if(this.plugins.indexOf(t)>-1)for(var i=1;i<arguments.length;i++)t.removeListener(arguments[i],this.update);for(i=1;i<arguments.length;i++)t.on(arguments[i],this.update)}updateSerie(t,e){var i,s=this,r=t.getXAxis().getCurrentMin(),a=t.getXAxis().getCurrentMax(),n=this.getOptimalInterval(a-r),o=this.options.intervals.indexOf(n);this.cleanRegister(o);for(var h=o;h<=o+1;h++){i=this.options.intervals[h];var l=s.computeSlotID(r,i),u=s.computeSlotID(a,i);[[2,5,6],[1,2,4],[0,1,3]].forEach((function(r){for(var a=l-r[0]*(u-l),o=u+r[0]*(u-l),h=a;h<=o&&!(s.computeTimeMin(h,i)>Date.now());)s.register(t,h,i,i==n?r[1]:r[2],!0,e),h++}))}this.processRequests()}cleanRegister(t){this.requestLevels&&this.requestLevels.forEach((e=>{e.forEach(((i,s)=>{i[4]<t&&e.splice(s,1)}))}))}register(t,e,i,s,a,n){var o=this.computeUniqueID(t,e,i),h=r.default.get(this.options.LRUName,o);(!h||this.computeTimeMax(e,i)>Date.now()&&h.timeout<Date.now()-(n?5e3:1e5)&&1==s)&&this.request(t,e,i,s,o,a)}request(t,e,i,s,r,a){for(var n in this.requestLevels)n!=s&&this.requestLevels[n][r]&&(1!==this.requestLevels[n][r][0]?delete this.requestLevels[n][r]:this.requestLevels[n][r][5]=s);this.requestLevels[s]&&this.requestLevels[s][r]||(this.requestLevels[s]=this.requestLevels[s]||{},this.requestLevels[s][r]=[0,r,t.getName(),e,i,s,t.getInfo("timeSerieManagerDBElements")],a||this.processRequests())}processRequests(){if(!(this.requestsRunning>=this.options.maxParallelRequests)){for(var t,e=this,i=1;;){for(var s in this.requestLevels[i])if(1!=this.requestLevels[i][s][0]){t=this.requestLevels[i][s];break}if(t)break;if(++i>10)return}this.requestsRunning++,t&&(t[0]=1,a.ajaxGet({url:this.getURL(t),method:"GET",json:!0}).done((function(a){1==a.status&&(e.requestsRunning--,delete e.requestLevels[i][s],r.default.store(e.options.LRUName,t[1],a.data),e.processRequests(),1==t[5]&&0==Object.keys(e.requestLevels[1]).length&&e.recalculateSeries(!0))})))}}computeTimeMax(t,e){return(t+1)*(e*this.options.nbPoints)}computeTimeMin(t,e){return t*(e*this.options.nbPoints)}getURL(t){var e=this.options.url.replace("<measurementid>",t[2]).replace("<from>",this.computeTimeMin(t[3],t[4])).replace("<to>",this.computeTimeMax(t[3],t[4])).replace("<interval>",t[4]),i=t[6]||{};for(var s in i)e=e.replace(`<${s}>`,i[s]);return e}getOptimalInterval(t){var e,i=(this.options.optimalPxPerPoint||1)*t/this.graph.getDrawingWidth(),s=1/0;return this.options.intervals.forEach((function(t){var r=Math.min(s,Math.abs(t-i));s!==r&&(e=t,s=r)})),e||1e3}computeUniqueID(t,e,i){var s="",r=t.getInfo("timeSerieManagerDBElements");for(var a in r)s+=`;${a}:${r[a]}`;return`${t.getName()};${e};${i}${s}`}computeSlotID(t,e){return Math.floor(t/(e*this.options.nbPoints))}computeSlotTime(t,e){return t*(e*this.options.nbPoints)}getZoneSerie(t){return t._zoneSerie}updateZoneSerie(t){var e=this.graph.getSerie(t);e&&e._zoneSerie&&(e._zoneSerie.setXAxis(e.getXAxis()),e._zoneSerie.setYAxis(e.getYAxis()),e._zoneSerie.setFillColor(e.getLineColor()),e._zoneSerie.setLineColor(e.getLineColor()),e._zoneSerie.setFillOpacity(.2),e._zoneSerie.setLineOpacity(.3))}recalculateSeries(t){var e=this;this.locked||(this.changed=!1,this.series.map((function(i){e.recalculateSerie(i,t)})),this.changed=!1,e.graph.draw())}recalculateSerie(t,e){var i=t.getXAxis().getCurrentMin(),s=t.getXAxis().getCurrentMax(),a=this.getOptimalInterval(s-i),n=this.computeSlotID(i,a),o=this.computeSlotID(s,a),h=[],l=[];if(!(!e&&a==this.currentSlots[t.getName()].interval&&this.currentSlots[t.getName()].min<=n&&this.currentSlots[t.getName()].max>=o)){n-=2,o+=2,this.currentSlots[t.getName()].min=n,this.currentSlots[t.getName()].max=o,this.currentSlots[t.getName()].interval=a;for(var u=n;u<=o;){const e=r.default.get(this.options.LRUName,this.computeUniqueID(t,u,a));e?(h=h.concat(e.data.mean),l=l.concat(e.data.minmax)):this.recalculateSerieUpwards(t,u,a,h,l),u++}this.changed=!0,t.setData(h),t._zoneSerie&&t._zoneSerie.setData(l)}}setIntervalCheck(t){this.interval&&clearInterval(this.interval),this.update(!0,!0),this.interval=setInterval((()=>{this.update(!0,!1)}),t)}recalculateSerieUpwards(t,e,i,s,a){var n=this.options.intervals.slice(0);n.sort();var o=n[n.indexOf(i)+1]||-1;if(o<0)return[];var h=this.computeSlotTime(e,i),l=this.computeSlotTime(e+1,i),u=this.computeSlotID(h,o),d=!1;const p=r.default.get(this.options.LRUName,this.computeUniqueID(t,u,o));if(p)for(var g=0,c=p.data.mean.length;g<c;g+=2)if(!(p.data.mean[g]<h)&&(!1===d&&(d=g),p.data.mean[g]>=l))return void(a=(s=s.concat(p.data.mean.slice(d,g))).concat(p.data.minmax.slice(d,g)));return this.recalculateSerieUpwards(t,u,o,s,a)}lockRedraw(){this.locked=!0}unlockRedraw(){this.locked=!1}isRedrawLocked(){return!!this.locked}}var u=l;e.default=u},3175:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s,r=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var a=s?Object.getOwnPropertyDescriptor(t,r):null;a&&(a.get||a.set)?Object.defineProperty(i,r,a):i[r]=t[r]}return i.default=t,e&&e.set(t,i),i}(i(4167)),a=(s=i(1530))&&s.__esModule?s:{default:s};function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}class o extends a.default{constructor(){super(...arguments)}static default(){return{axes:"all"}}init(t,e){this._zoomingGroup=document.createElementNS(t.ns,"g"),this._zoomingSquare=document.createElementNS(t.ns,"rect"),this._zoomingSquare.setAttribute("display","none"),r.setAttributeTo(this._zoomingSquare,{display:"none",fill:"rgba(171,12,12,0.2)",stroke:"rgba(171,12,12,1)","shape-rendering":"crispEdges",x:0,y:0,height:0,width:0,"pointer-events":"none"}),this.graph=t,t.groupEvent.appendChild(this._zoomingGroup),this._zoomingGroup.appendChild(this._zoomingSquare)}onMouseDown(t,e,i,s,r){var a=this.options.zoomMode;if(a){switch(this._zoomingMode=a,void 0===e&&(this._backedUpZoomMode=this._zoomingMode,this._zoomingMode="y",e=0),void 0===i&&(this._backedUpZoomMode=this._zoomingMode,this._zoomingMode="x",i=0),this._zoomingXStart=e,this._zoomingYStart=i,this.x1=e-t.getPaddingLeft(),this.y1=i-t.getPaddingTop(),this._zoomingSquare.setAttribute("width",0),this._zoomingSquare.setAttribute("height",0),this._zoomingSquare.setAttribute("display","block"),this._zoomingMode){case"x":this._zoomingSquare.setAttribute("y",t.options.paddingTop),this._zoomingSquare.setAttribute("height",t.getDrawingHeight()-t.shift.bottom);break;case"y":this._zoomingSquare.setAttribute("x",t.options.paddingLeft),this._zoomingSquare.setAttribute("width",t.getDrawingWidth());break;case"forceY2":this.y2=t.getYAxis().getPx(this.options.forcedY)+t.options.paddingTop}this.options.onZoomStart&&!r&&this.options.onZoomStart(t,e,i,s,r)}}onMouseMove(t,e,i,s,r){switch(this._zoomingMode){case"xy":this._zoomingSquare.setAttribute("x",Math.min(this._zoomingXStart,e)),this._zoomingSquare.setAttribute("y",Math.min(this._zoomingYStart,i)),this._zoomingSquare.setAttribute("width",Math.abs(this._zoomingXStart-e)),this._zoomingSquare.setAttribute("height",Math.abs(this._zoomingYStart-i));break;case"forceY2":this._zoomingSquare.setAttribute("y",Math.min(this._zoomingYStart,this.y2)),this._zoomingSquare.setAttribute("height",Math.abs(this._zoomingYStart-this.y2)),this._zoomingSquare.setAttribute("x",Math.min(this._zoomingXStart,e)),this._zoomingSquare.setAttribute("width",Math.abs(this._zoomingXStart-e));break;case"x":this._zoomingSquare.setAttribute("x",Math.min(this._zoomingXStart,e)),this._zoomingSquare.setAttribute("width",Math.abs(this._zoomingXStart-e));break;case"y":this._zoomingSquare.setAttribute("y",Math.min(this._zoomingYStart,i)),this._zoomingSquare.setAttribute("height",Math.abs(this._zoomingYStart-i))}this.options.onZoomMove&&!r&&this.options.onZoomMove(t,e,i,s,r)}onMouseUp(t,e,i,s,r){var a=this;this.removeZone();var n=e-t.options.paddingLeft,o=i-t.options.paddingTop;if(this.emit("beforeZoom",{graph:t,x:e,y:i,e:s,mute:r}),!t.prevent(!1)&&!(e-this._zoomingXStart==0&&"y"!=this._zoomingMode||i-this._zoomingYStart==0&&"x"!=this._zoomingMode))if(this.options.transition||this.options.smooth){let t=!1,e=!1;"x"!=this._zoomingMode&&"xy"!=this._zoomingMode&&"forceY2"!=this._zoomingMode||(this.fullX=!1,this.toAxes((function(t){t._pluginZoomMin=t.getCurrentMin(),t._pluginZoomMax=t.getCurrentMax(),t._pluginZoomMinFinal=Math.min(t.getVal(n),t.getVal(a.x1)),t._pluginZoomMaxFinal=Math.max(t.getVal(n),t.getVal(a.x1))}),!1,!0,!1),t=!0),"y"!=this._zoomingMode&&"xy"!=this._zoomingMode||(this.fullY=!1,this.toAxes((function(t){t._pluginZoomMin=t.getCurrentMin(),t._pluginZoomMax=t.getCurrentMax(),t._pluginZoomMinFinal=Math.min(t.getVal(o),t.getVal(a.y1)),t._pluginZoomMaxFinal=Math.max(t.getVal(o),t.getVal(a.y1))}),!1,!1,!0),e=!0),"forceY2"==this._zoomingMode&&(this.fullY=!1,this.toAxes((function(t){t._pluginZoomMin=t.getCurrentMin(),t._pluginZoomMax=t.getCurrentMax(),t._pluginZoomMinFinal=Math.min(t.getVal(a.y2),t.getVal(a.y1)),t._pluginZoomMaxFinal=Math.max(t.getVal(a.y2),t.getVal(a.y1))}),!1,!1,!0),e=!0),this.transition(t,e,"zoomEnd")}else{switch(this._zoomingMode){case"x":this.fullX=!1,this.toAxes("_doZoom",[n,this.x1],!0,!1);break;case"y":this.fullY=!1,this.toAxes("_doZoom",[o,this.y1],!1,!0);break;case"xy":this.fullX=!1,this.fullY=!1,this.toAxes("_doZoom",[n,this.x1],!0,!1),this.toAxes("_doZoom",[o,this.y1],!1,!0);break;case"forceY2":this.fullX=!1,this.fullY=!1,this.toAxes("_doZoom",[n,this.x1],!0,!1),this.toAxes("_doZoom",[this.y1,this.y2],!1,!0)}t.draw(),this._backedUpZoomMode&&(this._zoomingMode=this._backedUpZoomMode),this.emit("zoomed"),t.pluginYieldActiveState()}}removeZone(){this._zoomingSquare.setAttribute("display","none")}onMouseWheel(t,e,i,s,r){r||(r={}),r.baseline||(r.baseline=0);let a=r.baseline;"mousePosition"==r.baseline&&(a=this.graph.getYAxis().getVal(s));var n="x"==r.direction,o=!("y"!==r.direction);this.toAxes("handleMouseWheel",[t,e,a],n,o),this.graph.drawSeries()}onDblClick(t,e,i,s,r){var a=this.graph;if(this.emit("beforeDblClick",{graph:a,x:t,y:e,pref:s,e:i,mute:r}),!a.prevent(!1)){if(this.options.transition||this.options.smooth){var n=!1,o=!1;let t,e;return"xtotal"!=s.mode&&"total"!=s.mode||(this.toAxes((function(t){t._pluginZoomMin=t.getCurrentMin(),t._pluginZoomMax=t.getCurrentMax(),t._pluginZoomMinFinal=t.getDefaultMin(),t._pluginZoomMaxFinal=t.getDefaultMax()}),!1,!0,!1),n=!0),"ytotal"!=s.mode&&"total"!=s.mode||(this.toAxes((function(t){t._pluginZoomMin=t.getCurrentMin(),t._pluginZoomMax=t.getCurrentMax(),t._pluginZoomMinFinal=t.getDefaultMin(),t._pluginZoomMaxFinal=t.getDefaultMax()}),!1,!1,!0),o=!0),"gradualX"!=s.mode&&"gradualY"!=s.mode&&"gradual"!=s.mode&&"gradualXY"!=s.mode||(t=!1,e=!1,"gradualX"!=s.mode&&"gradual"!=s.mode&&"gradualXY"!=s.mode||(t=!0,n=!0),"gradualY"!=s.mode&&"gradual"!=s.mode&&"gradualXY"!=s.mode||(e=!0,o=!0),this.toAxes((function(t){t._pluginZoomMin=t.getCurrentMin(),t._pluginZoomMax=t.getCurrentMax(),t._pluginZoomMinFinal=t.getCurrentMin()-(t.getCurrentMax()-t.getCurrentMin()),t._pluginZoomMaxFinal=t.getCurrentMax()+(t.getCurrentMax()-t.getCurrentMin())}),!1,t,e)),void this.transition(n,o,"dblClick")}var h=this.graph.getXAxis(),l=this.graph.getYAxis();if("xtotal"==s.mode)this.toAxes("setMinMaxToFitSeries",null,!0,!1),this.fullX=!0,this.fullY=!1;else if("ytotal"==s.mode)this.toAxes("setMinMaxToFitSeries",null,!1,!0),this.fullX=!1,this.fullY=!0;else if("total"==s.mode)this.toAxes("setMinMaxToFitSeries",null,!0,!0),this.fullX=!0,this.fullY=!0;else{t-=this.graph.options.paddingLeft,e-=this.graph.options.paddingTop;var u=h.getCurrentMin(),d=h.getCurrentMax(),p=h.getVal(t),g=d-u,c=l.getCurrentMin(),f=l.getCurrentMax(),m=l.getVal(e),x=f-c;if("gradualXY"==s.mode||"gradualX"==s.mode){var y=(p-u)/(d-u);u=Math.max(h.getMinValue()-h.getInterval()*h.options.axisDataSpacing.min,u-g*y),d=Math.min(h.getMaxValue()+h.getInterval()*h.options.axisDataSpacing.max,d+g*(1-y)),h.setCurrentMin(u),h.setCurrentMax(d),h.options.onZoom&&h.options.onZoom(u,d),h.cacheCurrentMin(),h.cacheCurrentMax(),h.cacheInterval()}"gradualXY"!=s.mode&&"gradualY"!=s.mode||(y=(m-c)/(f-c),c=Math.max(l.getMinValue()-l.getInterval()*l.options.axisDataSpacing.min,c-x*y),f=Math.min(l.getMaxValue()+l.getInterval()*l.options.axisDataSpacing.max,f+x*(1-y)),l.setCurrentMin(c),l.setCurrentMax(f),l.options.onZoom&&l.options.onZoom(c,f),l.cacheCurrentMin(),l.cacheCurrentMax(),l.cacheInterval())}a.pluginYieldActiveState(),this.graph.draw()}}transition(t,e,i){var s=this,r=500;s.gradualUnzoomStart||(s.gradualUnzoomStart=Date.now()),window.requestAnimationFrame((function(){var a=Date.now()-s.gradualUnzoomStart;a>r&&(a=r);var n=Math.sin(a/r*Math.PI/2);s.toAxes((function(t){t.setCurrentMin(t._pluginZoomMin+(t._pluginZoomMinFinal-t._pluginZoomMin)*n),t.setCurrentMax(t._pluginZoomMax+(t._pluginZoomMaxFinal-t._pluginZoomMax)*n),t.cacheCurrentMin(),t.cacheCurrentMax(),t.cacheInterval()}),!1,t,e),s.graph.draw(),a<r?(s.transition(t,e,i),s.emit("zooming")):(s.emit("zoomed"),s.graph.pluginYieldActiveState(),i&&s.emit(i),s.gradualUnzoomStart=0)}))}isFullX(){return this.fullX}isFullY(){return this.fullY}toAxes(t,e,i,s){var r=this.options.axes;switch(r&&("serieSelected"!=r||this.graph.getSelectedSerie())||(r="all"),r){case"all":this.graph._applyToAxes.apply(this.graph,arguments);break;case"serieSelected":var a=this.graph.getSelectedSerie();a&&(i&&("string"==typeof t?a.getXAxis()[t].apply(a.getXAxis(),e):t.apply(a.getXAxis(),e)),s&&("string"==typeof t?a.getYAxis()[t].apply(a.getYAxis(),e):t.apply(a.getYAxis(),e)));break;default:Array.isArray(r)||(r=[r]);for(let a of r)(a.isX()&&i||a.isY()&&s)&&("string"==typeof t?a[t].apply(a,e):t.apply(a,e))}}}var h=o;e.default=h},7568:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=(t,e,i,s)=>{if(e.type){e.properties.label&&(Array.isArray(e.properties.label)||(e.properties.label=[e.properties.label]),e.properties.label.forEach(((t,i)=>{for(let s in t){let r=`label${s.charAt(0).toUpperCase()}${s.slice(1)}`;e.properties[r]||(e.properties[r]=[]),e.properties[r][i]=t[s]}})));const r=t.newShape(e.type,{},!1,e.properties);e.serie&&r.setSerie(e.serie),i&&r.setSerie(i),e.layer&&r.setLayer(e.layer),e.xAxis&&r.setXAxis(s[e.xAxis]),e.yAxis&&r.setYAxis(s[e.yAxis]),r.draw(),r.redraw()}}},2166:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const i=(t,e,i,s,r)=>{Array.isArray(s)||(s=[s]),s.forEach((s=>{let a;"x"==i?i="bottom":"y"==i&&(i="left"),"bottom"==i||"top"==i?(a="graph.axis.x","category"==s.type?a+=".bar":"time"==s.type&&(a+=".time")):a="graph.axis.y";var n=new(t.getConstructor(a))(e,i);n.init(e,s),"bottom"==i?e.setBottomAxis(n,e.getNumAxes("bottom")):"top"==i?e.setTopAxis(n,e.getNumAxes("top")):"left"==i?e.setLeftAxis(n,e.getNumAxes("left")):"right"==i&&e.setRightAxis(n,e.getNumAxes("right")),"category"==s.type&&(n.categories=s.categories),s.name&&(r[name]=n)}))};e.default=(t,e,s)=>{const r=[];s.x&&i(t,e,"x",s.x,r),s.y&&i(t,e,"y",s.y,r),s.top&&i(t,e,"top",s.top,r),s.left&&i(t,e,"left",s.left,r),s.bottom&&i(t,e,"bottom",s.bottom,r),s.right&&i(t,e,"right",s.right,r)}},7635:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i(5579)),r=n(i(2166)),a=n(i(7568));function n(t){return t&&t.__esModule?t:{default:t}}e.default=(t,e,i)=>{let n=[];if(e.resize(i.width||400,i.height||300),i.axes&&(0,r.default)(t,e,i.axes),i.legend){const t={};i.legend.seriesHideable&&(t.isSerieHideable=!0),i.legend.seriesSelectable&&(t.isSerieSelectable=!0);const s=e.makeLegend(t);if(i.legend.position)switch(i.legend.position){case"bottom":s.setAutoPosition("bottom");break;case"top":s.setAutoPosition("top");break;case"left":s.setAutoPosition("left");break;case"right":s.setAutoPosition("right");break;default:s.setPosition(i.legend.position)}}i.series&&(Array.isArray(i.series)||(i.series=[i.series]),i.series.forEach(((i,r)=>{let o,h;switch(i.type){case"scatter":o=t.SERIE_SCATTER;break;case"bar":o=t.SERIE_BAR;break;case"box":o=t.SERIE_BOX;break;case"color":o=t.SERIE_LINE_COLORED;break;case"line":default:o=t.SERIE_LINE}switch(i.type){case"bar":h=t.newWaveformHash(),i.data.errors?h.setData(i.data.values):h.setData(i.data);break;default:case"line":case"scatter":h=t.newWaveform(),h.setData(i.data.y,i.data.x)}i.data.errors&&(i.data.errors.xBar&&h.setErrorBarX(i.data.errors.xBar),i.data.errors.xBarAbove&&h.setErrorBarXAbove(i.data.errors.xBarAbove),i.data.errors.xBarBelow&&h.setErrorBarXBelow(i.data.errors.xBarBelow),i.data.errors.yBar&&h.setErrorBar(i.data.errors.yBar),i.data.errors.yBarAbove&&h.setErrorBarAbove(i.data.errors.yBarAbove),i.data.errors.yBarBelow&&h.setErrorBarBelow(i.data.errors.yBarBelow),i.data.errors.xBox&&h.setErrorBoxX(i.data.errors.xBox),i.data.errors.xBoxAbove&&h.setErrorBoxXAbove(i.data.errors.xBoxAbove),i.data.errors.xBoxBelow&&h.setErrorBoxXBelow(i.data.errors.xBoxBelow),i.data.errors.yBox&&h.setErrorBox(i.data.errors.yBox),i.data.errors.yBoxAbove&&h.setErrorBoxAbove(i.data.errors.yBoxAbove),i.data.errors.yBoxBelow&&h.setErrorBoxBelow(i.data.errors.yBoxBelow));const l=e.newSerie(i.name||`_serie_${r}`,i.options||{},o);switch(i.type){case"color":i.data.color&&l.setColors(i.data.color)}l.autoAxis(),i.excludeFromLegend&&l.excludeFromLegend(!0),h.xAxis&&n[h.xAxis]&&l.setXAxis(n[h.xAxis]),h.yAxis&&n[h.yAxis]&&l.setYAxis(n[h.yAxis]),h&&l.setWaveform(h),i.style&&(0,s.default)(t,l,i,o),i.annotations&&i.annotations.forEach((t=>{(0,a.default)(e,t,l,n)}))}))),i.annotations&&i.annotations.forEach((t=>{(0,a.default)(e,t,void 0,n)}))}},7035:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s,r=(s=i(7635))&&s.__esModule?s:{default:s};e.default=t=>{t.fromJSON=(e,i,s)=>{const a=e.options||{},n=new t(void 0,a);return(0,r.default)(t,n,e,i),n.setWrapper(i),s&&n.onAll((function(t,...e){s(t,...e)})),n},t.prototype.setJSON=(e,i={})=>{(void 0).killSeries();const s={};i.keepState&&(void 0)._applyToAxes((t=>{t.options.name&&(s[t.options.name]={min:t.getCurrentMin(),max:t.getCurrentMax()})}),void 0,!0,!0),(void 0)._applyToAxes((t=>{(void 0).killAxis(t,!0,!0)}),void 0,!0,!0),(void 0).killLegend(),(void 0).killShapes(),(0,r.default)(t,void 0,e),i.keepState&&(void 0)._applyToAxes((t=>{t.options.name&&s[t.options.name]&&(t.setCurrentMin(s[t.options.name].min),t.setCurrentMax(s[t.options.name].max))}),void 0,!0,!0),(void 0).draw()}}},5579:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=(t,e,i,s)=>{let r=i.style;Array.isArray(r)||(r=[{name:"unselected",style:r}]),r.map((({name:i,style:r},a)=>{!r.line||s!=t.SERIE_LINE&&s!=t.SERIE_BAR&&s!=t.SERIE_LINE_COLORED||(r.line.color&&s!=t.SERIE_LINE_COLORED&&e.setLineColor(r.line.color,i),r.line.width&&e.setLineWidth(r.line.width,i),(r.line.dash||r.line.style)&&e.setLineStyle(r.line.dash||r.line.style,i),r.line.fill&&e.setFillColor(r.line.fill,i),r.line.fillOpacity&&e.setFillOpacity&&e.setFillOpacity(r.line.fillOpacity,i)),r.errorBar&&e.setErrorBarStyle(r.errorBar),r.errorBox&&e.setErrorBoxStyle(r.errorBox),!r.marker||s!=t.SERIE_LINE&&s!=t.SERIE_SCATTER||((t,e,i)=>{t.showMarkers();let s={},r=[];e.default?(s=e.default,e.modifiers&&(r=e.modifiers)):(s=e,r=[]),t.setMarkerStyle(s,r,i)})(e,r.marker,i)}))}},2210:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=a();if(e&&e.has(t))return e.get(t);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=s?Object.getOwnPropertyDescriptor(t,r):null;n&&(n.get||n.set)?Object.defineProperty(i,r,n):i[r]=t[r]}i.default=t,e&&e.set(t,i)}(i(4167)),r(i(1148));var s=r(i(1755));function r(t){return t&&t.__esModule?t:{default:t}}function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}class n extends s.default{constructor(t,e,i){super(...arguments),this.pathDom=document.createElementNS(this.graph.ns,"path"),this.groupMain.appendChild(this.pathDom),this.styles={},this.styles.unselected={lineColor:this.options.lineColor,lineStyle:this.options.lineStyle,lineWidth:this.options.lineWidth,fillColor:this.options.fillColor,fillOpacity:this.options.fillOpacity,markers:this.options.markers}}setFillColor(t,e,i){return e=e||"unselected",this.styles[e]=this.styles[e]||{},this.styles[e].fillColor=t,i&&this.setFillColor(t,"selected"),this.styleHasChanged(e),this}getFillColor(t){return this.getStyle(t).fillColor}setFillOpacity(t,e,i){return e=e||"unselected",this.styles[e]=this.styles[e]||{},this.styles[e].fillOpacity=t,i&&this.setLineWidth(t,"selected"),this.styleHasChanged(e),this}getFillOpacity(t){return this.getStyle(t).fillOpacity||1}applyLineStyles(){this.applyLineStyle(this.pathDom)}applyLineStyle(t){t.setAttribute("stroke",this.getLineColor()),t.setAttribute("stroke-width",this.getLineWidth()),this.getLineDashArray()?t.setAttribute("stroke-dasharray",this.getLineDashArray()):t.removeAttribute("stroke-dasharray"),t.setAttribute("fill",this.getFillColor()),t.setAttribute("fill-opacity",this.getFillOpacity()||1)}draw(){var t="";this.hasErrors()&&this.errorDrawInit();for(var e=0;e<this.waveform.getLength();e++)if(this.categoryIndices[this.waveform.getX(e)]&&(t+=`M ${this.getXAxis().getPos(this.categoryIndices[this.waveform.getX(e)])} ${this.getYAxis().getPos(this.getYAxis().getCurrentMin())} V ${this.getYAxis().getPos(this.waveform.getY(e))} h ${this.getXAxis().getDeltaPx(1/this.nbCategories)} V ${this.getYAxis().getPos(this.getYAxis().getCurrentMin())}`,this.hasErrors())){var i=this.getXAxis().getPos(this.categoryIndices[this.waveform.getX(e)])+this.getXAxis().getDeltaPx(1/this.nbCategories)/2,s=this.getYAxis().getPos(this.waveform.getY(e));this.errorAddPoint(e,this.waveform.getX(e),this.waveform.getY(e),i,s)}this.hasErrors()&&this.errorDraw(),this.pathDom.setAttribute("d",t),this.applyLineStyles()}setMarkers(){}getUsedCategories(){return this.waveform.xdata}}var o=n;e.default=o},5096:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s,r=i(4167),a=(s=i(7245))&&s.__esModule?s:{default:s};const n={orientation:"y",maxBoxWidth:20,defaultStyle:{meanLineColor:"rgb( 100, 0, 0 )",meanLineWidth:2,boxAboveLineWidth:1,boxAboveLineColor:"rgb( 0, 0, 0 )",boxAboveFillColor:"transparent",boxAboveFillOpacity:1,boxBelowLineWidth:1,boxBelowLineColor:"rgb( 0, 0, 0 )",boxBelowFillColor:"transparent",boxBelowFillOpacity:1,barAboveLineColor:"rgba( 0, 0, 0, 1 )",barAboveLineWidth:1,barBelowLineColor:"rgba( 0, 0, 0, 1 )",barBelowLineWidth:1,outlierLineWidth:1,outlierLineColor:"rgb( 255, 255, 255 )",outlierFillColor:"rgb( 0, 0, 0 )",outlierFillOpacity:1}};class o extends a.default{constructor(t,e,i,s={}){super(t,e,i,(0,r.extend)(!0,{},n,s)),this.pathDom=document.createElementNS(this.graph.ns,"path"),this.groupMain.appendChild(this.pathDom),this.styles={},this.styles.unselected=this.options.defaultStyle}setData(t,e){if(this.data=t,!Array.isArray(t))return;let i,s,a,n,o;for(var h in"y"==this.options.orientation?(i=this.getXAxis(),s=this.getYAxis(),a=this._checkX.bind(this),n=this._checkY.bind(this),o=!0,this.minY=t[0].Q2,this.maxY=t[0].Q2,this.maxX=t[0].x,this.minX=t[0].x):(i=this.getYAxis(),s=this.getXAxis(),a=this._checkY.bind(this),n=this._checkX.bind(this),o=!1,this.minX=t[0].Q2,this.maxX=t[0].Q2,this.maxY=t[0].y,this.minY=t[0].y),e&&(a=function(){},n=function(){}),i&&s||(0,r.throwError)("Error in setting data of the box serie. The X and Y axes must be set beforehand"),this.data)o?(a(this.data[h].x),this.data[h].pos=this.data[h].x):(a(this.data[h].y),this.data[h].pos=this.data[h].y),this.data[h].Q3&&n(this.data[h].Q3),this.data[h].Q1&&n(this.data[h].Q1),this.data[h].whiskers?Array.isArray(this.data[h].whiskers)?(this.data[h].whiskers.length>0&&n(this.data[h].whiskers[0]),this.data[h].whiskers.length>1&&n(this.data[h].whiskers[1])):(n(this.data[h].whiskers),this.data[h].whiskers=[this.data[h].whiskers]):this.data[h].whiskers=[],Array.isArray(this.data[h].outliers)?this.data[h].outliers.map((t=>n(t))):this.data[h].outliers=[];return this.dataHasChanged(),this.graph.updateDataMinMaxAxes(),this}_style(t,e,i="unselected",s=!1){return this.styles[i]=this.styles[i]||{},this.styles[i][t]=e,s&&this._set(t,e,"selected"),this.styleHasChanged(i),this}_gstyle(t,e){return this.getStyle(e)[t]}getStyle(t="unselected"){return this.styles[t]||{}}setMeanLineColor(){return this._style("meanLineColor",...arguments)}getMeanLineColor(){return this._gstyle("meanLineColor",...arguments)}setStyle(t,e="unselected"){this.styles[e]=(0,r.extend)({},this.default().defaultStyle,this.styles.unselected,t),this.styleHasChanged(e)}setMeanLineWidth(){return this._style("meanLineWidth",...arguments)}getMeanLineWidth(){return this._gstyle("meanLineWidth",...arguments)}setBoxAboveLineColor(){return this._style("boxAboveLineColor",...arguments)}getBoxAboveLineColor(){return this._gstyle("boxAboveLineColor",...arguments)}setBoxBelowLineColor(){return this._style("boxBelowLineColor",...arguments)}getBoxBelowLineColor(){return this._gstyle("boxBelowLineColor",...arguments)}setBoxAboveLineWidth(){return this._style("boxAboveLineWidth",...arguments)}getBoxAboveLineWidth(){return this._gstyle("boxAboveLineWidth",...arguments)}setBoxBelowLineWidth(){return this._style("boxBelowLineWidth",...arguments)}getBoxBelowLineWidth(){return this._gstyle("boxBelowLineWidth",...arguments)}setBoxAboveFillColor(){return this._style("boxAboveFillColor",...arguments)}getBoxAboveFillColor(){return this._gstyle("boxAboveFillColor",...arguments)}setBoxBelowFillColor(){return this._style("boxBelowFillColor",...arguments)}getBoxBelowFillColor(){return this._gstyle("boxBelowFillColor",...arguments)}setBoxAboveFillOpacity(){return this._style("boxAboveFillOpacity",...arguments)}getBoxAboveFillOpacity(){return this._gstyle("boxAboveFillOpacity",...arguments)}setBoxBelowFillOpacity(){return this._style("boxBelowFillOpacity",...arguments)}getBoxBelowFillOpacity(){return this._gstyle("boxBelowFillOpacity",...arguments)}setBarAboveLineColor(){return this._style("barAboveLineColor",...arguments)}getBarAboveLineColor(){return this._gstyle("barAboveLineColor",...arguments)}setBarBelowLineColor(){return this._style("barBelowLineColor",...arguments)}getBarBelowLineColor(){return this._gstyle("barBelowLineColor",...arguments)}setBarAboveLineWidth(){return this._style("barAboveLineWidth",...arguments)}getBarAboveLineWidth(){return this._gstyle("barAboveLineWidth",...arguments)}setBarBelowLineWidth(){return this._style("barBelowLineWidth",...arguments)}getBarBelowLineWidth(){return this._gstyle("barBelowLineWidth",...arguments)}setOutlierLineColor(){return this._style("outlierLineColor",...arguments)}getOutlierLineColor(){return this._gstyle("outlierLineColor",...arguments)}setOutlierLineWidth(){return this._style("outlierLineWidth",...arguments)}getOutlierLineWidth(){return this._gstyle("outlierLineWidth",...arguments)}setOutlierFillColor(){return this._style("outlierFillColor",...arguments)}getOutlierFillColor(){return this._gstyle("outlierFillColor",...arguments)}setOutlierFillOpacity(){return this._style("outlierFillOpacity",...arguments)}getOutlierFillOpacity(){return this._gstyle("outlierFillOpacity",...arguments)}applyLineStyles(){this.applyLineStyle(this.pathDom)}applyLineStyle(t){t.setAttribute("stroke",this.getLineColor()),t.setAttribute("stroke-width",this.getLineWidth()),t.removeAttribute("stroke-dasharray"),t.setAttribute("fill",this.getFillColor()),t.setAttribute("fill-opacity",this.getFillOpacity()||1)}draw(){if(!this.data)return;let t,e,i,s,a,n,o,h,l="y"==this.options.orientation?this.getYAxis():this.getXAxis(),u="y"==this.options.orientation?this.getXAxis():this.getYAxis(),d=!1;if((0,r.emptyDom)(this.groupMain),"category"==u.getType())e=u.getRelPx(.8/this.nbCategories),!0;else{e=this.options.maxBoxWidth;for(var p=0,g=this.data.length;p<g-1;p++)e=Math.max(5,Math.min(e,Math.abs(u.getPx(this.data[p+1].x)-u.getPx(this.data[p].x))))}for(p=0,g=this.data.length;p<g;p++){if("category"==u.getType()){let i="y"==this.options.orientation?this.data[p].x:this.data[p].y;if(this.categoryIndices.hasOwnProperty(i))t=[u.getPos(this.categoryIndices[i])+1.2*e/2];else if(Array.isArray(this._linkedToScatterSeries))for(let s of this._linkedToScatterSeries)if(s.categoryIndices.hasOwnProperty(i)){t=[u.getPos(s.categoryIndices[i])+1.2*e/2],l="y"==this.options.orientation?s.getYAxis():s.getXAxis();break}}else t=[u.getPos("y"==this.options.orientation?this.data[p].x:this.data[p].y),e];i=l.getPos(this.data[p].Q2),s=l.getPos(this.data[p].Q3),a=l.getPos(this.data[p].Q1),this.data[p].whiskers.map((t=>{t<this.data[p].Q1?o=l.getPos(t):n=l.getPos(t)})),h=this.data[p].outliers.map((t=>l.getPos(t)));var c=document.createElementNS(this.graph.ns,"line");this.applyMeanStyle(c);var f=document.createElementNS(this.graph.ns,"rect"),m=document.createElementNS(this.graph.ns,"rect");"y"==this.options.orientation?(f.setAttribute("width",e),f.setAttribute("x",t[0]-e/2),m.setAttribute("width",e),m.setAttribute("x",t[0]-e/2),c.setAttribute("x1",t[0]-e/2),c.setAttribute("x2",t[0]+e/2),c.setAttribute("y1",i),c.setAttribute("y2",i)):(f.setAttribute("height",e),f.setAttribute("y",t[0]-e/2),m.setAttribute("height",e),m.setAttribute("y",t[0]-e/2),c.setAttribute("y1",t[0]-e/2),c.setAttribute("y2",t[0]+e/2),c.setAttribute("x1",i),c.setAttribute("x2",i)),this.boxPos(f,i,s,"x"==this.options.orientation),this.boxPos(m,i,a,"x"==this.options.orientation),this.applyBoxStyle(f,m);var x=document.createElementNS(this.graph.ns,"line"),y=document.createElementNS(this.graph.ns,"line");"y"==this.options.orientation?(void 0!==n&&(x.setAttribute("y1",s),x.setAttribute("y2",n),x.setAttribute("x1",t[0]),x.setAttribute("x2",t[0])),void 0!==o&&(y.setAttribute("y1",a),y.setAttribute("y2",o),y.setAttribute("x1",t[0]),y.setAttribute("x2",t[0]))):(void 0!==n&&(x.setAttribute("x1",s),x.setAttribute("x2",n),x.setAttribute("y1",t[0]),x.setAttribute("y2",t[0])),void 0!==o&&(y.setAttribute("x1",a),y.setAttribute("x2",o),y.setAttribute("y1",t[0]),y.setAttribute("y2",t[0]))),h.map((e=>{let i=document.createElementNS(this.graph.ns,"circle");i.setAttribute("r",2),"y"==this.options.orientation?(i.setAttribute("cx",t[0]),i.setAttribute("cy",e)):(i.setAttribute("cy",t[0]),i.setAttribute("cx",e)),this.setOutlierStyle(i),this.groupMain.appendChild(i)})),void 0!==n&&this.groupMain.appendChild(x),void 0!==o&&this.groupMain.appendChild(y),void 0!==s&&this.groupMain.appendChild(f),void 0!==a&&this.groupMain.appendChild(m),this.groupMain.appendChild(c),this.applyWhiskerStyle(x,y)}}applyBoxStyle(t,e){t.setAttribute("stroke",this.getBoxAboveLineColor()),t.setAttribute("stroke-width",this.getBoxAboveLineWidth()),void 0!==this.getBoxAboveFillColor()&&t.setAttribute("fill",this.getBoxAboveFillColor()),void 0!==this.getBoxAboveFillOpacity()&&t.setAttribute("fill-opacity",this.getBoxAboveFillOpacity()),e.setAttribute("stroke",this.getBoxBelowLineColor()),e.setAttribute("stroke-width",this.getBoxBelowLineWidth()),void 0!==this.getBoxBelowFillColor()&&e.setAttribute("fill",this.getBoxBelowFillColor()),void 0!==this.getBoxAboveFillOpacity()&&e.setAttribute("fill-opacity",this.getBoxBelowFillOpacity())}applyWhiskerStyle(t,e){t.setAttribute("stroke",this.getBarAboveLineColor()),t.setAttribute("stroke-width",this.getBarAboveLineWidth()),e.setAttribute("stroke",this.getBarBelowLineColor()),e.setAttribute("stroke-width",this.getBarBelowLineWidth())}applyMeanStyle(t){t.setAttribute("stroke",this.getMeanLineColor()),t.setAttribute("stroke-width",this.getMeanLineWidth())}setOutlierStyle(t){t.setAttribute("stroke",this.getOutlierLineColor()),t.setAttribute("stroke-width",this.getOutlierLineWidth()),void 0!==this.getBoxBelowFillColor()&&t.setAttribute("fill",this.getOutlierFillColor()),void 0!==this.getBoxAboveFillOpacity()&&t.setAttribute("fill-opacity",this.getOutlierFillOpacity())}getCategoryIndex(t){if(!this.categories)throw new Error("No categories were defined. Probably axis.setSeries was not called");for(var e=0;e<this.categories.length;e++)if(this.categories[e].name==t)return e;return!1}setMarkers(){}boxPos(t,e,i,s){e>i?(t.setAttribute(s?"x":"y",i),t.setAttribute(s?"width":"height",e-i)):(t.setAttribute(s?"x":"y",e),t.setAttribute(s?"width":"height",i-e))}getUsedCategories(){let t="y"==this.options.orientation?"x":"y",e=this.data.map((e=>e[t]));return Array.isArray(this._linkedToScatterSeries)&&this._linkedToScatterSeries.map((t=>{t.getUsedCategories().map((t=>{let i;(i=e.indexOf(t))>-1&&e.splice(i,1)}))})),e}linkToScatterSerie(...t){this._linkedToScatterSeries=t}}var h=o;e.default=h},2663:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s,r=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var a=s?Object.getOwnPropertyDescriptor(t,r):null;a&&(a.get||a.set)?Object.defineProperty(i,r,a):i[r]=t[r]}return i.default=t,e&&e.set(t,i),i}(i(4167)),a=(s=i(1755))&&s.__esModule?s:{default:s};function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}class o extends a.default{constructor(t,e,i){super(...arguments),this.negativeDelta=0,this.positiveDelta=0,this.negativeThreshold=0,this.positiveThreshold=0,this.groupMain.setAttribute("clip-path",`url(#_clipplot${t._creation})`)}setData(t,e,i){i=i||"float";var s,r,a,n,o=t.length,h=[];for(t instanceof Array||"object"==typeof t&&(this.minX=t.minX,this.minY=t.minY,this.maxX=t.maxX,this.maxY=t.maxY,o=(t=t.segments).length),s=0;s<o;s++){for(a=t[s].lines.length,n=this._addData(i,a),r=0;r<a;r+=2)n[r]=t[s].lines[r],this._checkX(n[r]),n[r+1]=t[s].lines[r+1],this._checkY(n[r+1]);h.push({lines:n,zValue:t[s].zValue})}return this.data=h,this.graph.updateDataMinMaxAxes(),this.dataHasChanged(!0),this}draw(t){if(t||this.hasDataChanged()){this.currentLine=0;var e,i,s,r,a,n,o,h=0,l=this.data.length,u=0;this.minZ=1/0,this.maxZ=-1/0;var d=this.groupLines.nextSibling;this.groupMain.removeChild(this.groupLines),this.zValues={};var p=0,g=1;this.getFlip()&&(p=0,g=1);var c=this.getYAxis().getCurrentMin(),f=this.getXAxis().getCurrentMin(),m=this.getXAxis().getCurrentMax(),x=this.getYAxis().getCurrentMax();for(this.counter=0,this.currentLineId=0;h<l;h++){for(this.currentLine="",u=0,a=(o=this.data[h].lines).length;u<a;u+=4)o[u+p]<f&&o[u+2+p]<f||o[u+g]<c&&o[u+2+g]<c||o[u+g]>x&&o[u+2+g]>x||o[u+p]>m&&o[u+2+p]>m||(s=this.getX(o[u+p]),r=this.getY(o[u+g]),e=this.getX(o[u+2+p]),i=this.getY(o[u+2+g]),e==s&&i==r||(this.currentLine+="M ",this.currentLine+=s,this.currentLine+=" ",this.currentLine+=r,this.currentLine+="L ",this.currentLine+=e,this.currentLine+=" ",this.currentLine+=i,this.counter++));this.currentLine+=" z",(n=this._createLine()).setAttribute("data-zvalue",this.data[h].zValue),this.zValues[this.data[h].zValue]={dom:n},this.minZ=Math.min(this.minZ,this.data[h].zValue),this.maxZ=Math.max(this.maxZ,this.data[h].zValue)}for(h++,h=this.currentLine+1;h<this.lines.length;h++)this.groupLines.removeChild(this.lines[h]),this.lines.splice(h,1);for(h=0;h<l;h++)this.setColorTo(this.lines[h],this.data[h].zValue,this.minZ,this.maxZ);this.onMouseWheel(0,{shiftKey:!1}),this.groupMain.insertBefore(this.groupLines,d)}else if(this.hasStyleChanged(this.selectionType))for(;h<l;h++)this.setColorTo(this.lines[h],this.data[h].zValue,this.minZ,this.maxZ)}onMouseWheel(t,e,i,s){for(var r in t/=250,void 0!==i?(s||(this.negativeThreshold=-i*this.minZ,this.negativeDelta=-Math.pow(Math.abs(this.negativeThreshold/-this.minZ),1/3)),s&&(this.positiveThreshold=i*this.maxZ,this.positiveDelta=Math.pow(this.positiveThreshold/this.maxZ,1/3))):e.shiftKey&&this.options.hasNegative?(this.negativeDelta=Math.min(0,Math.max(-1,this.negativeDelta+Math.min(.1,Math.max(-.1,t)))),this.negativeThreshold=-this.minZ*Math.pow(this.negativeDelta,3)):(this.positiveDelta=Math.min(1,Math.max(0,this.positiveDelta+Math.min(.1,Math.max(-.1,t)))),this.positiveThreshold=this.maxZ*Math.pow(this.positiveDelta,3)),isNaN(this.positiveDelta)&&(this.positiveDelta=0),isNaN(this.negativeDelta)&&(this.negativeDelta=0),this.zValues)this.zValues[r].dom.setAttribute("display",r>=0&&r>=this.positiveThreshold||r<=0&&r<=this.negativeThreshold?"block":"none");this._shapeZoom&&(this.options.hasNegative?(this._shapeZoom.setHandleNeg(-Math.pow(this.negativeDelta,3),this.minZ),this._shapeZoom.showHandleNeg()):this._shapeZoom.hideHandleNeg(),this._shapeZoom.setHandlePos(Math.pow(this.positiveDelta,3),this.maxZ))}handleMouseMove(t,e,i){var s=t||this.getXAxis().getMouseVal(),r=i||this.getYAxis().getMouseVal();return{trueX:s,interpolatedY:r,xClosest:s,yClosest:r}}setDynamicColor(t){this.lineColors=t,this.styleHasChanged()}setNegative(t){this.options.hasNegative=t,t&&(this.negativeThreshold=0)}setColorTo(t,e,i,s){if(this.lineColors){var a={h:0,s:0,l:0};for(var n in a)a[n]=e>0?this.lineColors.fromPositive[n]+(this.lineColors.toPositive[n]-this.lineColors.fromPositive[n])*(e/s):this.lineColors.fromNegative[n]+(this.lineColors.toNegative[n]-this.lineColors.fromNegative[n])*(e/i);a.h/=360;var o=r.hslToRgb(a.h,a.s,a.l);t.setAttribute("stroke",`rgb(${o.join()})`)}}getSymbolForLegend(){if(!this.lineForLegend){var t=document.createElementNS(this.graph.ns,"ellipse");t.setAttribute("cx",7),t.setAttribute("cy",0),t.setAttribute("rx",8),t.setAttribute("ry",3),t.setAttribute("cursor","pointer"),this.lineForLegend=t}return this.applyLineStyle(this.lineForLegend,this.maxZ),this.lineForLegend}applyLineStyle(t,e){t.setAttribute("stroke",this.getLineColor()),t.setAttribute("stroke-width",this.getLineWidth()+(this.isSelected()?2:0)),this.getLineDashArray()&&t.setAttribute("stroke-dasharray",this.getLineDashArray()),t.setAttribute("fill","none"),this.setColorTo(t,void 0!==e?e:t.getAttribute("data-zvalue"),this.minZ,this.maxZ),this.hasStyleChanged(!1)}setShapeZoom(t){this._shapeZoom=t}}var h=o;e.default=h},1255:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s,r=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var a=s?Object.getOwnPropertyDescriptor(t,r):null;a&&(a.get||a.set)?Object.defineProperty(i,r,a):i[r]=t[r]}return i.default=t,e&&e.set(t,i),i}(i(4167)),a=(s=i(7245))&&s.__esModule?s:{default:s};function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}class o extends a.default{constructor(t,e,i){super(...arguments),r.mapEventEmission(this.options,this),this.rects=[],this.paths=[],this.recalculateBinsOnDraw=!1}setData(t){this.minX=this.maxX=this.minY=this.maxY=0;var e=0,i=t.length;for(this.data=t,this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY,e=0;e<i;e++)this._checkX(t[e][0]),this._checkY(t[e][1]);return this.dataHasChanged(),this.graph.updateDataMinMaxAxes(),this}calculateDensity(t,e,i,s,r,a){var n,o,h,l=[],u=this.data.length,d=Number.POSITIVE_INFINITY,p=Number.NEGATIVE_INFINITY;for(n=0;n<u;n++)o=~~((this.data[n][0]-t)/e),h=~~((this.data[n][1]-s)/r),o>i||h>a||o<0||h<0||(l[o]=l[o]||[],l[o][h]=l[o][h]+1||1,d=l[o][h]<d?l[o][h]:d,p=l[o][h]>p?l[o][h]:p);return this.maxIndexX=i,this.maxIndexY=a,this.binMin=d,this.binMax=p,this.deltaX=e,this.deltaY=r,this.fromX=t,this.fromY=s,this.numX=i,this.numY=a,this.densitymap=l,l}setDensityMap(t,e,i,s,r){var a,n,o=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY;for(a=0;a<t.length;a++)for(n=0;n<t[a].length;n++)o=t[a][n]<o?t[a][n]:o,h=t[a][n]>h?t[a][n]:h;return this.maxIndexX=t.length,this.maxIndexY=t[0].length,this.binMin=o,this.binMax=h,this.deltaX=i,this.deltaY=r,this.fromX=e,this.fromY=s,this.numX=this.maxIndexX,this.numY=this.maxIndexY,this.densitymap=t,t}calculateDensityWeighted(t,e,i,s,r,a){var n,o,h,l,u,d,p,g,c,f,m,x=[],y=this.data.length,b=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY;for(n=0;n<y;n++)d=(this.data[n][0]-t)/e-.5,p=(this.data[n][1]-s)/r-.5,g=o=Math.floor(d),f=h=Math.floor(p),c=o+1,m=h+1,l=1-(d-o),u=1-(p-h),o>i||h>a||o<0||h<0||(x[g]=x[g]||[],x[c]=x[c]||[],x[g][f]=x[g][f]||0,x[c][f]=x[c][f]||0,x[g][m]=x[g][m]||0,x[c][m]=x[c][m]||0,x[g][f]+=l*u,x[c][f]+=(1-l)*u,x[g][m]+=l*(1-u),x[c][m]+=(1-l)*(1-u),b=x[g][f]<b?x[g][f]:b,v=x[g][f]>v?x[g][f]:v,b=x[c][f]<b?x[c][f]:b,v=x[c][f]>v?x[c][f]:v,b=x[g][m]<b?x[g][m]:b,v=x[g][m]>v?x[g][m]:v,b=x[c][m]<b?x[c][m]:b,v=x[c][m]>v?x[c][m]:v);return this.maxIndexX=i,this.maxIndexY=a,this.binMin=b,this.binMax=v,this.deltaX=e,this.deltaY=r,this.fromX=t,this.fromY=s,this.numX=i,this.numY=a,this.densitymap=x,x}autoBins(t,e){return this.numX=t||400,this.numY=e||this.numX,this.calculateDensity(this.minX,(this.maxX-this.minX)/t,t,this.minY,(this.maxY-this.minY)/e,e),this.recalculateBinsOnDraw=!1,this}setPxPerBin(t,e,i){return t&&this.calculationDensityMap({from:"min",to:"max",pxPerBin:t,weighted:i}),e&&this.calculationDensityMap(!1,{from:"min",to:"max",pxPerBin:e,weighted:i}),this}setBinsFromTo(t,e,i,s){return this.densityMapCalculation=this.densityMapCalculation||{},this.densityMapCalculation[t]={from:e,to:i,numBins:s},this.calculationDensityMap(),this}calculationDensityMap(t,e){this.method=this.calculateDensityAdvanced,this.densityMapCalculation=this.densityMapCalculation||{},t&&(this.densityMapCalculation.x=t),e&&(this.densityMapCalculation.y=e)}calculateDensityAdvanced(){var t={x:{from:0,num:0,delta:0,weighing:!1},y:{from:0,num:0,delta:0,weighing:!1}},e={x:this.graph.drawingSpaceWidth,y:this.graph.drawingSpaceHeight},i={x:this.getXAxis,y:this.getYAxis},s=!1;for(var r in this.densityMapCalculation)if(this.densityMapCalculation[r].weighted&&(s=!0,t[r].weighing=!0),this.densityMapCalculation[r].pxPerBin){var a="min"==this.densityMapCalculation[r].from?i[r].call(this).getCurrentMin():this.densityMapCalculation[r].from,n="max"==this.densityMapCalculation[r].to?i[r].call(this).getCurrentMax():this.densityMapCalculation[r].to,o=Math.abs(i[r].call(this).getRelPx(n-a));t[r].num=Math.ceil(e[r]/this.densityMapCalculation[r].pxPerBin),t[r].from=a-Math.abs(i[r].call(this).getRelVal((t[r].num*this.densityMapCalculation[r].pxPerBin-o)/2)),t[r].delta=Math.abs(i[r].call(this).getRelVal(this.densityMapCalculation[r].pxPerBin))}else t[r].num=this.densityMapCalculation[r].numBins||400,t[r].from="min"==this.densityMapCalculation[r].from?i[r].call(this).getCurrentMin():this.densityMapCalculation[r].from,t[r].delta=this.densityMapCalculation[r].to?(("max"==this.densityMapCalculation[r].to?i[r].call(this).getCurrentMax():this.densityMapCalculation[r].to)-t[r].from)/t[r].num:this.densityMapCalculate[r].delta;(s?this.calculateDensityWeighted:this.calculateDensity).call(this,t.x.from,t.x.delta,t.x.num,t.y.from,t.y.delta,t.y.num)}setColorMapBinBoundaries(t,e,i){return this.colorMapMin=t,this.colorMapMax=e,i||(this.callbackColorMapMinMax="manual"),this}autoColorMapBinBoundaries(){return this.colorMapMin=this.binMin,this.colorMapMax=this.binMax,this}onRedrawColorMapBinBoundaries(t){return this.callbackColorMapMinMax=t,this}colorMapHSL(t,e,i){i=i||"linear";for(var s,r,a={exp:function(t){return(Math.exp(t/e*1)-Math.exp(0))/(Math.exp(1)-Math.exp(0))},log:function(t){return(Math.log(t+1)-Math.log(1))/(Math.log(e+1)-Math.log(1))},linear:function(t){return(t-0)/(e-0)}},n=0,o=[],h=[],l={h:null,s:null,l:null,a:null},u=t.length-1,d=0;d<=e;d++){for(var p in s=a[i](d),(r=Math.floor(s*u))==t.length-1&&(r=u-1),s=(s-r/u)/(1/u),l)l[p]=(t[r+1][p]-t[r][p])*s+t[r][p];o[n]=`hsl(${l.h}, ${Math.round(100*l.s)}%, ${Math.round(100*l.l)}%)`,h[n]=l.a,n++}return this.opacities=h,this.colorMap=o,this.colorMapNum=e,this}autoColorMapHSL(t,e="linear"){return this.colorMapHSL(t,100,e),this}getColorIndex(t){return Math.max(0,Math.min(this.colorMapNum,Math.floor((t-this.colorMapMin)/(this.colorMapMax-this.colorMapMin)*this.colorMapNum)))}draw(){var t;if(this.method&&this.method(),this.callbackColorMapMinMax&&null!=this.colorMapMin&&null!=this.colorMapMax&&"auto"!=this.callbackColorMapMinMax){if("function"==typeof this.callbackColorMapMinMax){var e=this.callbackColorMapMinMax(this.binMin,this.binMax);this.setColorMapBinBoundaries(e[0],e[1],!0)}}else this.autoColorMapBinBoundaries();for(var i=this.getXAxis().getRelPx(this.deltaX),s=this.getYAxis().getRelPx(this.deltaY),r=0;r<this.paths.length;r++)this.paths[r]="";for(r=0;r<this.maxIndexX;r++)for(var a=0;a<this.maxIndexY;a++)null!=this.densitymap[r]&&null!=this.densitymap[r][a]&&(t=this.getColorIndex(this.densitymap[r][a]),this.paths[t]||(this.paths[t]=""),this.paths[t]+=` M ${this.getXAxis().getPx(r*this.deltaX+this.fromX)} ${this.getYAxis().getPx(a*this.deltaY+this.fromY)} h ${i} v ${s} h -${i} z`);this.drawRects()}drawRects(){for(var t=0;t<this.paths.length;t++)this.rects[t]||(this.rects[t]=document.createElementNS(this.graph.ns,"path"),this.rects[t].setAttribute("shape-rendering","crispEdges")),void 0!==this.paths[t]&&(this.rects[t].setAttribute("d",this.paths[t]),this.rects[t].setAttribute("fill",this.colorMap[t]),this.rects[t].setAttribute("fill-opacity",this.opacities[t])),this.groupMain.appendChild(this.rects[t])}setOptions(t){return this.options=r.extend(!0,{},this.defaults(),t||{}),this}}var h=o;e.default=h},7645:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s,r=i(2513),a=i(1107),n=(s=i(1755))&&s.__esModule?s:{default:s},o=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=h();if(e&&e.has(t))return e.get(t);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var a=s?Object.getOwnPropertyDescriptor(t,r):null;a&&(a.get||a.set)?Object.defineProperty(i,r,a):i[r]=t[r]}return i.default=t,e&&e.set(t,i),i}(i(4167));function h(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return h=function(){return t},t}function l(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class u extends n.default{constructor(t,e,i){super(t,e,i),l(this,"options",void 0),l(this,"_histForLegend",void 0),l(this,"_histogramWaveform",void 0),this.init(),this.extendStyle({histogram:this.options.histogramStyle},"unselected",null)}init(){this.options=this.extendLineOptions(this.options),o.mapEventEmission(this.options,this)}getType(){return r.SERIE_TYPE.HISTOGRAM}applyStyle(){this.applyHistogramStyles(),super.applyStyle()}applyHistogramStyles(){this.applyLineStyles();for(var t=0;t<this.lines.length;t++)this.applyHistogramStyle(this.lines[t])}applyHistogramStyle(t){this.getFillColor()?t.setAttribute("fill",this.getFillColor()):t.setAttribute("fill","none"),t.setAttribute("fill-opacity",this.getFillOpacity())}getSymbolForLegend(){const t=this.symbolLegendContainer;if(this._histForLegend)this.applyLineStyle(this._histForLegend);else{var e=document.createElementNS(a.ns,"polyline");this.applyLineStyle(e),e.setAttribute("d","M 5 -5 v 10 h 5 v -10"),e.setAttribute("cursor","pointer"),this._histForLegend=e,t.appendChild(this._histForLegend)}return super.getSymbolForLegend(),this._histForLegend}drawInit(t){try{this.axisCheck()}catch(t){return console.warn(t),!1}if(!this.waveform)throw"No waveform for this serie"}draw(t){if(t||this.hasDataChanged()){this._calculateHistogram(this.getXAxis().firstTick,this.getXAxis().lastTick,this.getXAxis()._secondaryTickIncrement);try{this._createLine();for(let t=0;t<this._histogramWaveform.getLength();t++)this._addHistogramPoint(this._histogramWaveform.getX(t),this._histogramWaveform.getY(t),this.getXAxis()._secondaryTickIncrement)}catch(t){}this.removeExtraLines()}this.hasStyleChanged(this.getActiveStyle())&&(this.computeActiveStyle(),this.updateStyle()),this.dataHasChanged(!1),super.afterDraw()}dataHasChanged(t){return super.dataHasChanged(t),this.waveform&&this.getXAxis()&&this._calculateHistogram(this.waveform.getMinY(),this.waveform.getMaxY(),(this.waveform.getMaxY()-this.waveform.getMinY())/20),this}_calculateHistogram(t,e,i){try{this._histogramWaveform=this.waveform.calculateHistogram(t,e,i),this.minX=this.waveform.getMinY(),this.maxX=this.waveform.getMaxY(),this.minY=0,this.maxY=this._histogramWaveform.getMax()}catch(t){console.warn("Could not calculate histogram")}}_addHistogramPoint(t,e,i){let s=this.getX(t),r=this.getX(t+i),a=this.getY(e),n=this.getY(0);isNaN(n)||s==s&&a==a&&r==r&&n==n&&(0==this.counter&&(this.currentLine=""),this.counter++,this.currentLine+=`M ${s} ${n} V ${a} H ${r} V ${n} z`)}updateStyle(){this.applyHistogramStyles(),this.setLegendSymbolStyle(),this.styleHasChanged(!1)}getRawHistogramStyle(t="unselected"){let e=this.getRawStyle(t);return e.histogram||(e.histogram={}),e.histogram}setFillColor(t,e,i=!1){return this.getRawHistogramStyle(e).fillColor=t,i&&this.setFillColor(t,"selected"),this.styleHasChanged(e),this}getFillColor(){var t;return null===(t=this.getComputedStyle().histogram)||void 0===t?void 0:t.fillColor}setFillOpacity(t,e,i=!1){return this.getRawHistogramStyle(e).fillOpacity=t,i&&this.setFillOpacity(t,"selected"),this.styleHasChanged(e),this}getFillOpacity(){var t;return null===(t=this.getComputedStyle().histogram)||void 0===t?void 0:t.fillOpacity}}var d=u;e.default=d},3312:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=o(i(6190)),r=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var a=s?Object.getOwnPropertyDescriptor(t,r):null;a&&(a.get||a.set)?Object.defineProperty(i,r,a):i[r]=t[r]}return i.default=t,e&&e.set(t,i),i}(i(4167)),a=o(i(1755));function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function o(t){return t&&t.__esModule?t:{default:t}}class h extends a.default{static defaults(){return{zpos:0}}constructor(t,e,i){super(...arguments)}setZPos(t){return this.options.zpos=t,this}setz(){return this.setZPos(...arguments)}}r.mix(h,s.default);var l=h;e.default=l},9907:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=a();if(e&&e.has(t))return e.get(t);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=s?Object.getOwnPropertyDescriptor(t,r):null;n&&(n.get||n.set)?Object.defineProperty(i,r,n):i[r]=t[r]}i.default=t,e&&e.set(t,i)}(i(4167)),r(i(1148));var s=r(i(1755));function r(t){return t&&t.__esModule?t:{default:t}}function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}class n extends s.default{constructor(t,e,i){super(...arguments),this.lines=this.lines||{}}setColors(t){this.colors=t}_draw(){var t,e,i,s,r,a,n=this,o=(this._dataToUse,this.getWaveform()),h=!1,l=!1,u=this.getXAxis(),d=this.getYAxis(),p=u.getCurrentMin(),g=d.getCurrentMin(),c=u.getCurrentMax(),f=d.getCurrentMax(),m=!1;this.eraseLines(),this.isFlipped(),this.currentLine="";let{i:x,l:y}=this._getIterativeBounds(o,p,c);for(;x<y;x+=1){if(t=this.waveform.getX(x),e=this.waveform.getY(x),t<p&&h<p||t>c&&h>c||(e<g&&l<g||e>f&&l>f)&&!this.options.lineToZero){h=t,l=e,m=!0;continue}if(this.counter2=x,r=this.getX(t),a=this.getY(e),r==i&&a==s)continue;if(isNaN(r)||isNaN(a)){this.counter;continue}var b=this.colors[x];let n=this.isPointOutside(t,e,p,c,g,f);if(this.options.lineToZero){if(n=t<p||t>c,n)continue}else if(n||m){if(!1!==h&&!1!==l||m){let o=this.calculateAxisCrossing(t,e,h,l,p,c,g,f);o.length>0&&(n?m?2==o.length&&this._addPoint(this.getX(o[0][0]),this.getY(o[0][1]),o[0][0],o[0][1],this.getX(o[1][0]),this.getY(o[1][1]),o[1][0],o[1][1],x-1,b,!1,!1,!1):this._addPoint(this.getX(o[0][0]),this.getY(o[0][1]),o[0][0],o[0][1],i,s,h,l,x-1,b,!1,!1,!1):this._addPoint(this.getX(o[0][0]),this.getY(o[0][1]),o[0][0],o[0][1],r,a,h,l,x-1,b,!1,!1,!1))}else i=r,s=a,h=t,l=e;i=r,s=a,h=t,l=e,m=n;continue}this._addPoint(r,a,t,e,i,s,h,l,x,b,!1,!0),i=r,s=a,h=t,l=e}if(this.latchLines(),this._tracker){this._trackerDom&&this._trackerDom.remove();var v=this.groupLines.cloneNode(!0);for(this.groupMain.appendChild(v),x=0,y=v.children.length;x<y;x++)v.children[x].setAttribute("stroke","transparent"),v.children[x].setAttribute("stroke-width","25px"),v.children[x].setAttribute("pointer-events","stroke");n._trackerDom=v,n.groupMain.addEventListener("mousemove",(function(t){var e=n.graph._getXY(t),i=n.handleMouseMove(!1,!1);n._trackingCallback(n,i,e.x,e.y)})),n.groupMain.addEventListener("mouseleave",(function(t){n._trackingOutCallback(n)}))}return this}_addPoint(t,e,i,s,r,a,n,o,h,l,u,d){if(void 0!==r&&void 0!==a&&!isNaN(t)&&!isNaN(e)){l._rgb&&(l=`rgba(${l._rgb[0]},${l._rgb[1]},${l._rgb[2]},${l._rgb[3]||1})`);var p=this.lines[l];p||((p=this.lines[l]={object:document.createElementNS(this.graph.ns,"path"),path:"",color:l}).object.setAttribute("stroke",l),p.color=l,this.applyLineStyle(p.object),this.groupLines.appendChild(p.object)),p.path+=`M ${r} ${a} L ${t} ${e}`,this.hasErrors()&&this.errorAddPoint(h,i,s,t,e)}}removeExtraLines(){}latchLines(){for(var t in this.lines)this.lines[t].object.setAttribute("d",this.lines[t].path)}eraseLines(){for(var t in this.lines)this.lines[t].path="",this.lines[t].object.setAttribute("d","")}getSymbolForLegend(){let t=super.getSymbolForLegend();if(this._getSymbolForLegendContainer(),!this.defined){let e=document.createElementNS(this.graph.ns,"linearGradient");e.setAttribute("id","gradient_serie_"+this.getName()),e.setAttribute("x1","0px"),e.setAttribute("x2","30px"),e.setAttribute("y1","-px"),e.setAttribute("y2","1px"),e.setAttribute("gradientUnits","userSpaceOnUse");let i=document.createElementNS(this.graph.ns,"stop");i.setAttribute("offset","0"),i.setAttribute("stop-color","#FF0000");let s=document.createElementNS(this.graph.ns,"stop");s.setAttribute("offset","1"),s.setAttribute("stop-color","#000000"),e.appendChild(i),e.appendChild(s),this.graph.defs.appendChild(e),this.defined=!0,t.setAttribute("stroke",`url(#gradient_serie_${this.getName()})`)}return t}applyLineStyle(t){t.setAttribute("stroke-width",this.getLineWidth()),this.getLineDashArray()?t.setAttribute("stroke-dasharray",this.getLineDashArray()):t.removeAttribute("stroke-dasharray"),t.setAttribute("fill","none")}}var o=n;e.default=o},1755:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Dasharray=void 0;var s=i(5936),r=i(1107),a=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=l();if(e&&e.has(t))return e.get(t);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var a=s?Object.getOwnPropertyDescriptor(t,r):null;a&&(a.get||a.set)?Object.defineProperty(i,r,a):i[r]=t[r]}return i.default=t,e&&e.set(t,i),i}(i(4167)),n=h(i(1148)),o=h(i(5718));function h(t){return t&&t.__esModule?t:{default:t}}function l(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return l=function(){return t},t}function u(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}let d;e.Dasharray=d,function(t){t[t.PLAIN=0]="PLAIN",t[t.DOTTED=1]="DOTTED",t[t.DASHED_SM=2]="DASHED_SM",t[t.DASHED=3]="DASHED",t[t.DASHED_LG=4]="DASHED_LG",t[t.DASHED_XL=5]="DASHED_XL",t[t.DASHED_SM_INTV_LG=6]="DASHED_SM_INTV_LG",t[t.DASHED_LG_INTV_SM=7]="DASHED_LG_INTV_SM",t[t.DASHED_SM_INTV_XL=8]="DASHED_SM_INTV_XL",t[t.DASHED_XL_INTV_SM=9]="DASHED_XL_INTV_SM",t[t.DASHED_INTV_ALT=10]="DASHED_INTV_ALT",t[t.DASHED_DOTTED=11]="DASHED_DOTTED"}(d||(e.Dasharray=d={}));const p={markers:!1,lineStyle:{color:"black",style:d.PLAIN,width:1},trackMouse:!1,lineToZero:!1,selectableOnClick:!1,overflowX:!1,overflowY:!1};class g extends o.default{constructor(t,e,i){super(t,e,i),u(this,"options",void 0),u(this,"_lineForLegend",void 0),u(this,"_degradationPx",void 0),u(this,"currentLine",""),u(this,"counter",0),u(this,"lines",void 0),this.init(),this.extendStyle({line:{color:this.options.lineStyle.color,style:this.options.lineStyle.style,width:this.options.lineStyle.width}},"unselected",null),this.extendStyle({line:{width:3}},"selected","unselected"),this.activateStyle("unselected"),this.computeActiveStyle(),this.data=[],this._isMinOrMax={x:{min:!1,max:!1},y:{min:!1,max:!1}},this.groupLines=document.createElementNS(r.ns,"g"),this.domMarker=document.createElementNS(r.ns,"path"),this.domMarker.style?this.domMarker.style.cursor="pointer":this.domMarker.style={cursor:"pointer"},this.additionalData={},this.marker=document.createElementNS(r.ns,"circle"),this.marker.setAttribute("fill","black"),this.marker.setAttribute("r",3),this.marker.setAttribute("display","none"),this.markerLabel=document.createElementNS(r.ns,"text"),this.markerLabelSquare=document.createElementNS(r.ns,"rect"),this.markerLabelSquare.setAttribute("fill","white"),this.domMarkerHover={},this.domMarkerSelect={},this.markerHovered=0,this.groupMarkerSelected=document.createElementNS(r.ns,"g"),this.markerPoints={},this.lines=[],this.groupMain.appendChild(this.groupLines),this.groupMain.appendChild(this.marker),this.groupMain.appendChild(this.groupMarkerSelected),this.groupMain.appendChild(this.markerLabelSquare),this.groupMain.appendChild(this.markerLabel),this.independantMarkers=[],this.initExtended1&&this.initExtended1(),this.groupLines.addEventListener("click",(t=>{this.options.selectableOnClick&&(this.isSelected()?this.graph.unselectSerie(this):this.graph.selectSerie(this))}))}init(){this.options=this.extendLineOptions(this.options),a.mapEventEmission(this.options,this)}extendLineOptions(t){return super.extendScatterOptions(a.extend(!0,{},p,t))}getType(){return s.SERIE_TYPE.LINE}applyStyle(){this.applyLineStyles(),this.applyLineStyle(this.getSymbolForLegend()),super.applyStyle()}onMouseWheel(){}empty(){for(var t=0,e=this.lines.length;t<e;t++)this.groupLines.removeChild(this.lines[t]);return this.lines=[],this}unselect(){return super.unselect(),this.select("unselected")}getSymbolForLegend(){const t=this.symbolLegendContainer;if(this._lineForLegend)this.applyLineStyle(this._lineForLegend);else{var e=document.createElementNS(r.ns,"line");this.applyLineStyle(e),e.setAttribute("x1","5"),e.setAttribute("x2","25"),e.setAttribute("y1","0"),e.setAttribute("y2","0"),e.setAttribute("cursor","pointer"),this._lineForLegend=e,t.appendChild(this._lineForLegend)}return super.getSymbolForLegend(),this._lineForLegend}degrade(t){return this._degradationPx=t,this}noDegrade(){this._degradationPx=0}drawInit(t){try{this.axisCheck()}catch(t){return console.warn(t),!1}if(this.currentLineId=0,this.counter=0,this._drawn=!0,this.currentLine="",this.waveform){if(this._degradationPx)this.waveform.resampleForDisplay({resampleToPx:this.degradationPx,xPosition:this.getXAxis().getPx.bind(this.getXAxis()),minX:this.getXAxis().getCurrentMin(),maxX:this.getXAxis().getCurrentMax()}),this._dataToUse=[this.waveform.getDataToUseFlat()];else if(this.waveform.hasAggregation()){let e=this.getXAxis(),i=this.graph.getDrawingWidth()*(e.getDataMax()-e.getDataMin())/(e.getCurrentMax()-e.getCurrentMin()),s=this.waveform.selectAggregatedData(i);if(s instanceof Promise)return s.then((()=>{this.draw(t)})),!1;if(!1===s)return!1;this._dataToUse=this.waveform.getDataToUseFlat()}}else this._dataToUse=this.data,this._xDataToUse=this.xData;return!0}removeLinesGroup(){this._afterLinesGroup=this.groupLines.nextSibling,this.groupMain.removeChild(this.groupLines)}insertLinesGroup(){if(!this._afterLinesGroup)throw"Could not find group after lines to insertion.";this.groupMain.insertBefore(this.groupLines,this._afterLinesGroup),this._afterLinesGroup=!1}removeExtraLines(){for(var t=this.currentLineId,e=this.lines.length;t<e;t++)this.groupLines.removeChild(this.lines[t]);this.lines.splice(this.currentLineId,e-this.currentLineId),this.currentLineId=0}draw(t){if(!this.getXAxis()||!this.getYAxis())throw"No axes were defined for this serie";if(t||this.hasDataChanged()){if(super.draw(t),!this.drawInit(t))return;this._dataToUse,this._xDataToUse,this._slotToUse,this.removeLinesGroup(),this.lookForMaxima=!0,this.lookForMinima=!1,this.pos0=this.getYAxis().getPos(Math.max(0,this.getYAxis().getCurrentMin())),this.hasErrors()&&this.errorDrawInit(),this._draw(),this.hasErrors()&&this.errorDraw(),this.removeExtraLines(),this.insertLinesGroup()}for(var e in this.domMarkerHover)this.toggleMarker(e.split(","),!1,!0);for(var e in this.domMarkerSelect)this.toggleMarker(e.split(","),!1,!1);this.hasStyleChanged(this.getActiveStyle())&&(this.computeActiveStyle(),this.updateStyle()),this.dataHasChanged(!1),super.afterDraw()}_draw(){let t,e,i,s,r,a,n,o=this.waveform,h=!1,l=!1,u=this.getXAxis(),d=this.getYAxis(),p=u.getCurrentMin(),g=d.getCurrentMin(),c=u.getCurrentMax(),f=d.getCurrentMax();if(!o)return;t=o.getData(!0);let m=o.getShift(),x=o.getScale(),y=!1;this.isMonotoneous(),this.currentLine="";let{i:b,l:v}=this._getIterativeBounds(o,p,c);for(;b<v;b+=1){if(e=o.getX(b,!0),i=t[b]*x+m,e!=e||i!=i){this._createLine();continue}if(!this.options.overflowX&&e<p&&h<p||!this.options.overflowX&&e>c&&h>c||(!this.options.overflowY&&i<g&&l<g||!this.options.overflowY&&i>f&&l>f)&&!this.options.lineToZero){h=e,l=i,y=!0;continue}if(this.counter2=b,this.options.lineToZero&&(i>f&&(i=f),i<g&&(i=g)),a=this.getX(e),n=this.getY(i),a==s&&n==r)continue;if(a!=a||n!=n){this.counter>0&&this._createLine();continue}let u=this.isPointOutside(e,i,p,c,g,f);if(this.options.lineToZero){if(u=e<p||e>c,u)continue}else if(u||y){if(!1!==h&&!1!==l||y){let t=this.calculateAxisCrossing(e,i,h,l,p,c,g,f);t.length>0?u?y?2==t.length&&(this._createLine(),this._addPoint(this.getX(t[0][0]),this.getY(t[0][1]),t[0][0],t[0][1],!1,!1,!1),this._addPoint(this.getX(t[1][0]),this.getY(t[1][1]),t[0][0],t[0][1],!1,!1,!1)):this._addPoint(this.getX(t[0][0]),this.getY(t[0][1]),t[0][0],t[0][1],!1,!1,!1):(this._createLine(),this._addPoint(this.getX(t[0][0]),this.getY(t[0][1]),t[0][0],t[0][1],!1,!1,!1),this._addPoint(a,n,h,l,!1,!1,!0)):u||this._addPoint(a,n,h,l,b,!1,!1)}else s=a,r=n,h=e,l=i;s=a,r=n,h=e,l=i,y=u;continue}this._addPoint(a,n,e,i,b,!1,!0),s=a,r=n,h=e,l=i}if(this._createLine(),this._tracker){this._trackerDom&&this._trackerDom.remove();var M=this.groupLines.cloneNode(!0);for(this.groupMain.appendChild(M),b=0,v=M.children.length;b<v;b++)M.children[b].setAttribute("stroke","transparent"),M.children[b].setAttribute("stroke-width","25px"),M.children[b].setAttribute("pointer-events","stroke");this._trackerDom=M,this.groupMain.addEventListener("mousemove",(t=>{var e=this.graph._getXY(t),i=this.handleMouseMove(!1,!1);this._trackingCallback(this,i,e.x,e.y)})),this.groupMain.addEventListener("mouseleave",(t=>{this._trackingOutCallback(this)}))}return this}_getIterativeBounds(t,e,i){let s=0,r=t.getLength(),a=r;return t.isXMonotoneous()&&(t.isXMonotoneousAscending()?(s=t.getIndexFromX(e,!0),r=t.getIndexFromX(i,!0)):(s=t.getIndexFromX(i,!0),r=t.getIndexFromX(e,!0)),0==s?s=0:s>0&&s--,0==r?r=a:r<a&&r++),{i:s,l:r}}kill(){super.kill()}isPointOutside(t,e,i,s,r,a){return this.isMonotoneous()?!this.options.overflowY&&(e<r||e>a):!this.options.overflowX&&(t<i||t>s)||!this.options.overflowY&&(e<r||e>a)}calculateAxisCrossing(t,e,i,s,r,a,n,o){let h=[],l=(t-r)/(t-i),u=e-l*(e-s),d=(t-a)/(t-i),p=e-d*(e-s),g=(e-n)/(e-s),c=t-g*(t-i),f=(e-o)/(e-s),m=t-f*(t-i);return l<1&&l>0&&!1!==u&&u<=o&&u>=n&&h.push([r,u]),d<1&&d>0&&!1!==p&&p<=o&&p>=n&&h.push([a,p]),g<1&&g>0&&!1!==c&&c<=a&&c>=r&&h.push([c,n]),f<1&&f>0&&!1!==m&&m<=a&&m>=r&&h.push([m,o]),h}_addPoint(t,e,i,s,r,a,n){t==t&&e==e&&(0==this.counter?this.currentLine="M ":this.options.lineToZero||a?this.currentLine+="M ":this.currentLine+="L ",this.currentLine+=t,this.currentLine+=" ",this.currentLine+=e,this.currentLine+=" ",this.options.lineToZero&&void 0!==this.pos0&&(this.currentLine+="L ",this.currentLine+=t,this.currentLine+=" ",this.currentLine+=this.pos0,this.currentLine+=" "),this.hasErrors()&&this.errorAddPoint(r,i,s,t,e),this.counter++)}_createLine(){var t,e=this.currentLineId++;return this.lines[e]?t=this.lines[e]:(t=document.createElementNS(this.graph.ns,"path"),this.applyLineStyle(t),this.groupLines.appendChild(t),this.lines[e]=t),0==this.counter?t.setAttribute("d",""):t.setAttribute("d",this.currentLine),this.currentLine="M ",this.counter=0,t}applyLineStyles(){for(var t=0;t<this.lines.length;t++)this.applyLineStyle(this.lines[t])}applyLineStyle(t){t.setAttribute("stroke",this.getLineColor()),t.setAttribute("stroke-width",this.getLineWidth()),this.getLineDashArray()?t.setAttribute("stroke-dasharray",this.getLineDashArray()):t.removeAttribute("stroke-dasharray"),this.getFillColor()?t.setAttribute("fill",this.getFillColor()):t.setAttribute("fill","none")}updateStyle(){this.applyLineStyles(),this.setLegendSymbolStyle(),this.styleHasChanged(!1)}getMarkerPath(t,e){var i=t.zoom||1,s=(e=e||0,[]);switch(t.type){case 2:s=["m",-2,-2,"l",4,4,"m",-4,0,"l",4,-4];break;case 3:s=["m",-2,0,"l",4,0,"m",-2,-2,"l",0,4];break;case 4:s=["m",-1,-1,"l",2,0,"l",-1,2,"z"];break;default:case 1:s=["m",-2,-2,"l",4,0,"l",0,4,"l",-4,0,"z"]}if(!(1!=i&&i||e))return s.join(" ");if(s){for(var r=0,a=s.length;r<a;r++)"number"==typeof s[r]&&(s[r]*=i+e);return s.join(" ")}}handleMouseMove(t,e,i){var s,r=t||this.getXAxis().getMouseVal(),a=i||this.getYAxis().getMouseVal(),n=this.getClosestPointToXY(r,a);if(n)return n.xMax==n.xMin&&(s=n.yMin),(!e||!this.options.trackMouse||null!=n.xMin)&&{xBefore:n.xMin,xAfter:n.xMax,yBefore:n.yMin,yAfter:n.yMax,trueX:n.xExact,indexClosest:n.indexClosest,interpolatedY:s,xClosest:n.xClosest,yClosest:n.yClosest}}getMax(t,e){var i,s,r,a,n=Math.min(t,e),o=Math.max(t,e),h=this.getClosestPointToXY(n),l=this.getClosestPointToXY(o),u=-1/0;if(h||(n=this.minX,h=this.getClosestPointToXY(n)),l||(o=this.maxX,l=this.getClosestPointToXY(o)),!h||!l)return-1/0;for(i=h.dataIndex;i<=l.dataIndex;i++)for(r=i==h.dataIndex?h.xBeforeIndexArr:0,a=i==l.dataIndex?l.xBeforeIndexArr:this.data[i].length,s=r;s<=a;s+=2)u=Math.max(u,this.data[i][s+1]);return u}getMin(t,e){var i,s,r,a,n=Math.min(t,e),o=Math.max(t,e),h=this.getClosestPointToXY(n),l=this.getClosestPointToXY(o),u=1/0;if(h||(n=this.minX,h=this.getClosestPointToXY(n)),l||(o=this.maxX,l=this.getClosestPointToXY(o)),!h||!l)return 1/0;for(i=h.dataIndex;i<=l.dataIndex;i++)for(r=i==h.dataIndex?h.xBeforeIndexArr:0,a=i==l.dataIndex?l.xBeforeIndexArr:this.data[i].length,s=r;s<=a;s+=2)u=Math.min(u,this.data[i][s+1]);return u}getRawLineStyle(t="unselected"){let e=this.getRawStyle(t);return e.line||(e.line={}),e.line}setLineStyle(t,e="unselected",i){return this.getRawLineStyle(e).style=t,i&&this.setLineStyle(t,"selected"),this.styleHasChanged(e),this}getLineStyle(t){var e;return null===(e=this.getComputedStyle(t).line)||void 0===e?void 0:e.style}getLineDashArray(t=this.getActiveStyleName()){let e=this.getLineStyle(t);if(Array.isArray(e))return e.join(", ");if("string"==typeof e)return e;switch(e){case d.PLAIN:return"1, 1";case d.DASHED_SM:return"2, 2";case d.DASHED:return"3, 3";case d.DASHED_LG:return"4, 4";case d.DASHED_XL:return"5, 5";case d.DASHED_LG_INTV_SM:return"5 2";case d.DASHED_SM_INTV_LG:return"2 5";case d.DASHED_INTV_ALT:return"4 2 4 4";case d.DASHED_DOTTED:return"1,3,1";case d.DASHED_XL_INTV_SM:return"9 2";case d.DASHED_SM_INTV_XL:return"2 9";default:return""}}setLineWidth(t,e,i){return this.getRawLineStyle(e).width=t,i&&this.setLineWidth(t,"selected"),this.styleHasChanged(e),this}getLineWidth(){var t;return null===(t=this.getComputedStyle().line)||void 0===t?void 0:t.width}setLineColor(t,e,i){return this.getRawLineStyle(e).color=t,i&&this.setLineColor(t,"selected"),this.styleHasChanged(e),this}getLineColor(){var t;return null===(t=this.getComputedStyle().line)||void 0===t?void 0:t.color}setFillColor(t,e,i){return this.getRawLineStyle(e).fillColor=t,i&&this.setFillColor(t,"selected"),this.styleHasChanged(e),this}getFillColor(){var t;return null===(t=this.getComputedStyle().line)||void 0===t?void 0:t.fillColor}isMonotoneous(){return this.waveform?this.waveform.isMonotoneous():!!this.xmonotoneous}findLocalMinMax(t,e,i){return!!this.waveform&&this.waveform.findLocalMinMax(t,e,i)}getClosestPointToXY(t=this.getXAxis().getMouseVal(),e=this.getYAxis().getMouseVal(),i=0,s=0,r=!1,a=!0){const n=this.getXAxis().getRelVal(i),o=this.getYAxis().getRelVal(s),h=this.waveform.findWithShortestDistance({x:t,y:e,xMaxDistance:n,yMaxDistance:o,axisRef:r,scaleX:a?1/this.getXAxis().getRelVal(1):1,scaleY:a?1/this.getYAxis().getRelVal(1):1});if(isNaN(h)||!1===h)return!1;if(h<0)return!1;const l={indexBefore:h,indexAfter:h,xExact:t,indexClosest:h,interpolatedY:this.waveform.getY(h),xClosest:this.waveform.getX(h),yClosest:this.waveform.getY(h)};if(this.waveform.isMonotoneous()){let t=this.waveform.getX(h),e=this.waveform.getX(h),i=this.waveform.getY(h),s=this.waveform.getX(h);t<e?(l.xBefore=t,l.xAfter=e,l.yBefore=i,l.yAfter=s):(l.xBefore=e,l.xAfter=t,l.yBefore=s,l.yAfter=i)}return l}}a.mix(g,n.default);var c=g;e.default=c},5718:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var a=s?Object.getOwnPropertyDescriptor(t,r):null;a&&(a.get||a.set)?Object.defineProperty(i,r,a):i[r]=t[r]}return i.default=t,e&&e.set(t,i),i}(i(4167)),r=n(i(1148)),a=n(i(7245));function n(t){return t&&t.__esModule?t:{default:t}}function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}const h={markers:!0,markerStyles:{unselected:{default:{shape:"circle",cx:0,cy:0,r:3,stroke:"transparent",fill:"black"}},selected:{default:{r:4}}}};class l extends a.default{constructor(t,e,i){var r,a;if(super(t,e,i),a=void 0,(r="options")in this?Object.defineProperty(this,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):this[r]=a,this._type="scatter",s.mapEventEmission(this.options,this),this.init(),this.shapes=[],this.shapesDetails=[],this.keys=[],this.styleAttributes=[],this.stylesNames=void 0,this.groupMarkers=document.createElementNS(this.graph.ns,"g"),this.groupMain.appendChild(this.groupMarkers),this.options.markerStyles)for(let t in this.options.markerStyles)this.setStyle({markers:this.options.markerStyles[t]},t,"unselected");this.groupMarkers.addEventListener("mouseenter",(t=>{var e=parseInt(t.target.parentElement.getAttribute("data-shapeid"));isNaN(e)||(this.options.selectMarkerOnHover&&this.selectMarker(e,"selected"),this.emit("mouseOverMarker",e,this.waveform.getX(e),this.waveform.getY(e)))}),!0),this.groupMarkers.addEventListener("mouseout",(t=>{var e=parseInt(t.target.parentElement.getAttribute("data-shapeid"));isNaN(e)||(this.options.selectMarkerOnHover&&this.selectMarker(e,"unselected"),this.emit("mouseOutMarker",e,this.waveform.getX(e),this.waveform.getY(e)))}))}extendScatterOptions(t){return t=super.extendOptions(t),s.extend(!0,{},h,t)}init(){}setDataCategory(t){for(let e of t)this._checkY(e.y.getMaxY()),this._checkY(e.y.getMinY());return this.data=t,this.dataHasChanged(),this.graph.updateDataMinMaxAxes(),this}empty(){for(;this.groupMarkers.firstChild;)this.groupMarkers.removeChild(this.groupMarkers.firstChild)}getSymbolForLegend(){if(!this.options.markers)return;const t=super._getSymbolForLegendContainer();var e=this.getMarkerStyle(-1,!0)[-1];if(e&&e.shape){for(var i in this.shapeLegend||(this.shapeLegend=this._makeMarker(t,e),t.appendChild(this.shapeLegend)),e)"shape"!=i&&this.shapeLegend.setAttribute(i,e[i]);return t}}setMarkerStyle(t,e,i="unselected",s="unselected"){"string"==typeof e&&(i=e,e=!1);let r={markers:{all:t,modifiers:e}};return this.setStyle(r,i,s),this.styleHasChanged(i),this}setIndividualStyleNames(t){this.stylesNames=t}draw(t){if(!t&&!this.hasDataChanged()&&!this.hasStyleChanged("unselected")||!this.options.markers)return;let e,i,s,r;if(!this.isCategory&&!this.waveform)return;const a="category"==this.getXAxis().getType(),n=[];if(this.dataHasChanged(!1),this.styleHasChanged(!1),this.groupMain.removeChild(this.groupMarkers),s=0,r=0,this.hasErrors()&&this.errorDrawInit(),a){let t=0;for(;s<this.data.length;s++)if(this.categoryIndices.hasOwnProperty(this.data[s].x)){this.error;for(var o=0,h=this.data[s].y.getLength();o<h;o++)i=this.getY(this.data[s].y.getY(o)),e=this.getX(o/(h-1)*(.8/this.nbCategories)+this.categoryIndices[this.data[s].x]+.1/this.nbCategories),o++,this.shapesDetails[t]=this.shapesDetails[t]||[],this.shapesDetails[t][0]=e,this.shapesDetails[t][1]=i,n.push(t),t++}}else for(;s<this.waveform.getLength();s++)this.waveform.getX(s)<this.getXAxis().getCurrentMin()||this.waveform.getX(s)>this.getXAxis().getCurrentMax()||this.waveform.getY(s)<this.getYAxis().getCurrentMin()||this.waveform.getY(s)>this.getYAxis().getCurrentMax()?this.shapes[s]&&(this.shapes[s].setAttribute("display","none"),this.shapes[s]._hidden=!0):(this.shapes[s]&&this.shapes[s]._hidden&&(this.shapes[s].setAttribute("display","initial"),this.shapes[s]._hidden=!1),e=this.getX(this.waveform.getX(s)),i=this.getY(this.waveform.getY(s)),isNaN(e)||isNaN(i)?this.shapes[s]&&(this.shapes[s].setAttribute("display","none"),this.shapes[s]._hidden=!0):(this.shapes[s]&&this.shapes[s]._hidden&&(this.shapes[s].setAttribute("display","initial"),this.shapes[s]._hidden=!1),this.hasErrors()&&this.errorAddPoint(s,this.waveform.getX(s),this.waveform.getY(s),e,i),this.shapesDetails[s]=this.shapesDetails[s]||[],this.shapesDetails[s][0]=e,this.shapesDetails[s][1]=i,n.push(s)));this.hasErrors()&&this.errorDraw(),this.applyMarkerStyle(n),this.keys=n,this.groupMain.appendChild(this.groupMarkers)}_makeMarker(t,e){var i=document.createElementNS(this.graph.ns,e.shape);return t.appendChild(i),i}getMarkerStyle(t,e){this.computeStyles();const i=this.stylesNames,s="function"==typeof i,r=this.getComputedStyles();var a={};let n;n=Array.isArray(t)?t:[t];let o,h,l=[];for(let t in r)r[t].markers&&("function"==typeof r[t].markers.all?l[t]=r[t].markers.all():l[t]={...r[t].markers.all},r[t].markers.default&&(l[t]={...r[t].markers.default,...l[t]}));for(let t=0,r=n.length;t<r;t++){var u;let r;if(r=i?s?i(this,t):Array.isArray(i)?i[t]:this.getActiveStyleName():this.getActiveStyleName(),!l[r])continue;let p=null===(u=this.getRawStyle(r).markers)||void 0===u?void 0:u.modifiers,g="function"==typeof p;if(h=n[t],o=this.shapes[h],p&&(g||p[h])){let t;if(g){if(t=p.call(this,this.waveform.getX(h),this.waveform.getY(h),h,o,l),!1===t&&(t={},o)){o.setAttribute("display","none");continue}}else p[h]&&(t=p[h]);a[h]={...l[r],...t}}else a[h]=l[r];if(!o){if(!a[h].shape)continue;var d=document.createElementNS(this.graph.ns,"g");d.setAttribute("data-shapeid",h),console.log("make"),this.shapes[h]=this._makeMarker(d,a[h]),this.groupMarkers.appendChild(d),o=this.shapes[h]}e||this.shapesDetails[h][0]!=this.shapesDetails[h][0]||this.shapesDetails[h][1]!=this.shapesDetails[h][1]||o.parentNode.setAttribute("transform",`translate(${this.shapesDetails[h][0]}, ${this.shapesDetails[h][1]})`)}return a}applyMarkerStyle(t,e){var i,s,r=this.getMarkerStyle(t,e);for(i in this.styleAttributes[i]=this.styleAttributes[i]||[],r){if(this.styleAttributes[i])for(s in this.styleAttributes[i])r[i]&&r[i][s]==this.styleAttributes[i][s]||(this.shapes[i].removeAttribute(s),delete this.styleAttributes[i]);for(s in r[i])"shape"!==s&&this.shapes[i]&&(!r[i][s]||this.styleAttributes[i]&&r[i][s]==this.styleAttributes[i][s]||this.shapes[i].setAttribute(s,r[i][s]));this.styleAttributes[i]=r[i]}}unselectMarker(t){this.selectMarker(t,!1)}selectMarker(t,e,i){if(!this.shapesDetails[t][2]||this.shapesDetails[t][2]!=i){if("string"==typeof e&&(i=e,e=void 0),Array.isArray(t))return this.selectMarkers(t);if(this.shapes[t]&&this.shapesDetails[t])if(!this.shapesDetails[t][2]&&!1!==e||!0===e)i=i||"selected",this.shapesDetails[t][2]=i,this.applyMarkerStyle(t,!0);else{this.shapesDetails[t][2];var s=this.getMarkerStyle(t,!0);for(var r in s[t])this.shapes[t].removeAttribute(r);this.shapesDetails[t][2]=!1,this.applyMarkerStyle(t,!0)}}}applyStyle(){this.applyMarkerStyle(this.keys),super.applyStyle()}setMarkers(t=!0){return this.options.markers=t,this}showMarkers(){if(!this.options.markers)return this.options.markers=!0,this.groupMarkers.setAttribute("display","initial"),this.shapeLegend&&this.shapeLegend.setAttribute("display","initial"),this}hideMarkers(){if(this.options.markers)return this.options.markers=!1,this.groupMarkers.setAttribute("display","none"),this.shapeLegend&&this.shapeLegend.setAttribute("display","none"),this}getUsedCategories(){return"object"==typeof this.data[0]?this.data.map((t=>t.x)):[]}getClosestPointToXY(t=this.getXAxis().getMouseVal(),e=this.getYAxis().getMouseVal(),i=0,s=0,r=!1,a=!0){const n=this.getXAxis().getRelVal(i),o=this.getYAxis().getRelVal(s),h=this.waveform.findWithShortestDistance({x:t,y:e,xMax:n,yMax:o,interpolation:!1,scaleX:a?1/this.getXAxis().getRelVal(1):1,scaleY:a?1/this.getYAxis().getRelVal(1):1});return{indexBefore:h,indexAfter:h,xBefore:this.waveform.getX(h),xAfter:this.waveform.getX(h),yBefore:this.waveform.getY(h),yAfter:this.waveform.getX(h),xExact:t,indexClosest:h,interpolatedY:this.waveform.getY(h),xClosest:this.waveform.getX(h),yClosest:this.waveform.getY(h)}}}s.mix(l,r.default);var u=l;e.default=u},7245:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s,r=l(i(1107)),a=l(i(4167)),n=(s=i(5452))&&s.__esModule?s:{default:s},o=i(1748);function h(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return h=function(){return t},t}function l(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=h();if(e&&e.has(t))return e.get(t);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var a=s?Object.getOwnPropertyDescriptor(t,r):null;a&&(a.get||a.set)?Object.defineProperty(i,r,a):i[r]=t[r]}return i.default=t,e&&e.set(t,i),i}function u(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const d={redrawShapesAfterDraw:!1};class p{constructor(t,e,i={}){u(this,"options",void 0),u(this,"graph",void 0),u(this,"name",void 0),u(this,"groupMain",void 0),u(this,"symbolLegendContainer",void 0),u(this,"_activeStyleName",void 0),u(this,"_unselectedStyleName",void 0),u(this,"minX",void 0),u(this,"maxX",void 0),u(this,"minY",void 0),u(this,"maxY",void 0),u(this,"styles",void 0),u(this,"shown",!0),u(this,"selected",!1),u(this,"waveform",void 0),this.options=a.extend(!0,{},i),this.graph=t,this.name=e,this.groupMain=document.createElementNS(r.ns,"g"),this.symbolLegendContainer=document.createElementNS(r.ns,"g"),this.init(),this.styles={}}init(){}extendOptions(t){return a.extend(!0,{},d,t)}postInit(){}draw(){}beforeDraw(){}afterDraw(){this.options.redrawShapesAfterDraw&&this.graph.getShapesOfSerie(this).forEach((t=>{t.redraw()})),this.emit("draw")}setData(t,e,i){if(t instanceof o.Waveform)return this.setWaveform(t);throw"Setting data other than waveforms in not supported by default. You must implemented this method in the inherited class."}_addData(t,e){return[]}clearData(){return this.setData(new o.Waveform),this}getData(){return this.data}setOptions(t){this.options=t||{}}setOption(t,e){this.options[t]=e}kill(t){return this.graph.removeSerieFromDom(this),this.graph._removeSerie(this),this.graph.legend&&!t&&this.graph.legend.update(),this.graph=void 0,this}hide(t=this.options.bindShapesToDisplayState,e=!1){if(this.hidden=!0,this.groupMain.setAttribute("display","none"),this.getSymbolForLegend().setAttribute("opacity",.5),this.getTextForLegend().setAttribute("opacity",.5),this.hideImpl(),t)for(var i=this.graph.getShapesOfSerie(this),s=0,r=i.length;s<r;s++)i[s].hide();return e||this.emit("hide"),(this.getXAxis().doesHideWhenNoSeriesShown()||this.getYAxis().doesHideWhenNoSeriesShown())&&this.graph.draw(!0),this.graph.hasPlugin("peakPicking")&&this.graph.getPlugin("peakPicking").getSerie()==this&&this.graph.getPlugin("peakPicking").hidePeakPicking(),this}show(t=this.options.bindShapesToDisplayState,e=!1){if(this.hidden=!1,this.groupMain.setAttribute("display","block"),this.getSymbolForLegend().setAttribute("opacity",1),this.getTextForLegend().setAttribute("opacity",1),this.showImpl(),this.draw(!0),t)for(var i=this.graph.getShapesOfSerie(this),s=0,r=i.length;s<r;s++)i[s].show();return e||this.emit("show"),(this.getXAxis().doesHideWhenNoSeriesShown()||this.getYAxis().doesHideWhenNoSeriesShown())&&this.graph.draw(!0),this.graph.hasPlugin("peakPicking")&&this.graph.getPlugin("peakPicking").getSerie()==this&&this.graph.getPlugin("peakPicking").showPeakPicking(),this}hideImpl(){}showImpl(){}toggleDisplay(){return this.isShown()?this.hide():this.show(),this}isShown(){return!this.hidden}axisCheck(){if(!this.getXAxis()||!this.getYAxis())throw"No axis exist for this serie. Check that they were properly assigned";if(isNaN(this.getXAxis().getCurrentMin())||isNaN(this.getXAxis().getCurrentMax())||isNaN(this.getYAxis().getCurrentMin())||isNaN(this.getYAxis().getCurrentMax()))throw"Axis min and max values are not defined. Try autoscaling"}getX(t){return(t=this.getXAxis().getPx(t))-t%.2}getY(t){return(t=this.getYAxis().getPx(t))-t%.2}isSelected(){return"selected"==this._activeStyleName}_checkX(t){this.minX=Math.min(this.minX,t),this.maxX=Math.max(this.maxX,t)}_checkY(t){this.minY=Math.min(this.minY,t),this.maxY=Math.max(this.maxY,t)}getName(){return this.name}autoAxis(){return this.isFlipped()?(this.setXAxis(this.graph.getYAxis()),this.setYAxis(this.graph.getXAxis())):(this.setXAxis(this.graph.getXAxis()),this.setYAxis(this.graph.getYAxis())),this.graph.updateDataMinMaxAxes(),this}autoAxes(){return this.autoAxis(...arguments)}setXAxis(t){return this.xaxis="number"==typeof t?this.isFlipped()?this.graph.getYAxis(t):this.graph.getXAxis(t):t,this.graph.updateDataMinMaxAxes(),this}setYAxis(t){return"number"==typeof t?this.xaxis=this.isFlipped()?this.graph.getXAxis(t):this.graph.getYAxis(t):this.yaxis=t,this.graph.updateDataMinMaxAxes(),this}setAxes(){for(var t=0;t<2;t++)arguments[t]&&this[arguments[t].isX()?"setXAxis":"setYAxis"](arguments[t]);return this.graph.updateDataMinMaxAxes(),this}getXAxis(){return this.xaxis}getYAxis(){return this.yaxis}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getWaveform(){return this.waveform||(this.waveform=r.default.newWaveform()),this.waveform}getWaveforms(){return[this.waveform]}setWaveform(t){if(!(t instanceof o.Waveform))throw console.trace(),console.error(t),new Error("Cannot assign waveform to serie. Waveform is not of the proper Waveform instance");return this.waveform=t,this.dataHasChanged(),this.graph.updateDataMinMaxAxes(),this}getSymbolForLegend(){if(!this.lineForLegend){var t=document.createElementNS(this.graph.ns,"line");this.applyLineStyle(t),t.setAttribute("x1",5),t.setAttribute("x2",25),t.setAttribute("y1",0),t.setAttribute("y2",0),t.setAttribute("cursor","pointer"),this.lineForLegend=t}return this.lineForLegend}_getSymbolForLegendContainer(){return this.symbolLegendContainer}extendStyle(t,e="unselected",i="unselected"){this.styles[e]=this.styles[e]||{base:i,data:{}},a.extend(this.styles[e].data,t)}setStyle(t,e="unselected",i="unselected"){return this.styles[e]={base:i,data:t},this.styleHasChanged(e),this}getStyle(t){return this.styles[t]?this._buildStyle(t):this.graph.constructor.getStyle(t)}getRawStyles(){return this.styles}getRawStyle(t){return this.styles[t]=this.styles[t]||{data:{}},this.styles[t].data}activateStyle(t){this._activeStyleName=t,this._unselectedStyleName=t,this.computeActiveStyle(),this.styleHasChanged(t)}setActiveStyle(t){return this.activateStyle(t)}getActiveStyle(){return this._activeStyleName}getActiveStyleName(){return this.getActiveStyle()}computeStyles(){for(let t in this.styles)this.computeStyle(t)}computeStyle(t){this.computedStyle=this.computedStyle||{},this.computedStyle[t]=this.getStyle(t)}computeActiveStyle(){this.computedStyle=this.computedStyle||{},this.computedStyle[this.getActiveStyle()]=this.getStyle(this.getActiveStyle())}getComputedStyle(t=this.getActiveStyle()){return this.computedStyle[t]}getComputedStyles(){return this.computedStyle}_buildStyle(t){let e=this.styles[t].base;return e==t&&(e=null),e?a.extend(!0,{},this.getStyle(e),this.styles[t].data):a.extend(!0,{},this.styles[t].data)}setLegendSymbolStyle(){this.applyLineStyle(this.getSymbolForLegend())}updateStyle(){this.setLegendSymbolStyle(),this.graph.updateLegend()}getTextForLegend(){if(!this.textForLegend){var t=document.createElementNS(this.graph.ns,"text");t.setAttribute("cursor","pointer"),t.textContent=this.getLabel(),this.textForLegend=t}return this.textForLegend}getIndex(){return this.graph.series.indexOf(this)}getLabel(){return this.options.label||this.name}setLabel(t){return this.options.label=t,this.textForLegend&&(this.textForLegend.textContent=t),this.graph.requireLegendUpdate(),this}setFlip(t){return this.options.flip=t,this}getFlip(){return this.options.flip}isFlipped(){return this.options.flip}setLayer(t){let e=parseInt(t)||1;return e!==this.options.layer&&(this.options.layer=e,this.graph.appendSerieToDom(this)),this}getLayer(){return this.options.layer||1}styleHasChanged(t="unselected"){if(this._changedStyles=this._changedStyles||{},!1===t)for(var e in this._changedStyles)this._changedStyles[e]=!1;else this._changedStyles[t||"unselected"]=!0;return this.graph.requireLegendUpdate(),this}hasStyleChanged(t="unselected"){let e;for(this._changedStyles=this._changedStyles||{};;){if(this._changedStyles[t])return!0;if(e=this.styles[t],!e||e.base==t)break;t=e.base}return!1}dataHasChanged(t){return this._dataHasChanged=void 0===t||t,this.waveform&&(this.minX=this.waveform.getXMin(),this.maxX=this.waveform.getXMax(),this.minY=this.waveform.getMin(),this.maxY=this.waveform.getMax()),this}hasDataChanged(){return this._dataHasChanged}setInfo(t,e){return this.infos=this.infos||{},this.infos[t]=e,this}getInfo(t,e){return(this.infos||{})[t]}setAdditionalData(t){return this.additionalData=t,this}getAdditionalData(){return this.additionalData}select(t){return"unselected"==t||(this._unselectedStyleName=this._activeStyleName,this._activeStyleName="selected",this.selected=!0,this.applyStyle()),this}unselect(){return this.selected=!1,this.activateStyle(this._unselectedStyleName),this.applyStyle(),this}applyStyle(){}enableTracking(t,e){return this._tracker=!0,this}disableTracking(){return this._trackerDom&&(this._trackerDom.remove(),this._trackerDom=null),this._tracker=!1,this}allowTrackingLine(t){t=t||{},this.graph.addSerieToTrackingLine(this,t)}getMarkerForLegend(){return!1}get type(){return this._type}getType(){return this._type}excludeFromLegend(){return this._excludedFromLegend=!0,this}includeInLegend(){return this._excludedFromLegend=!1,this}setDataIndices(t,e){this.categoryIndices=t,this.nbCategories=e}hasErrors(){return!!this.waveform&&this.waveform.hasErrorBars()}}(0,n.default)(p,"serie");var g=p;e.default=g},7328:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=o(i(6190)),r=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var a=s?Object.getOwnPropertyDescriptor(t,r):null;a&&(a.get||a.set)?Object.defineProperty(i,r,a):i[r]=t[r]}return i.default=t,e&&e.set(t,i),i}(i(4167)),a=o(i(6244));function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function o(t){return t&&t.__esModule?t:{default:t}}class h extends a.default{static default(){return{zpos:0}}constructor(t,e,i){super(...arguments)}setZPos(t){return this.options.zpos=t,this}setz(){return this.setZPos(...arguments)}}r.mix(h,s.default);var l=h;e.default=l},6244:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s,r=i(1748),a=i(4167),n=(s=i(7245))&&s.__esModule?s:{default:s};class o extends n.default{static default(){return{fillColor:"rgba( 0, 0, 0, 0.1 )",lineColor:"rgba( 0, 0, 0, 1 )",lineWidth:"1px"}}constructor(t,e,i){super(...arguments),this.selectionType="unselected",this.id=(0,a.guid)(),this.groupZones=document.createElementNS(this.graph.ns,"g"),this.lineZone=document.createElementNS(this.graph.ns,"path"),this.lineZone.setAttribute("stroke","black"),this.lineZone.setAttribute("stroke-width","1px"),this.groupMain.appendChild(this.groupZones),this.groupZones.appendChild(this.lineZone),this.applyLineStyle(this.lineZone),this.styleHasChanged(),this.clip=document.createElementNS(this.graph.ns,"clipPath"),this.clipId=(0,a.guid)(),this.clip.setAttribute("id",this.clipId),this.graph.defs.appendChild(this.clip)}setWaveform(...t){return this.waveforms=t,this.waveforms=this.waveforms.map((t=>t instanceof r.Waveform?t:new r.Waveform(t))),this.minX=this.waveforms[0].getXMin(),this.maxX=this.waveforms[0].getXMax(),this.minY=this.waveforms[0].getMin(),this.maxY=this.waveforms[0].getMax(),this.waveforms.map((t=>{this.minX=Math.min(t.getXMin(),this.minX),this.maxX=Math.max(t.getXMin(),this.maxX),this.minY=Math.min(t.getMin(),this.minY),this.maxY=Math.max(t.getMax(),this.maxY)})),this.graph.updateDataMinMaxAxes(),this.dataHasChanged(),this}setWaveforms(){return this.setWaveform(...arguments)}getWaveforms(){return this.waveforms}setMinMaxWaveforms(t,e){return this.waveforms=[t,e.reverse()],this}empty(){for(;this.group.firstChild;)this.group.removeChild(this.group.firstChild)}draw(t){if(t||this.hasDataChanged()){if(!this.waveforms)return;let t,e=0,i=0,s=0,r=0,a=0,n="",o=!1;this.getXAxis().getMinPx(),this.getXAxis().getMaxPx(),this.getYAxis().getMinPx(),this.getYAxis().getMaxPx();const h=this.getXAxis().getCurrentMin(),l=this.getXAxis().getCurrentMax(),u=this.getYAxis().getCurrentMin(),d=this.getYAxis().getCurrentMax();this.groupMain.removeChild(this.groupZones);for(let p of this.waveforms)for(a=0;a<p.getLength();a+=1)if(e=p.getX(a,!0),i=p.getY(a,!0),i[a]<u?r=this.getY(u):i[a]>d&&(r=this.getY(d)),e==e)if(i==i)r=this.getY(i),s=this.getX(e),e<h||e>l?t=[e,i[a],s,r]:(o&&(n+=` M ${s}, ${this.getY(p.getMinY())} `,o=!1),n.length>0&&(n+=" L "),t?(n+=`${t[2]},${t[3]} `,t=!1):n+=`${s},${r} `);else{if(0==n.length)continue;n+=`L ${s}, ${this.getY(p.getMinY())}`,o=!0}""!==n?this.lineZone.setAttribute("d",`M ${n} z`):this.lineZone.setAttribute("d",""),this.groupMain.appendChild(this.groupZones)}this.hasStyleChanged(this.selectionType)&&(this.applyLineStyle(this.lineZone),this.styleHasChanged(!1))}applyLineStyle(t){t.setAttribute("stroke",this.getLineColor()),t.setAttribute("stroke-width",this.getLineWidth()),t.setAttribute("fill",this.getFillColor()),t.setAttribute("fill-opacity",this.getFillOpacity()),t.setAttribute("stroke-opacity",this.getLineOpacity())}setLineWidth(t){return this.options.lineWidth=t,this.styleHasChanged(),this}getLineWidth(){return this.options.lineWidth}setLineOpacity(t){return this.options.lineOpacity=t,this.styleHasChanged(),this}getLineOpacity(){return this.options.lineOpacity}setLineColor(t){return this.options.lineColor=t,this.styleHasChanged(),this}getLineColor(){return this.options.lineColor}setFillOpacity(t){return this.options.fillOpacity=t,this.styleHasChanged(),this}getFillOpacity(){return this.options.fillOpacity}setFillColor(t){return this.options.fillColor=t,this.styleHasChanged(),this}getFillColor(){return this.options.fillColor}}var h=o;e.default=h},5737:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s,r=(s=i(6141))&&s.__esModule?s:{default:s};class a extends r.default{createDom(){this._dom=document.createElementNS(this.graph.ns,"path")}createHandles(){this._createHandles(2,"line",{"stroke-width":"3",stroke:"transparent","pointer-events":"stroke",cursor:"ew-resize"})}handleMouseMoveImpl(t,e,i){if(!this.isLocked()){if(this.moving)this.getPosition(0).deltaPosition("x",e,this.getXAxis()),this.getPosition(1).deltaPosition("x",e,this.getXAxis());else if(this.serie&&this.handleSelected){this.resizingPosition=1==this.handleSelected?this.getPosition(0):this.getPosition(1);var s=this.serie.getClosestPointToXY(this.getXAxis().getVal(this.graph._getXY(t).x-this.graph.getPaddingLeft()));if(!s)return;this.resizingPosition.x!=s.xMin&&(this.preventUnselect=!0),this.resizingPosition.x=s.xMin}else this.handleSelected&&(this.resizingPosition=1==this.handleSelected?this.getPosition(0):this.getPosition(1),this.resizingPosition.deltaPosition("x",e,this.getXAxis()));this.applyPosition()}}applyPosition(){if(this.serie){var t=this.computePosition(0),e=this.computePosition(1),i=Math.abs(t.x-e.x),s=Math.min(t.x,e.x);if(i<2||s+i<0||s>this.graph.getDrawingWidth())return this.setDom("d",""),!1;var r,a,n,o,h,l,u,d=this.serie.getClosestPointToXY(this.getPosition(0).x),p=this.serie.getClosestPointToXY(this.getPosition(1).x),g=0,c=Number.MAX_VALUE;if(!d||!p)return!1;for(d.xBeforeIndex>p.xBeforeIndex&&(r=d,d=p,p=r),this.counter=0,a=d.dataIndex;a<=p.dataIndex;a++){for(this.currentLine="",l=0,(o=a==d.dataIndex?d.xBeforeIndexArr:0)==(h=a==p.dataIndex?p.xBeforeIndexArr:this.serie.data[a].length)&&h++,n=o;n<=h;n+=2)s=this.serie.getX(this.serie.data[a][n+0]),u=this.serie.getY(this.serie.data[a][n+1]),g=Math.max(this.serie.data[a][n+1],g),c=Math.min(this.serie.data[a][n+1],c),n==o&&(this.firstX=s,this.firstY=u),this.currentLine+=l>0?` L ${s} ${u} `:` M ${s} ${u} `,l++;if(this.lastX=s,this.lastY=u,!(this.firstX&&this.firstY&&this.lastX&&this.lastY))return;this.currentLine+=` V ${this.getYAxis().getPx(0)} H ${this.firstX} z`,this.setDom("d",this.currentLine)}return this.maxY=this.serie.getY(g),this.setHandles(),this.changed(),!0}}setHandles(){if(this.firstX){var t=this.computePosition(0),e=this.computePosition(1);t.x<e.x?(this.handles[1].setAttribute("x1",this.firstX),this.handles[1].setAttribute("x2",this.firstX),this.handles[2].setAttribute("x1",this.lastX),this.handles[2].setAttribute("x2",this.lastX)):(this.handles[1].setAttribute("x1",this.lastX),this.handles[1].setAttribute("x2",this.lastX),this.handles[2].setAttribute("x1",this.firstX),this.handles[2].setAttribute("x2",this.firstX)),this.handles[1].setAttribute("y1",this.getYAxis().getMaxPx()),this.handles[1].setAttribute("y2",this.serie.getY(0)),this.handles[2].setAttribute("y1",this.getYAxis().getMaxPx()),this.handles[2].setAttribute("y2",this.serie.getY(0))}}}var n=a;e.default=n},5642:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s,r=(s=i(6025))&&s.__esModule?s:{default:s};class a extends r.default{constructor(t){super(t)}createDom(){this._dom=document.createElementNS(this.graph.ns,"line"),this._dom.setAttribute("marker-end",`url(#arrow${this.graph._creation})`),this.createHandles(this.nbHandles,"rect",{transform:"translate(-3 -3)",width:6,height:6,stroke:"black",fill:"white",cursor:"nwse-resize"}),this.setStrokeColor("black"),this.setStrokeWidth(1)}}var n=a;e.default=n},2941:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s,r=(s=i(6141))&&s.__esModule?s:{default:s};class a extends r.default{constructor(t,e){super(t,e),this.nbHandles=1}get width(){return this.options.width||10}set width(t){this.options.width=t}createDom(){this._dom=document.createElementNS(this.graph.ns,"path"),this._dom.setAttribute("d",`M -${this.width/2} 0 h ${this.width} m -${this.width/2} -${this.width/2} v ${this.width}`)}createHandles(){this._createHandles(this.nbHandles,"rect",{transform:"translate(-3 -3)",width:6,height:6,stroke:"black",fill:"white",cursor:"nwse-resize"})}applyPosition(){var t=this.calculatePosition(0);if(t&&t.x&&t.y)return this.setDom("transform",`translate( ${t.x}, ${t.y})`),this.currentPos1x=t.x,this.currentPos1y=t.y,!0}redrawImpl(){this.setHandles()}handleCreateImpl(){}handleMouseDownImpl(t){return this.moving=!0,!0}handleMouseUpImpl(){return this.triggerChange(),!0}handleMouseMoveImpl(t,e,i,s,r){if(!this.isLocked()){var a=this.getFromData("pos");return this.moving&&(a.x=this.graph.deltaPosition(a.x,e,this.getXAxis()),a.y=this.graph.deltaPosition(a.y,i,this.getYAxis())),this.redrawImpl(),!0}}setHandles(){this.areHandlesInDom()&&(isNaN(this.currentPos1x)||(this.handles[1].setAttribute("x",this.currentPos1x),this.handles[1].setAttribute("y",this.currentPos1y)))}selectStyle(){this.setDom("stroke","red"),this.setDom("stroke-width","2")}}var n=a;e.default=n},5731:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=a();if(e&&e.has(t))return e.get(t);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=s?Object.getOwnPropertyDescriptor(t,r):null;n&&(n.get||n.set)?Object.defineProperty(i,r,n):i[r]=t[r]}i.default=t,e&&e.set(t,i)}(i(4167));var s,r=(s=i(6141))&&s.__esModule?s:{default:s};function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}class n extends r.default{constructor(t,e){super(t,e)}createDom(){this._dom=document.createElementNS(this.graph.ns,"ellipse")}applyPosition(){var t=this.computePosition(0);if(!t)return;this.setDom("cx",t.x||0),this.setDom("cy",t.y||0);let e=this.graph.newPosition({dx:this.getProp("rx"),dy:this.getProp("ry")||this.getProp("rx")}),i=this.calculatePosition(e);return this.setDom("rx",Math.abs(i.x)||0),this.setDom("ry",Math.abs(i.y)||0),!0}setR(t,e){return this.setProp("rx",t),this.setProp("ry",e),this}handleMouseUpImpl(){this.triggerChange()}handleMouseMoveImpl(t,e,i,s,r){}}var o=n;e.default=o},3172:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s,r=i(4167),a=(s=i(6141))&&s.__esModule?s:{default:s};class n extends a.default{constructor(t,e){super(t,e)}createDom(){this._dom=document.createElement("div"),this._dom.setAttribute("style","position: absolute");let t=document.createElement("div");this._dom.appendChild(t),this.div=t}createHandles(){}setHeight(t){this.setProp("height",t)}setWidth(t){this.setProp("width",t)}setContent(t){this.setProp("content",t)}setRenderer(t){this._renderer=t}redraw(){this._renderer?this._renderer(this.div):this.div.innerHTML=this.getProp("content"),super.redraw(...arguments)}applyPosition(){var t=this.calculatePosition(0);if(t&&(0,r.isNumeric)(t.x)&&(0,r.isNumeric)(t.y))return this._dom.style.left=`${t.x}px`,this._dom.style.top=`${t.y}px`,this.currentPosX=t.x,this.currentPosY=t.y,!0}handleMouseMoveImpl(t,e,i,s,r){return!0}setHandles(){}isHTML(){return!0}}var o=n;e.default=o},6141:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=o(i(8697)),r=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var a=s?Object.getOwnPropertyDescriptor(t,r):null;a&&(a.get||a.set)?Object.defineProperty(i,r,a):i[r]=t[r]}return i.default=t,e&&e.set(t,i),i}(i(4167)),a=o(i(5452));function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function o(t){return t&&t.__esModule?t:{default:t}}class h{constructor(){}init(t,e,i=!1){var s=this;if(this.graph=t,this.properties=e||{},this.handles=[],this.options=this.options||{},i||(this.group=document.createElementNS(this.graph.ns,"g"),this.getProp("noClip")||this.group.setAttribute("clip-path",`url(#_clipplot${t._creation})`),this.group.jsGraphIsShape=this),this.simplified=i,this._selected=!1,this.createDom(),this._dom&&(this._dom.jsGraphIsShape=this),this.classes=[],this.transforms=[],this._data.masker){var r=document.createElementNS(this.graph.ns,"mask");this.maskingId=Math.random(),r.setAttribute("id",this.maskingId),this.maskDomWrapper=document.createElementNS(this.graph.ns,"rect"),this.maskDomWrapper.setAttribute("fill","white"),r.appendChild(this.maskDomWrapper);var a=this._dom.cloneNode();r.appendChild(a),this.maskDom=a,this.graph.defs.appendChild(r)}let n;return this.group&&this._dom&&!this.isHTML()&&this.group.appendChild(this._dom),n=i?this._dom:this.group,n.addEventListener("mouseover",(function(t){s.handleMouseOver(t)})),n.addEventListener("mouseout",(function(t){s.handleMouseOut(t)})),n.addEventListener("mousedown",(function(t){s.graph.focus(),s.handleMouseDown(t)})),n.addEventListener("click",this.handleClick.bind(this)),n.addEventListener("dblclick",(function(t){s.handleDblClick(t)})),this.initImpl(),this.graph.emit("shapeNew",this),this}initImpl(){}getData(){return this._data}getType(){return this.type}kill(t){this._inDom&&!t&&this.graph.removeShapeFromDom(this),t||this.graph._removeShape(this),this.graph.stopElementMoving(this),this.graph.emit("shapeRemoved",this),this.emit("removed",this),this._inDom=!1}hide(){return this.hidden||(this.hidden=!0,this.isHTML()||this.simplified?this._dom.style.display="none":this.group.style.display="none"),this}isHidden(){return this.hidden}isVisible(){return!this.hidden}show(){return this.hidden?(this.hidden=!1,this.isHTML()?this._dom.style.display="initial":this.group.style.display="initial",this.redraw(),this):this}addClass(t){return this.classes=this.classes||[],-1==this.classes.indexOf(t)&&this.classes.push(t),this.makeClasses(),this}removeClass(t){return this.classes.splice(this.classes.indexOf(t),1),this.makeClasses(),this}makeClasses(){return this._dom&&this._dom.setAttribute("class",this.classes.join(" ")),this}changed(t,e){return t&&(this.graph.emit(t,this,e),this.emit(t,this,e)),this.emit("changed",this,e),this.graph.emit("shapeChanged",this,e),this}setEventReceptacle(){if(!simplified){this.rectEvent||(this.rectEvent=document.createElementNS(this.graph.ns,"rect"),this.rectEvent.setAttribute("pointer-events","fill"),this.rectEvent.setAttribute("fill","transparent"),this.group.appendChild(this.rectEvent),this.rectEvent.jsGraphIsShape=this);var t=this.group.getBBox();this.rectEvent.setAttribute("x",t.x),this.rectEvent.setAttribute("y",t.y-10),this.rectEvent.setAttribute("width",t.width),this.rectEvent.setAttribute("height",t.height+20)}}setSerie(t){if(t){if(this.serie=t,!t.getXAxis||!t.getYAxis)throw console.error(t),"Serie does not implement the getXAxis or getYAxis method";return this.xAxis=t.getXAxis(),this.yAxis=t.getYAxis(),this}}getSerie(){return this.serie}autoAxes(){return this.xAxis||(this.xAxis=this.graph.getXAxis()),this.yAxis||(this.yAxis=this.graph.getYAxis()),this}setXAxis(t){return this.xAxis=t,this}setYAxis(t){this.yAxis=t}getXAxis(){return this.xAxis||this.autoAxes(),this.xAxis}getYAxis(){return this.yAxis||this.autoAxes(),this.yAxis}setLayer(t){return this.setProp("layer",t),this}getLayer(){var t=this.getProp("layer");return void 0!==t?t:1}draw(t,e){return this._inDom&&!t||(this.appendToDom(),this._inDom=!0),this.makeLabels(),e||this.redraw(),this.applyStyle(),this}redraw(){return this.hidden?this:(this.position=this.applyPosition(),this.redrawImpl(),this.position?(this.updateLabels(),this._applyTransforms(),this):(this.updateLabels(),this))}redrawImpl(){}setProperties(t){this.properties=t,Array.isArray(this.properties.position)||(this.properties.position=[this.properties.position]);for(var e=this,i=0,r=this.properties.position.length;i<r;i++){var a=s.default.check(this.properties.position[i],(function(t){return e.getRelativePosition(t)}));this.properties.position[i]=a}return this.emit("propertiesChanged"),this}getRelativePosition(t){var e;return null!==(e=/position([0-9]*)/.exec(t))?this.getPosition(e[1]):null!==(e=/labelPosition([0-9]*)/.exec(t))?this.getLabelPosition(e[1]):void 0}getProperties(t){return this.properties}setProp(t,e,i){return this.properties=this.properties||{},void 0!==i?(this.properties[t]=this.properties[t]||[],this.properties[t][i||0]=e):this.properties[t]=e,this.emit("propertyChanged",t),this}getProp(t,e){return null==e?this.properties[t]:(this.properties[t]||[])[e||0]}getProps(t,e){return this.properties[t]||[]}addProp(t,e){this.properties[t]=this.properties[t]||[],this.properties[t].push(e)}resetProp(t){this.properties[t]=[]}setDom(t,e,i){this._cachedDOM=this._cachedDOM||{},this._cachedDOM[t]!=e&&this._dom&&(i&&r.hasSavedAttribute(this._dom,t)||(this._dom.setAttribute(t,e),this._cachedDOM[t]=e))}setDomGroup(t,e){this.simplified?this._dom.setAttribute(t,e):this.group&&this.group.setAttribute(t,e)}setStrokeColor(t){return this.setProp("strokeColor",t),this.overwriteSavedProp("stroke",t),this.applySelectedStyle(),this}getStrokeColor(){return this.getProp("strokeColor")}setFillColor(t){return this.setProp("fillColor",t),this.overwriteSavedProp("fill",t),this.applySelectedStyle(),this}getFillColor(){return this.getProp("fillColor")}setFillOpacity(t){return this.setProp("fillOpacity",t),this.overwriteSavedProp("fill-opacity",t),this.applySelectedStyle(),this}setStrokeWidth(t){return this.setProp("strokeWidth",t),this.overwriteSavedProp("stroke-width",t),this.applySelectedStyle(),this}getStrokeWidth(){return this.getProp("strokeWidth")}setStrokeDasharray(t){return this.setProp("strokeDasharray",t),this.overwriteSavedProp("stroke-dasharray",t),this.applySelectedStyle(),this}setAttributes(t){return this.setProp("attributes",t),this}overwriteSavedProp(t,e){r.overwriteDomAttribute(this._dom,t,e)}addAttribute(t,e){var i={};return i[t]=e,this.addProp("attributes",i),this}addTransform(t,e){return this.addProp("transforms",{type:t,arguments:Array.isArray(e)?e:[e]}),this}addTransformRotate(t,e,i,s="degrees"){return this.addProp("transforms",{type:"rotate",arguments:{center:{x:e,y:i},angle:t,angleType:s}}),this}resetTransforms(){return this.resetProp("transforms"),this}setLabelText(t,e=0){return this.setProp("labelText",t,e),this}setLabelData(t,e,i=0){return this.setProp("labelData",e,i),this}getLabelText(t,e=0){return this.getProp("labelText",e)}displayLabel(t=0){return this.setProp("labelVisible",!0,t),this}hideLabel(t=0){return this.setProp("labelVisible",!1,t),this}setLabelColor(t,e=0){return this.setProp("labelColor",t,e),this}setLabelFontSize(t,e=0){return this.setProp("labelFontSize",t,e),this}getLabelPosition(t=0){return this.getProp("labelPosition",t)}setLabelPosition(t,e){var i=s.default.check(t,(function(t){return(void 0).getRelativePosition(t)}));return this.setProp("labelPosition",i,e||0),this}setLabelAngle(t,e){return this.setProp("labelAngle",t,e||0),this}setLabelBaseline(t,e){return this.setProp("labelBaseline",t,e||0),this}setLabelAnchor(t,e){return this.setProp("labelAnchor",t,e||0),this}setLabelSize(t,e){return this.setProp("labelSize",t,e||0),this}setLabelStrokeColor(t,e){return this.setProp("labelStrokeColor",t,e||0),this}setLabelStrokeWidth(t,e){return this.setProp("labelStrokeWidth",t,e||0),this}setLabelBackgroundColor(t,e){return this.setProp("labelBackgroundColor",t,e||0),this}setLabelBackgroundOpacity(t,e){return this.setProp("labelBackgroundOpacity",t,e||0),this}applyGenericStyle(){this.setDom("fill",this.getProp("fillColor"),!0),this.setDom("fill-opacity",this.getProp("fillOpacity"),!0),this.setDom("stroke",this.getProp("strokeColor"),!0),this.setDom("stroke-width",this.getProp("strokeWidth"),!0),this.setDom("stroke-dasharray",this.getProp("strokeDasharray"),!0);for(var t=this.getProps("attributes"),e=0,i=t.length;e<i;e++)for(var s in t[e])this.setDom(s,"function"==typeof t[e][s]?t[e][s].call(this,s):t[e][s],!0);return this._applyTransforms(),this}applyStyle(){return this.applyGenericStyle()}calculatePosition(t){var e;if(e=t instanceof s.default?t:this.getPosition(t))return e&&e.compute?e.compute(this.graph,this.getXAxis(),this.getYAxis(),this.getSerie()):void this.graph.throw()}getPosition(t){var e=this.getProp("position",t||0);if(null!=e)return this.setProp("position",e=s.default.check(e),t),e}setPosition(t,e){var i=this,r=s.default.check(t,(function(t){return i.getRelativePosition(t)}));return this.setProp("position",r,e||0)}sortPositions(t){return this.getProps("position").sort(t),this}_applyTransforms(){var t=this.getProps("transforms"),e="";if(t&&0!=(t=Array.isArray(t)?t:[t]).length){for(var i=0;i<t.length;i++){let a;switch(e+=`${t[i].type}(`,t[i].type){case"translate":a=t[i].arguments?t[i].arguments[0].compute(this.graph,this.getXAxis(),this.getYAxis(),this.getSerie()):s.default.check(t[i].value).compute(this.graph,this.getXAxis(),this.getYAxis(),this.getSerie()),e+=a.x||a.dx||0,e+=", ",e+=a.y||a.dy||0;break;case"rotate":let n;if(t[i].arguments)e+=t[i].arguments[0],e+=", ",1==t[i].arguments.length?e+=`${(r=this.computePosition(0)).x}, ${r.y}`:(e+=s.default.getDeltaPx(t[i].arguments[1],this.getXAxis()).replace("px",""),e+=", ",e+=s.default.getDeltaPx(t[i].arguments[2],this.getYAxis()).replace("px",""));else{if("angleData"==t[i].angleType){let e,s;this.serie?(e=this.serie.getXAxis(),s=this.serie.getYAxis()):(e=this.graph.getXAxis(),s=this.graph.getYAxis()),n=180*Math.atan(Math.tan(t[i].angle*Math.PI/180)*e.getRelVal(1)/s.getRelVal(1))/Math.PI}else n=t[i].angle;if(e+=n,t[i].center){const r=s.default.check(t[i].center).compute(this.graph,this.getXAxis(),this.getYAxis(),this.getSerie());r.x==r.x&&r.y==r.y&&(e+=", ",e+=r.x,e+=", ",e+=r.y)}else{var r;e+=`, ${(r=this.computePosition(0)).x}, ${r.y}`}}}e+=") "}return this.setDomGroup("transform",e),this}}makeLabels(){if(!this.simplified){this._labels=this._labels||[],this._labelsBackground=this._labelsBackground||[],this._labels.map((t=>{this.group.removeChild(t)})),this._labelsBackground.map((t=>{this.group.removeChild(t)})),this._labels=[],this._labelsBackground[t]=[];for(var t=0;void 0!==this.getProp("labelText",t);)this._labels[t]||(this._labels[t]=document.createElementNS(this.graph.ns,"text"),this._labels[t].setAttribute("data-label-i",t),this._labels[t].jsGraphIsShape=this,this._labelsBackground[t]=document.createElementNS(this.graph.ns,"rect"),this._labelsBackground[t].setAttribute("data-label-i",t),this._labelsBackground[t].jsGraphIsShape=this,this.group.appendChild(this._labelsBackground[t]),this.group.appendChild(this._labels[t]),this._labels[t].addEventListener("dblclick",(t=>{t.stopPropagation(),this.labelDblClickListener(t)})),this._labelsBackground[t].addEventListener("dblclick",(t=>{t.stopPropagation(),this.labelDblClickListener(t)}))),Array.isArray(this.getProp("labelText",t)),t++;return this.updateLabels(),console.log(this._labels),this}}isLabelEditable(t){return this.getProp("labelEditable",t||0)}updateLabels(){this._labels=this._labels||[];for(var t=0,e=this._labels.length;t<e;t++)this._applyLabelData(t)}_applyLabelData(t){if(t=t||0,!1===this.getProp("labelVisible",t))return this._labels[t].setAttribute("display","none"),void this._labelsBackground[t].setAttribute("display","none");this._labels[t].setAttribute("display","initial"),this._labelsBackground[t].setAttribute("display","initial");var e=this.calculatePosition(s.default.check(this.getProp("labelPosition",t)));if(!e||isNaN(e.x)||isNaN(e.y)||!1===e.y||!1===e.x)return;"NaNpx"==e.x||isNaN(e.x)||"NaN"===e.x||!1===e.x||(this._labels[t].setAttribute("x",e.x),this._labels[t].setAttribute("y",e.y));var i=this.getProp("labelAngle",t)||0;if(0!=i){var r=this._labels[t].getAttribute("x"),a=this._labels[t].getAttribute("y");this._labels[t].setAttribute("transform",`rotate(${i} ${r} ${a})`)}let n=this.getProp("labelHTMLData",t)||{};for(var o in n)this._labels[t].setAttribute(o,n[o]),this._labelsBackground[t].setAttribute(o,n[o]);this._labels[t].setAttribute("dominant-baseline",this.getProp("labelBaseline",t)||"no-change"),this._labels[t].textContent=this.getProp("labelText",t),this._labels[t].setAttribute("fill",this.getProp("labelColor",t)||"black"),this.getProp("labelSize",t)&&this._labels[t].setAttribute("font-size",`${this.getProp("labelSize",t)||12}px`),this._labels[t].setAttribute("text-anchor",this._getLabelAnchor(t)),this._labels[t].setAttribute("stroke",this.getProp("labelStrokeColor",t)||"black"),this._labels[t].setAttribute("stroke-width",this.getProp("labelStrokeWidth",t)||"0px"),this._labels[t].setAttribute("stroke-location","outside");let h=this._labels[t].getBBox();return this._labelsBackground[t].setAttribute("x",h.x),this._labelsBackground[t].setAttribute("y",h.y),this._labelsBackground[t].setAttribute("width",h.width),this._labelsBackground[t].setAttribute("height",h.height),this._labelsBackground[t].setAttribute("fill",this.getProp("labelBackgroundColor")||"transparent"),this._labelsBackground[t].setAttribute("fill-opacity",this.getProp("labelBackgroundOpacity")||1),this}emptyLabels(){for(var t=0,e=this._labels.length;t<e;t++)this._labels[t].textContent="";return this}_getLabelAnchor(t){var e=this.getProp("labelAnchor",t);switch(e){case"middle":case"start":case"end":return e;case"right":return"end";case"left":default:return"start"}}isSelected(){return this._selectStatus||!1}hasHandles(t){return void 0!==t&&this.setProp("handles",t),!!this.getProp("handles")||!!this.getProp("staticHandles")}addHandles(){if(!this.simplified&&!this.isLocked()){if(!this.handlesInDom){this.handlesInDom=!0;for(var t=1;t<this.handles.length;t++)this.handles[t]&&this.group.appendChild(this.handles[t])}return this}}removeHandles(){this.hideHandles(),this.handles=[]}hideHandles(){if(!this.handlesInDom)return this;if(!this.simplified){for(var t=1;t<this.handles.length;t++)this.group.removeChild(this.handles[t]);return this.handlesInDom=!1,this}}areHandlesInDom(){return this.handlesInDom}_select(t){if(!this.isSelectable())return!1;this.appendToDom(),this._selectStatus=!0,this.applySelectedStyle(),this.hasHandles()&&!this.hasStaticHandles()&&(this.addHandles(),this.setHandles()),t||this.graph.emit("shapeSelected",this)}applySelectedStyle(){if(this._selectStatus){var t=this.getSelectStyle(),e={};for(var i in t)"function"==typeof t[i]?e[i]=t[i].call(this):e[i]=t[i];r.saveDomAttributes(this._dom,e,"select")}}_unselect(t){this._selectStatus=!1,r.restoreDomAttributes(this._dom,"select"),this.hasHandles()&&!this.hasStaticHandles()&&this.hideHandles(),t||this.graph.emit("shapeUnselected",this)}getSelectStyle(){return this.selectStyle}setSelectStyle(t){return this.selectStyle=t,this.applySelectedStyle(),this}setStaticHandles(t){this.setProp("staticHandles",t)}hasStaticHandles(t){return!!this.getProp("staticHandles")}_createHandles(t,e,i,s){if(!(this.handles&&this.handles.length>0)){for(var r=1,a=t;r<=a;r++)(t=>{var r=this,a=document.createElementNS(r.graph.ns,e);if(a.jsGraphIsShape=!0,i)for(var n in i)a.setAttribute(n,i[n]);a.addEventListener("mousedown",(e=>{r.isResizable()&&(e.preventDefault(),e.stopPropagation(),r.graph.emit("beforeShapeResize",r),this.emit("beforeShapeResize"),r.graph.prevent(!1)||(r.resizing=!0,r.handleSelected=t,r.handleMouseDown(e)))})),s&&s(r.handles[t]),r.handles[t]=a}).call(this,r);return this.handles}}createHandles(){this.hasStaticHandles()&&(this.addHandles(),this.setHandles())}handleMouseDownImpl(){}handleMouseMoveImpl(){}handleMouseUpImpl(){}handleCreateImpl(){}handleMouseDown(t){if(!this.isLocked())return(this.isMovable()||this.isResizable())&&this.graph.elementMoving(this),this.getProp("selectOnMouseDown")&&this.graph.selectShape(this),this.isMovable()&&(this.resizing||(this.graph.emit("beforeShapeMove",self),this.graph.prevent(!1)||(this.moving=!0,this.moved=!1))),this._mouseCoords=this.graph._getXY(t),this.handleMouseDownImpl(t,this._mouseCoords)}handleClick(t){if(this.graph.emit("shapeClicked",this),this.emit("shapeClicked"),!this.isSelectable())return!1;t.shiftKey||this.graph.unselectShapes(),this.getProp("selectOnClick")&&this.graph.selectShape(this)}handleMouseMove(t){if(!this.resizing&&!this.moving||this.isSelected()||this.graph.selectShape(this),this.graph.emit("beforeShapeMouseMove",this),this.emit("beforeShapeMouseMove"),this.graph.prevent(!1)||!this._mouseCoords)return!1;this.moved=!0;var e=this.graph._getXY(t),i=this.getXAxis().getRelVal(e.x-this._mouseCoords.x),s=this.getYAxis().getRelVal(e.y-this._mouseCoords.y);return 0==i&&0===s||(this.preventUnselect=!0),this._mouseCoords=e,this.handleMouseMoveImpl(t,i,s,e.x-this._mouseCoords.x,e.y-this._mouseCoords.y)}handleMouseUp(t){return this.moving&&this.moved&&(this.graph.emit("shapeMoved",this),this.emit("shapeMoved")),(this.handleSelected||this.resize)&&(this.graph.emit("shapeResized",this),this.emit("shapeResized")),this.moving=!1,this.resizing=!1,this.handleSelected=!1,this.graph.elementMoving(!1),this.handleMouseUpImpl(t)}handleDblClick(t){}handleMouseOver(){this.getProp("highlightOnMouseOver")&&(this.moving||this.resizing||this.highlight()),this.graph.emit("shapeMouseOver",this)}handleMouseOut(){this.getProp("highlightOnMouseOver")&&this.unHighlight(),this.graph.emit("shapeMouseOut",this)}lock(){return this.setProp("locked",!0),this}unlock(){return this.setProp("locked",!1),this}isLocked(){return this.getProp("locked")||this.graph.shapesLocked}movable(t){this.setProp("movable",!0)}unmovable(){return this.setProp("movable",!1),!1}isMovable(){return this.getProp("movable")}resizable(){this.setProp("resizable",!0)}unresizable(){this.setProp("resizable",!1)}isResizable(){return this.getProp("resizable")}selectable(){this.setProp("selectable",!0)}unselectable(){this.graph.unselectShape(this),this.setProp("selectable",!1)}isSelectable(){return this.getProp("selectable")}highlight(t,e){return t||(t=this.getHighlightAttributes()),e||(e="highlight"),r.saveDomAttributes(this._dom,t,e),this.highlightImpl(),this}unHighlight(t){return t||(t="highlight"),r.restoreDomAttributes(this._dom,t),this.unHighlightImpl(),this}highlightImpl(){}unHighlightImpl(){}getHighlightAttributes(){return this._highlightAttributes}setHighlightAttributes(t){return this._highlightAttributes=t,this}getMaskingID(){return this.maskingId}maskWith(t){const e=t.getMaskingID();e?this._dom.setAttribute("mask",`url(#${e})`):this._dom.removeAttribute("mask")}updateMask(){}labelDblClickListener(t){var e=parseInt(t.target.getAttribute("data-label-i")),i=this;if(isNaN(e))return;if(!this.isLabelEditable(e))return;t.preventDefault(),t.stopPropagation();var s=document.createElement("input");s.setAttribute("type","text"),s.setAttribute("value",i.getProp("labelText",e)),i.graph.wrapper.prepend(s),s.select(),r.setCSS(s,{position:"absolute",marginTop:parseInt(t.target.getAttribute("y").replace("px",""))+this.graph.getPaddingTop()-10+"px",marginLeft:parseInt(t.target.getAttribute("x").replace("px",""))+this.graph.getPaddingLeft()-50+"px",textAlign:"center",width:"100px"});const a=i.getLabelText(e),n=function(){i.setLabelText(s.value,e),i._labels[e].textContent=s.value;const t=s.value;s.remove(),s.removeEventListener("blur",n),s=!1,i.changed("shapeLabelChanged",{previousValue:a,nextValue:t})};s.addEventListener("blur",n),s.addEventListener("keyup",(function(t){13===t.keyCode&&n()})),s.addEventListener("keypress",(function(t){t.stopPropagation()})),s.addEventListener("keydown",(function(t){t.stopPropagation()})),s.focus()}appendToDom(){return this._forcedParentDom?this._forcedParentDom.appendChild(this.group):this.graph.appendShapeToDom(this),this}forceParentDom(t){return this._forcedParentDom=t,this}isHTML(){return!1}}h.prototype.computePosition=h.prototype.calculatePosition,h.prototype.showLabel=h.prototype.displayLabel,h.prototype.remove=h.prototype.kill,(0,a.default)(h,"shape");var l=h;e.default=l},3669:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s,r=(s=i(6141))&&s.__esModule?s:{default:s};class a extends r.default{constructor(t,e){super(t,e)}createDom(){return!1}applyPosition(){return!0}}var n=a;e.default=n},6025:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s,r=(s=i(6141))&&s.__esModule?s:{default:s};class a extends r.default{constructor(t,e){super(t,e)}createDom(){this._dom=document.createElementNS(this.graph.ns,"line"),this.getStrokeColor()||this.setStrokeColor("black"),void 0===this.getStrokeWidth()&&this.setStrokeWidth(1)}createHandles(){this._createHandles(2,"rect",{transform:"translate(-3 -3)",width:6,height:6,stroke:"black",fill:"white",cursor:"nwse-resize"})}applyPosition(){var t=this.calculatePosition(0),e=this.calculatePosition(1);if(t&&t.x&&t.y)return this.setDom("x2",t.x),this.setDom("y2",t.y),this.setDom("y1",e.y),this.setDom("x1",e.x),this.currentPos2x=e.x,this.currentPos2y=e.y,this.currentPos1x=t.x,this.currentPos1y=t.y,!0}handleMouseMoveImpl(t,e,i,s,r){if(!this.isLocked()){var a,n=this.getPosition(0),o=this.getPosition(1);if(1==this.handleSelected?a=n:2==this.handleSelected&&(a=o),a&&(this._data.vertical||a.deltaPosition("x",e,this.getXAxis()),this._data.horizontal||a.deltaPosition("y",i,this.getYAxis())),this.moving&&(console.log(this._data),n.x&&!this._data.noX&&n.deltaPosition("x",e,this.getXAxis()),n.y&&!this._data.noY&&n.deltaPosition("y",i,this.getYAxis()),o.x&&!this._data.noX&&o.deltaPosition("x",e,this.getXAxis()),o.y&&!this._data.noY&&o.deltaPosition("y",i,this.getYAxis())),this._data.forcedCoords){var h=this._data.forcedCoords;void 0!==h.y&&("function"==typeof h.y?o.y=n.y=h.y(this):(o.y=h.y,n.y=h.y)),void 0!==h.x&&("function"==typeof h.x?o.x=n.x=h.x(this):(o.x=h.x,n.x=h.x))}return this.rectEvent&&this.setEventReceptacle(),this.redraw(),this.changed(),this.setHandles(),!0}}setHandles(){this.areHandlesInDom()&&(isNaN(this.currentPos1x)||(this.handles[1].setAttribute("x",this.currentPos1x),this.handles[1].setAttribute("y",this.currentPos1y),this.handles[2].setAttribute("x",this.currentPos2x),this.handles[2].setAttribute("y",this.currentPos2y)))}setEventReceptacle(){this.currentPos1x&&(this.rectEvent||(this.rectEvent=document.createElementNS(this.graph.ns,"line"),this.rectEvent.setAttribute("pointer-events","stroke"),this.rectEvent.setAttribute("stroke","transparent"),this.rectEvent.jsGraphIsShape=this,this.group.appendChild(this.rectEvent)),this.rectEvent.setAttribute("x1",this.currentPos1x),this.rectEvent.setAttribute("y1",this.currentPos1y),this.rectEvent.setAttribute("x2",this.currentPos2x),this.rectEvent.setAttribute("y2",this.currentPos2y),this.rectEvent.setAttribute("stroke-width",this.getProp("strokeWidth")+2))}}var n=a;e.default=n},6186:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,r(i(8697));var s=r(i(6141));function r(t){return t&&t.__esModule?t:{default:t}}class a extends s.default{constructor(t,e){super(t,e),this.nbHandles=2}createDom(){this._dom=document.createElementNS(this.graph.ns,"path"),this._domShadow=document.createElementNS(this.graph.ns,"path"),this._domShadow.jsGraphIsShape=this,this._dom.setAttribute("pointer-events","stroke"),this._domShadow.setAttribute("pointer-events","stroke"),this._domShadow.setAttribute("stroke-width","12"),this._domShadow.setAttribute("fill","transparent"),this._domShadow.setAttribute("stroke","transparent"),this.group.appendChild(this._domShadow)}initImpl(){this.setFillColor("transparent"),this.setStrokeColor("black")}createHandles(){this._createHandles(2,"rect",{transform:"translate(-3 -3)",width:6,height:6,stroke:"black",fill:"white"}),this.handles[1].setAttribute("fill","red")}xor(t,e){return t&&!e||!t&&e}applyPosition(){let t,e,i,s,r,a=this.getAxis(),n=[],o="",h=this.getProp("baseLine",0)||300;if(!this.serie)throw"No serie exists for this shape";let l=this.getPosition(0),u=this.getPosition(1);if(l.x<this.serie.getXAxis().getCurrentMin()&&u.x<this.serie.getXAxis().getCurrentMin()||l.x>this.serie.getXAxis().getCurrentMax()&&u.x>this.serie.getXAxis().getCurrentMax())return this.setDom("d",""),this._domShadow.setAttribute("d",""),this.hideLabel(0),!1;this.showLabel(0);let d,p=0,g=this.serie.getWaveform();if(!g)return;let c,f,m,x,y,b,v,M,A,S=g.getIndexFromX(l[a],!0,Math.floor),_=g.getIndexFromX(u[a],!0,Math.ceil),k=!1;S==_&&("aggregate"==g.getReductionType()?_+=4:_++),_<S&&(c=S,S=_,_=c,k=!0),g.getDataInUse();let w,P,L,C=!0;for("aggregate"==g.getReductionType()&&(C=!1),g.getXMonotoneousAscending()||(g.getXMonotoneousAscending(),0)?(d=_,w=!0,P=-1):(d=S,w=!1,P=1);w?d>=S:d<=_;d+=P)i=g.getX(d,!0),s=g.getY(d,!0),t=this.serie.getX(i),e=this.serie.getY(s),p+=g.getY(d,!0),f||(f=t,m=e,x=g.getX(d),y=g.getY(d)),null!=b?(b=t,M=e,n.push([t,e,p]),v=i):(b=t,M=e,v=g.getX(d),A=g.getY(d));if(v=!1,A=!1,b=!1,M=!1,0==p&&(p=1),this._sumVal=g.integrate(l.x,u.x),r=this.ratio?this.ratio*(this.sumVal/p):200/p,0!=n.length){for(var T=0,E=n.length;T<E;T++){if(L=h-n[T][2]*r,T>0&&(n[T-1][2]>p/2&&n[T][2]<=p/2||n[T-1][2]<p/2&&n[T][2]>=p/2)){let t=h-(n[T-1][2]+n[T][2])/2*r;this.setPosition({x:`${n[T][0]}px`,y:`${t}px`},3),this.setLabelPosition(this.getPosition(3),0)}o+=` L ${n[T][0]}, ${L} `,this.lastPointX=n[T][0],this.lastPointY=L}return this.points=n,this._sum=p,o=this.serie.isFlipped()?` M ${h}, ${f} ${o}`:` M ${f}, ${h} ${o}`,this.firstPointX=f,this.firstPointY=h,this.setDom("d",o),this._domShadow.setAttribute("d",o),this.firstX=f,this.firstY=m,this.serie.ratioLabel&&this.updateIntegralValue(this.serie.ratioLabel)||this.updateLabels(),this.changed(),this.handleCondition=!this.xor(-1==P,k),this.setHandles(),this.updateIntegralValue(),!0}}updateIntegralValue(t=this.serie.ratioLabel,e){return console.log(t),t&&(this.serie.ratioLabel=t),isNaN(e)||isNaN(this.sumVal)||!this.sumVal||(this.serie.ratioLabel=e/this.sumVal),this.setLabelText(t?(Math.round(100*this.sumVal*t)/100).toPrecision(3):"N/A",0),this.updateLabels(),this.serie.ratioLabel}getAxis(){return this._data.axis||"x"}set ratio(t){this._ratio=t}get ratio(){return this._ratio}get sum(){return this._sum}get sumVal(){return this._sumVal}selectStyle(){this.setDom("stroke-width","2px")}selectHandles(){}setHandles(){null!=this.points&&this.isSelected()&&(this.addHandles(),this.handleCondition?(this.handles[1].setAttribute("x",this.firstPointX),this.handles[1].setAttribute("y",this.firstPointY),this.handles[2].setAttribute("x",this.lastPointX),this.handles[2].setAttribute("y",this.lastPointY)):(this.handles[2].setAttribute("x",this.firstPointX),this.handles[2].setAttribute("y",this.firstPointY),this.handles[1].setAttribute("x",this.lastPointX),this.handles[1].setAttribute("y",this.lastPointY)))}handleMouseMoveImpl(t,e,i,s,r){if(!this.isLocked()){var a,n=this.getPosition(0),o=this.getPosition(1);return 1==this.handleSelected?a=n:2==this.handleSelected&&(a=o),a&&(this._data.vertical||a.deltaPosition("x",e,this.getXAxis())),this.moving&&(n.x&&n.deltaPosition("x",e,this.getXAxis()),o.x&&o.deltaPosition("x",e,this.getXAxis())),this.rectEvent&&this.setEventReceptacle(),this.redraw(),this.changed(),!0}}}var n=a;e.default=n},7493:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s,r=(s=i(6025))&&s.__esModule?s:{default:s};class a extends r.default{constructor(t){super(t),this.lineHeight=6}createDom(){this._dom=document.createElementNS(this.graph.ns,"line"),this.line1=document.createElementNS(this.graph.ns,"line"),this.line2=document.createElementNS(this.graph.ns,"line"),this.line3=document.createElementNS(this.graph.ns,"line"),this.rectBoundary=document.createElementNS(this.graph.ns,"path"),this.rectBoundary.setAttribute("fill","transparent"),this.rectBoundary.setAttribute("stroke","none"),this.rectBoundary.setAttribute("pointer-events","fill"),this.rectBoundary.jsGraphIsShape=!0,this.group.appendChild(this.rectBoundary),this.group.appendChild(this.line1),this.group.appendChild(this.line2),this.group.appendChild(this.line3),this._dom.element=this}createHandles(){this._createHandles(3,"rect",{transform:"translate(-3 -3)",width:6,height:6,stroke:"black",fill:"white",cursor:"nwse-resize"})}redrawImpl(){this.line1.setAttribute("stroke",this.getStrokeColor()),this.line2.setAttribute("stroke",this.getStrokeColor()),this.line3.setAttribute("stroke",this.getStrokeColor()),this.line1.setAttribute("stroke-width",this.getStrokeWidth()),this.line2.setAttribute("stroke-width",this.getStrokeWidth()),this.line3.setAttribute("stroke-width",this.getStrokeWidth()),this.setHandles(),this.redrawLines()}redrawLines(){var t=this.computePosition(0),e=this.computePosition(1),i=this.computePosition(2);if(t.x&&e.x&&i.x&&this.posYPx){var s=this.lineHeight;this.rectBoundary.setAttribute("d",`M ${t.x} ${this.posYPx-s} v ${2*s} H ${e.x} v ${-2*s}z`),this.line1.setAttribute("x1",t.x),this.line1.setAttribute("x2",t.x),this.line2.setAttribute("x1",e.x),this.line2.setAttribute("x2",e.x),this.line3.setAttribute("x1",i.x),this.line3.setAttribute("x2",i.x),this._dom.setAttribute("x1",t.x),this._dom.setAttribute("x2",e.x),this.redrawY(s)}return this}redrawY(){if(!this.posYPx)return this;var t=this.lineHeight;return this.line1.setAttribute("y1",this.posYPx-t),this.line1.setAttribute("y2",this.posYPx+t),this.line2.setAttribute("y1",this.posYPx-t),this.line2.setAttribute("y2",this.posYPx+t),this.line3.setAttribute("y1",this.posYPx-t),this.line3.setAttribute("y2",this.posYPx+t),this._dom.setAttribute("y1",this.posYPx),this._dom.setAttribute("y2",this.posYPx),this}setHandles(){if(this.posYPx){var t=this.computePosition(0),e=this.computePosition(1),i=this.computePosition(2);t.x&&e.x&&i.x&&(this.handles[1].setAttribute("x",t.x),this.handles[1].setAttribute("y",this.posYPx),this.handles[2].setAttribute("x",e.x),this.handles[2].setAttribute("y",this.posYPx),this.handles[3].setAttribute("x",i.x),this.handles[3].setAttribute("y",this.posYPx))}}setY(t){return this.posYPx=t,this}setLineHeight(t){this.lineHeihgt=t}handleMouseMoveImpl(t,e,i){if(!this.isLocked()){var s=this.getPosition(0),r=this.getPosition(1),a=this.getPosition(2);switch(this.handleSelected){case 1:s.deltaPosition("x",e,this.getXAxis()),(Math.abs(a.x-r.x)>Math.abs(r.x-s.x)||Math.abs(a.x-s.x)>Math.abs(r.x-s.x))&&(a.x=s.x+.1*(r.x-s.x));break;case 2:r.deltaPosition("x",e,this.getXAxis()),(Math.abs(a.x-r.x)>Math.abs(r.x-s.x)||Math.abs(a.x-s.x)>Math.abs(r.x-s.x))&&(a.x=r.x+.1*(s.x-r.x));break;case 3:if(a.deltaPosition("x",e,this.getXAxis()),Math.abs(a.x-r.x)>Math.abs(r.x-s.x)||Math.abs(a.x-s.x)>Math.abs(r.x-s.x))return}this.setLabelPosition({y:this.getLabelPosition(0).y,x:a.x}),this.updateLabels(),this.redrawLines(),this.setHandles()}}applyPosition(){return this.redrawLines(),!0}}var n=a;e.default=n},8644:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s,r=(s=i(8342))&&s.__esModule?s:{default:s};class a extends r.default{constructor(t,e){super(t,e),this.nbHandles=4}createDom(){this._dom=document.createElementNS(this.graph.ns,"rect"),this._dom.element=this,this.createHandles(this.nbHandles,"rect",{transform:"translate(-3 -3)",width:6,height:6,stroke:"black",fill:"white",cursor:"nwse-resize"})}redrawImpl(){this.setPosition(),this.setHandles(),this.setBindableToDom(this._dom)}}var n=a;e.default=n},2251:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s,r=(s=i(6141))&&s.__esModule?s:{default:s};class a extends r.default{constructor(t,e){super(t,e)}createDom(){this._dom=document.createElementNS(this.graph.ns,"path"),this.getStrokeColor()||this.setStrokeColor("black"),void 0===this.getStrokeWidth()&&this.setStrokeWidth(1)}createHandles(){}setPointsPx(t){return this.setProp("pxPoints",t),this}applyPosition(){let t="",e=0;for(;;){let i,s=this.getPosition(e);if(void 0===s)break;if(i=this.serie?s.compute(this.graph,this.serie.getXAxis(),this.serie.getYAxis(),this.serie):s.compute(this.graph,this.getXAxis(),this.getYAxis()),isNaN(i.x)||isNaN(i.y))return;t+=0==e?" M ":" L ",t+=`${i.x} ${i.y}`,e++}return t+="z",this.setDom("d",t),this.changed(),!0}}var n=a;e.default=n},5886:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s,r=(s=i(6141))&&s.__esModule?s:{default:s};class a extends r.default{constructor(t,e){super(t,e),this.setProp("fillColor","none")}createDom(){this._dom=document.createElementNS(this.graph.ns,"path"),this.getStrokeColor()||this.setStrokeColor("black"),void 0===this.getStrokeWidth()&&this.setStrokeWidth(1)}createHandles(){}setPointsPx(t){return this}applyPosition(){let t="",e=0;for(;;){let i,s=this.getPosition(e);if(void 0===s)break;if(i=this.serie?s.compute(this.graph,this.serie.getXAxis(),this.serie.getYAxis(),this.serie):s.compute(this.graph,this.getXAxis(),this.getYAxis()),isNaN(i.x)||isNaN(i.y))return;t+=0==e?" M ":" L ",t+=`${i.x} ${i.y}`,e++}return this.setDom("d",t),this.changed(),!0}}var n=a;e.default=n},8342:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s,r=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var a=s?Object.getOwnPropertyDescriptor(t,r):null;a&&(a.get||a.set)?Object.defineProperty(i,r,a):i[r]=t[r]}return i.default=t,e&&e.set(t,i),i}(i(4167)),a=(s=i(6141))&&s.__esModule?s:{default:s};function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}class o extends a.default{constructor(t,e){super(t,e)}createDom(){return this._dom=document.createElementNS(this.graph.ns,"rect"),this.getStrokeColor()||this.setStrokeColor("black"),void 0===this.getStrokeWidth()&&this.setStrokeWidth(1),this.getFillColor()||this.setFillColor("transparent"),this}createHandles(){if(this.hasHandles()){var t=this.getProp("handles");switch("object"!=typeof t&&(t={}),t.type||(t.type="corners"),t.type){case"sides":r.extend(t,{sides:{top:!0,bottom:!0,left:!0,right:!0}});var e=0;for(var i in t.sides)t.sides[i]&&e++;for(var i in this._createHandles(e,"g").map((function(t){var e=document.createElementNS(self.graph.ns,"rect");e.setAttribute("x","-3"),e.setAttribute("width","6"),e.setAttribute("y","-6"),e.setAttribute("height","12"),e.setAttribute("stroke","black"),e.setAttribute("fill","white"),e.setAttribute("cursor","pointer"),t.appendChild(e)})),e=1,t.sides)t.sides[i]&&(this.handles[i]=this[`handle${e}`],this.sides[e]=i,e++);break;case"corners":this._createHandles(4,"rect",{transform:"translate(-3 -3)",width:6,height:6,stroke:"black",fill:"white"}),this.handles&&(this.handles[2].setAttribute("cursor","nesw-resize"),this.handles[4].setAttribute("cursor","nesw-resize"),this.handles[1].setAttribute("cursor","nwse-resize"),this.handles[3].setAttribute("cursor","nwse-resize"));break;case"seamlessX":this._createHandles(2,"rect",{transform:"translate(-3 -3)",stroke:"transparent",fill:"transparent",width:"20px",cursor:"ew-resize"})}return super.createHandles(),this}}applyPosition(){var t,e,i,s,r=this.computePosition(0),a=this.computePosition(1);if(r&&a)return r.x<a.x?(t=r.x,i=a.x-r.x):(t=a.x,i=r.x-a.x),r.y<a.y?(e=r.y,s=a.y-r.y):(e=a.y,s=r.y-a.y),this.currentX=t,this.currentY=e,this.currentW=i,this.currentH=s,!isNaN(t)&&!isNaN(e)&&!1!==t&&!1!==e&&(this.setDom("width",i),this.setDom("height",s),this.setDom("x",t),this.setDom("y",e),this.setHandles(),this.updateMask(),!0)}handleMouseMoveImpl(t,e,i,s,r){var a=this.getProp("handles");if(this.moving||this.handleSelected){var n=this.getPosition(0),o=this.getPosition(1);if(this.getXAxis().isFlipped(),this.getYAxis().isFlipped(),n.x,n.y,o.x,o.y,this.moving)n.deltaPosition("x",e,this.getXAxis()),n.deltaPosition("y",i,this.getYAxis()),o.deltaPosition("x",e,this.getXAxis()),o.deltaPosition("y",i,this.getYAxis());else switch(a.type){case"seamlessX":switch(this.handleSelected){case 1:n.deltaPosition("x",e,this.getXAxis());break;case 2:o.deltaPosition("x",e,this.getXAxis())}break;case"sides":switch(this.sides[this.handleSelected]){case"left":n.deltaPosition("x",e,this.getXAxis());break;case"right":o.deltaPosition("x",e,this.getXAxis());break;case"top":n.deltaPosition("y",i,this.getYAxis());break;case"bottom":o.deltaPosition("y",i,this.getYAxis())}break;case"corners":default:1==this.handleSelected?(n.deltaPosition("x",e,this.getXAxis()),n.deltaPosition("y",i,this.getYAxis())):2==this.handleSelected?(o.deltaPosition("x",e,this.getXAxis()),n.deltaPosition("y",i,this.getYAxis())):3==this.handleSelected?(o.deltaPosition("y",i,this.getYAxis()),o.deltaPosition("x",e,this.getXAxis())):4==this.handleSelected&&(n.deltaPosition("x",e,this.getXAxis()),o.deltaPosition("y",i,this.getYAxis()))}return this.redraw(),this.changed(),this.setHandles(),!0}}setHandles(){if(!this.isLocked()&&(this.isSelectable()||this._staticHandles)&&this.handlesInDom){var t=this.computePosition(0),e=this.computePosition(1);switch(this.getProp("handles").type){case"seamlessX":this.handles[1]&&(this.handles[1].setAttribute("transform",`translate(-10) translate(${t.x})`),this.handles[1].setAttribute("height",Math.abs(e.y-t.y)),this.handles[1].setAttribute("y",Math.min(e.y,t.y))),this.handles[2]&&(this.handles[2].setAttribute("transform",`translate(-10)  translate(${e.x})`),this.handles[2].setAttribute("height",Math.abs(e.y-t.y)),this.handles[2].setAttribute("y",Math.min(e.y,t.y)));break;case"sides":this.handles.left&&this.handles.left.setAttribute("transform",`translate(${this.currentX} ${this.currentY+this.currentH/2})`),this.handles.right&&this.handles.right.setAttribute("transform",`translate( ${this.currentX+this.currentW} ${this.currentY+this.currentH/2})`),this.handles.top&&this.handles.top.setAttribute("transform",`translate( ${this.currentX+this.currentW/2} ${this.currentY})`),this.handles.bottom&&this.handles.bottom.setAttribute("transform",`translate( ${this.currentX+this.currentW/2} ${this.currentY+this.currentH})`);break;case"corners":default:this.handles[1].setAttribute("x",t.x),this.handles[1].setAttribute("y",t.y),this.handles[2].setAttribute("x",e.x),this.handles[2].setAttribute("y",t.y),this.handles[3].setAttribute("x",e.x),this.handles[3].setAttribute("y",e.y),this.handles[4].setAttribute("x",t.x),this.handles[4].setAttribute("y",e.y)}}}}var h=o;e.default=h},1748:(t,e,i)=>{i.r(e),i.d(e,{Waveform:()=>d,WaveformHash:()=>M});var s,r=i(4167);if("undefined"==typeof URL||void 0===URL.createObjectURL||"undefined"==typeof Blob||"undefined"==typeof Worker)s=()=>{};else{var a,n={};let t=function(){onmessage=function(t){const e=t.data.data,i=t.data.maxX,s=t.data.minX,r=t.data.maxY,a=t.data.minY,n=t.data.direction;let o,h,l,u,d,p,g,c=t.data.numPoints,f=e.length,m=0,x=-4,y=[],b=[],v=[],M=[];o=t.data.xdata?function(e){return t.data.xdata[e]}:function(e){return e*t.data.xScale+t.data.xOffset};let A={};if("x"==n){const t=c/(i-s);for(;m<f;m++){if(h=Math.floor((o(m)-s)*t),y[x]!==h){x+=4,y[x]=h;let i=(h+.5)/t+s;b[x]=i,b[x+1]=i,b[x+2]=i,b[x+3]=i,v[x]=e[m],v[x+1]=e[m],v[x+2]=e[m],v[x+3]=e[m],M[x]=0}v[x+1]=Math.min(e[m],v[x+1]),v[x+2]=Math.max(e[m],v[x+2]),v[x+3]=e[m],M[x]+=e[m]}}else{const t=c/(r-a);for(;m<f;m++){if(h=Math.floor((e[m]-a)*t),y[x]!==h){x+=4,y[x]=h;let i=(h+.5)/t+a;v[x]=i,v[x+1]=i,v[x+2]=i,v[x+3]=i,b[x]=e[m],b[x+1]=e[m],b[x+2]=e[m],b[x+3]=e[m],M[x]=0}b[x+1]=Math.min(o(m),b[x+1]),b[x+2]=Math.max(o(m),b[x+2]),b[x+3]=o(m),M[x]+=o(m)}}for(A[c]={x:b,y:v,sums:M},u=v,l=b,d=M;c>256;){if(c/=2,p=[],g=[],x=0,"x"==n)for(m=0,f=u.length-8;m<f;m+=8)g[x]=(l[m]+l[m+4])/2,g[x+1]=g[x],g[x+2]=g[x],g[x+3]=g[x],p[x]=u[m],p[x+1]=Math.min(u[m+1],u[m+5]),p[x+2]=Math.max(u[m+2],u[m+6]),p[x+3]=u[m+7],M[x]=(d[m]+d[m+4])/2,x+=4;else for(m=0,f=u.length-8;m<f;m+=8)p[x]=(u[m]+u[m+4])/2,p[x+1]=p[x],p[x+2]=p[x],p[x+3]=p[x],g[x]=l[m],g[x+1]=Math.min(l[m+1],l[m+5]),g[x+2]=Math.max(l[m+2],l[m+6]),g[x+3]=l[m+7],M[x]=(d[m]+d[m+4])/2,x+=4;A[c]={x:g,y:p,sums:M},u=p,l=g,d=M,M=[]}postMessage({aggregates:A,_queueId:t.data._queueId})}}.toString();t=t.replace(/^\s*function\s*\(\s*\)\s*\{/,""),t=t.replace(/}\s*$/,"");var o=URL.createObjectURL(new Blob([t],{type:"application/javascript"}));(a=new Worker(o)).onmessage=function(t){var e=t.data._queueId;delete t.data._queueId,n[e](t.data),delete n[e]},s=function(t){var e=Date.now();t._queueId=e;var i=new Promise((t=>{n[e]=t}));return a.postMessage(t),i}}const h=s;class l{constructor(t,e,i,s){this.LMITER=100,this.LMBOOST=2,this.LMSHRINK=.1,this.LAMBDAZERO=.001,this.LAMBDAMAX=1e9,this.LMTOL=1e-12,this.BIGVAL=9e99,this.sos,this.sosprev,this.lambda,this.myH=null,this.nadj=0,this.npts=0,this.delta,this.beta,this.alpha,this.amatrix,this.myH=t,this.nadj=e,this.npts=i,this.delta=new Array(this.nadj).fill(0),this.beta=new Array(this.nadj).fill(0),this.alpha=new Array(this.nadj).fill(0),this.amatrix=new Array(this.nadj).fill(0),this.alpha=this.alpha.map((()=>new Array(this.nadj))),this.amatrix=this.amatrix.map((()=>new Array(this.nadj))),this.lambda=this.LAMBDAZERO;var r=0,a=!1;do{a=this.bLMiter(),s&&s(this.myH.params),r++}while(!a&&r<this.LMITER)}bLMiter(){for(var t=0;t<this.nadj;t++)this.delta[t]=0;if(this.sos=this.myH.nudge(this.delta),this.sos==this.BIGVAL)return console.error("  bLMiter finds faulty initial nudge()"),!1;if(this.sosprev=this.sos,this.myH.log(`  bLMiter..SumOfSquares= ${this.sos}`),!this.myH.buildJacobian())return console.error("  bLMiter finds buildJacobian()=false"),!1;for(t=0;t<this.nadj;t++){this.beta[t]=0;for(var e=0;e<this.npts;e++)this.beta[t]-=this.myH.getResidualElement(e)*this.myH.getJacobianElement(e,t)}for(t=0;t<this.nadj;t++)for(var i=0;i<this.nadj;i++)for(this.alpha[i][t]=0,e=0;e<this.npts;e++)this.alpha[i][t]+=this.myH.getJacobianElement(e,i)*this.myH.getJacobianElement(e,t);var s=0;do{for(t=0;t<this.nadj;t++)for(i=0;i<this.nadj;i++)this.amatrix[i][t]=this.alpha[i][t]+(i==t?this.lambda:0);for(this.gaussj(this.amatrix,this.nadj),t=0;t<this.nadj;t++)for(this.delta[t]=0,i=0;i<this.nadj;i++)this.delta[t]+=this.amatrix[i][t]*this.beta[i];if(this.sos=this.myH.nudge(this.delta),this.sos==this.BIGVAL)return console.error("  LMinner failed SOS step"),!1;if((s=(this.sos-this.sosprev)/(1+this.sos))<=0){this.lambda*=this.LMSHRINK;break}for(var r=0;r<this.nadj;r++)this.delta[r]*=-1;if(this.myH.nudge(this.delta),s<this.LMTOL)break;this.lambda*=this.LMBOOST}while(this.lambda<this.LAMBDAMAX);return s>-this.LMTOL||this.lambda>this.LAMBDAMAX}gaussj(t,e){var i,s,r,a,n,o,h=1,l=new Array(100),u=new Array(100);for(n=0;n<e;n++){for(i=0,r=n;r<e;r++)for(a=n;a<e;a++)Math.abs(i)<=Math.abs(t[r][a])&&(i=t[r][a],l[n]=r,u[n]=a);if(0==i)return 0;if((r=l[n])>n)for(a=0;a<e;a++)s=t[n][a],t[n][a]=t[r][a],t[r][a]=-s;if((a=u[n])>n)for(r=0;r<e;r++)s=t[r][n],t[r][n]=t[r][a],t[r][a]=-s;for(r=0;r<e;r++)r!=n&&(t[r][n]=-t[r][n]/i);for(r=0;r<e;r++)for(a=0;a<e;a++)r!=n&&a!=n&&(t[r][a]+=t[r][n]*t[n][a]);for(a=0;a<e;a++)a!=n&&(t[n][a]/=i);t[n][n]=1/i,h*=i}for(o=0;o<e;o++){if((a=l[n=e-o-1])>n)for(r=0;r<e;r++)s=t[r][n],t[r][n]=-t[r][a],t[r][a]=s;if((r=u[n])>n)for(a=0;a<e;a++)s=t[n][a],t[n][a]=-t[r][a],t[r][a]=s}return h}}function u(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class d{constructor(t=[],e=0,i=1){u(this,"xOffset",void 0),u(this,"xScale",void 0),u(this,"shift",void 0),u(this,"scale",void 0),u(this,"errors",void 0),u(this,"_originalData",[]),u(this,"_originalDataX",[]),u(this,"_xdata",void 0),u(this,"_data",[]),u(this,"minX",Number.MIN_SAFE_INTEGER),u(this,"maxX",Number.MAX_SAFE_INTEGER),u(this,"minY",Number.MIN_SAFE_INTEGER),u(this,"maxY",Number.MAX_SAFE_INTEGER),u(this,"_monotoneous",!1),u(this,"_monotoneousAscending",!1),u(this,"dataInUseType",""),u(this,"dataInUse",{x:[],y:[]}),u(this,"_typedArrayClass",void 0),u(this,"_dataAggregating",void 0),u(this,"_dataAggregated",{}),u(this,"_dataAggregationDirection",""),u(this,"unit",void 0),u(this,"xunit",void 0),this.xOffset=e,this.xScale=i,this.shift=0,this.scale=1,this.errors={nb:0,bars:{},boxes:{}},this.setData(t)}setData(t,e){return this._originalData=t,this._originalDataX=e,this._xdata=null,this.mutated(),this}getYData(){return this._data}mutated(){let t;if(Array.isArray(this._originalData[0])){let e=[],i=[];this._originalData.forEach((t=>{e.push(t[0]),i.push(t[1])})),this.setXWaveform(e),t=i}else t=this._originalData;const e=this.isNaNAllowed();let i,s=!1;return this.getTypedArrayClass()?(i=this._makeArray(t.length),t.forEach(((t,r)=>{e||t[0]==t[0]&&t[1]==t[1]||(s=!0),i[r]=t})),s&&this.warn("Trying to assign NaN values to a typed array that does not support NaNs. 0's will be used instead")):(e||t.forEach(((t,i)=>{e||t[0]==t[0]&&t[1]==t[1]||(s=!0)})),i=t),this._originalDataX&&(this._xdata?this._xdata.mutated():this.setXWaveform(this._originalDataX)),this._setData(i),this}getY(t,e=!1){return e&&this.dataInUse?this.dataInUse.y[t]*this.getScale()+this.getShift():this._data[t]*this.getScale()+this.getShift()}setXWaveform(t){if(!(t instanceof d)){if(!Array.isArray(t))throw"Cannot set X waveform. Data is not a valid array.";t=new d(t)}return this._xdata=t,this.computeXMinMax(),this}hasXWaveform(){return!!this._xdata}getXWaveform(){if(this._xdata)return this._xdata;for(var t=new d,e=0;e<this.getLength();e+=1)t.append(null,this.getX(e));return t}rescaleX(t,e){return this.xScale=e,this.xOffset=t,this.computeXMinMax(),this}getTypedArrayClass(){return this._typedArrayClass||!1}setTypedArrayClass(t){this.getTypedArrayClass()&&this.isNaNAllowed()&&!this.isNaNAllowed(t)&&this.warn(`NaN values are not allowed by the new constructor (${t.name}) while it was allowed by the previous one (${this._typedArrayClass})`),this.getTypedArrayClass()&&this.isUnsigned()&&!this.isUnsigned(t)&&this.warn("You are switching from signed values to unsigned values. You may experience data corruption if there were some negative values."),this._typedArrayClass=t,this._data&&this._setData(t.from(this._data)),this.hasXWaveform()&&this.getXWaveform().setTypedArrayClass(t)}isNaNAllowed(t=this._typedArrayClass){return t==Array||t==Float32Array||t==Float64Array}isUnsigned(t=this._typedArrayClass){return t==Uint8Array||t==Uint8ClampedArray||t==Uint16Array||t==Uint32Array}recalculateMinMaxNewPoint(t,e){(t<this.minX||void 0===this.minX)&&(this.minX=t),(t>this.maxX||void 0===this.maxX)&&(this.maxX=t),(e<this.minY||void 0===this.minY)&&(this.minY=e),(e>this.maxY||void 0===this.maxY)&&(this.maxY=e)}calculateHistogram(t,e,i){const s=Math.ceil((e-t)/i);if(e<=t||i<0||isNaN(i)||null==i)throw"xMin/xMax/dX is ill formed";const r=new Array(s);r.fill(0);const a=new Array(s);for(let e=0;e<s;e++)a[e]=t+i*e;for(let e=0;e<this.getLength();e++){let s=this.getY(e,!1);r[Math.floor((s-t)/i)]++}let n=new d;return n.setData(r,a),n}prepend(t,e){return"function"==typeof t&&(t=t(this)),"function"==typeof e&&(e=e(this)),this._xdata?this._xdata.prepend(null,t):null!==t?(this._xdata=this.getXWaveform(),this._xdata.prepend(null,t)):this.xOffset-=this.xScale,this._data.unshift(e),this.recalculateMinMaxNewPoint(t,e),this}append(t,e){return"function"==typeof t&&(t=t(this)),"function"==typeof e&&(e=e(this)),this._xdata?this._xdata.append(null,t):null!==t&&(this._xdata=this.getXWaveform(),this._xdata.append(null,t)),this._monotoneous&&(e>this._data[this._data.length-1]&&!1===this.getMonotoneousAscending()||e<this._data[this._data.length-1]&&!0===this.getMonotoneousAscending())&&(this._monotoneous=!1),1!=this._data.length&&void 0!==this._monotoneousAscending||(this._monotoneous=!0,e==this._data[0]?this._monotoneousAscending=void 0:this._monotoneousAscending=e>this._data[0]),this._data.push(e),this.recalculateMinMaxNewPoint(t,e),this}concat(t){return this._xdata||(this._xdata=this.getXWaveform()),t.xdata||(t.xdata=t.getXWaveform()),this._data=this._data.concat(t.data),this._xdata._data=this._xdata._data.concat(t.xdata._data),this.checkMonotonicity(),this._xdata.checkMonotonicity(),this.computeXMinMax(),this}_makeArray(t){const e=this.getTypedArrayClass();return e?new e(t):new Array(t)}_setData(t){const e=t.length;let i=1,s=t[1]>t[0],r=t[0],a=t[0];for(isNaN(r)&&(r=Number.MAX_VALUE),isNaN(a)&&(a=-Number.MAX_VALUE),this._monotoneous=!0;i<e;i++)t[i]!==t[i-1]&&s!==t[i]>t[i-1]&&(this._monotoneous=!1),t[i]==t[i]&&(r=Math.min(t[i],r),a=Math.max(t[i],a));this._monotoneous&&(this._monotoneousAscending=t[1]>t[0]),this._data=t,this.minY=r,this.maxY=a,this.checkMinMaxErrorBars(),this.computeXMinMax()}checkMinMaxErrorBars(){let t=this.minY,e=this.maxY,i=0,s=this.getLength();if(this.hasErrorBars()){for(i=0;i<s;i++)this._data[i]==this._data[i]&&(t=Math.min(t,this._data[i]-this.getMaxError(i,p.BELOW)),e=Math.max(e,this._data[i]+this.getMaxError(i,p.ABOVE)));this.minY=t,this.maxY=e}else this.minY=t,this.maxY=e}computeXMinMax(){if(this._data)if(this._xdata)this.minX=this._xdata.getMin(),this.maxX=this._xdata.getMax();else{const t=this.xOffset+this.xScale*this.getLength(),e=this.xOffset;this.minX=Math.min(t,e),this.maxX=Math.max(t,e)}}getDataInUse(){return this.dataInUse||this._data}getIndexFromVal(t,e=!1,i=Math.round){let s,r;return s=e&&this.dataInUse?this.dataInUse.y:this._data,r=this.getIndexFromMonotoneousData(t,s,this.getMonotoneousAscending()),e&&this.dataInUse&&"aggregateY"==this.dataInUseType?r-r%4:r}getIndexFromX(t,e=!1,i=Math.round){let s,r;return t-=this.getXShift(),!((t/=this.getXScale())<this.getDataMinX())&&!(t>this.getDataMaxX())&&(e&&this.dataInUse?s=this.dataInUse.x:this._xdata&&(s=this._xdata.getData(e)),r=this.hasXWaveform()?this.isXMonotoneous()?this._xdata.getIndexFromMonotoneousData(t,s,this._xdata.getMonotoneousAscending()):b(t,void 0,s,void 0,1,void 0):Math.max(0,Math.min(this.getLength()-1,i((t-this.xOffset)/this.xScale))),e&&this.dataInUse&&"aggregateX"==this.dataInUseType?r-r%4:r)}getIndexFromY(t,e=!1,i=Math.round){let s,r;return t-=this.getShift(),!((t/=this.getScale())<this.getDataMinY())&&!(t>this.getDataMaxY())&&(s=e&&this.dataInUse?this.dataInUse.y:this.getData(!1),r=b(void 0,t,void 0,s,1,void 0),e&&this.dataInUse&&"aggregateX"==this.dataInUseType?r-r%4:r)}setAtIndex(t,e){this._data[t]=e}getIndexFromXY(t,e,i=!1,s=Math.round,r=1,a=1){let n,o,h;return i&&this.dataInUse?(n=this.dataInUse.x,o=this.dataInUse.y):this._xdata&&(n=this._xdata._data,o=this._data),h=this.getIndexFromDataXY(t,n,e,o,r,a),i&&this.dataInUse&&"aggregateX"==this.dataInUseType?h-h%4:h}getIndexFromDataXY(t,e,i,s,r=1,a=1){return t-=this.getXShift(),t/=this.getXScale(),i-=this.getShift(),b(t,i/=this.getScale(),e,s,r,a)}getIndexFromMonotoneousData(t,e,i){if(!this.isMonotoneous())throw console.trace(),"Impossible to get the index from a non-monotoneous wave !";return t-=this.getShift(),v(t/=this.getScale(),e,!i)}findWithShortestDistance(t){if(!t.axisRef){const e=this.getIndexFromXY(t.x,t.y,!0,void 0,t.scaleX,t.scaleY);return t.xMaxDistance&&Math.abs(t.x-this.getX(e))>Math.abs(t.xMaxDistance)||t.yMaxDistance&&Math.abs(t.y-this.getY(e))>Math.abs(t.yMaxDistance)?-1:e}if("x"==t.axisRef){const e=this.getIndexFromX(t.x,!0,void 0);return t.xMaxDistance&&Math.abs(t.x-this.getX(e))>Math.abs(t.xMaxDistance)?-1:e}if("y"==t.axisRef){const e=this.getIndexFromY(t.y,!0,void 0);return t.yMaxDistance&&Math.abs(t.y-this.getY(e))>Math.abs(t.yMaxDistance)?-1:e}}getShortestDistanceToPoint(t,e,i,s){let r,a,n,o,h,l,u,d;t-=this.getXShift(),t/=this.getXScale(),e-=this.getShift();const p={x:t,y:e/=this.getScale()};for(h=0;h<this.getLength()-1;h++)u=Number.MAX_SAFE_INTEGER,d=0,r=this.getX(h),a=this.getY(h),o=this.getX(h+1),n=this.getY(h+1),i&&(r-t>i&&o-t>i||t-r>i&&t-o>i)||s&&(a-e>s&&n-e>s||e-a>s&&e-n>s)||(l=function(t,e,i){var s=A(e,i);if(0==s)return A(t,e);var r=((t.x-e.x)*(i.x-e.x)+(t.y-e.y)*(i.y-e.y))/s;return r=Math.max(0,Math.min(1,r)),A(t,{x:e.x+r*(i.x-e.x),y:e.y+r*(i.y-e.y)})}(p,{x:r,y:a},{x:o,y:n})**.5,l<u&&(u=l,d=h));return{shortestDistance:l,index:d}}getReductionType(){return this.dataInUseType}getXMin(){return this.minX*this.getXScale()+this.getXShift()}getXMax(){return this.maxX*this.getXScale()+this.getXShift()}getYMin(){return this.minY*this.getScale()+this.getShift()}getYMax(){return this.maxY*this.getScale()+this.getShift()}getMin(){return this.minY*this.getScale()+this.getShift()}getMax(){return this.maxY*this.getScale()+this.getShift()}getMinX(){return this.minX*this.getXScale()+this.getXShift()}getMaxX(){return this.maxX*this.getXScale()+this.getXShift()}getMinY(){return this.minY*this.getScale()+this.getShift()}getMaxY(){return this.maxY*this.getScale()+this.getShift()}getDataMaxX(){return this.maxX}getDataMinX(){return this.minX}getDataMaxY(){return this.maxY}getDataMinY(){return this.minY}getDataY(){return this._data}getData(t=!1){return t&&this.dataInUse?this.dataInUse.y:this._data}setShift(t=0){return this.shift=t,this}getShift(){return this.shift||0}getScale(){return this.scale||1}setScale(t=1){return this.scale=t,this}setXShift(t=0){return this.hasXWaveform?(this.getXWaveform().setShift(t),this):this}getXShift(t=0){return this.hasXWaveform?this.getXWaveform().getShift():0}setXScale(t=1){return this.hasXWaveform?(this.getXWaveform().setScale(t),this):this}getXScale(){return this.hasXWaveform?this.getXWaveform().getScale():1}getLength(){return this._data.length}getDataToUseFlat(){let t,e,i=0;if(this.dataInUse){t=this.dataInUse.x.length,e=new Array(2*t).fill(0);for(var s=0;s<t;s+=1)e[i]=this.dataInUse.x[s],e[i+1]=this.dataInUse.y[s],i+=2}else for(t=this.getLength(),e=new Array(2*t).fill(0),s=0;s<t;s+=1)e[i+1]=this._data[s],e[i]=this.getX(s),i+=2;return e}fit(t){var e=this;return new Promise((function(i,s){var a=new class{constructor(t){this.DELTAP=1e-6,this.BIGVAL=9e99,this.WEIGHT=1,this.setYData(t.dataY),this.setXData(t.dataX),this.setWeight(t.weight),this.setInitialParams(t.params),t.subsetIndex&&this.setSubset(...t.subsetIndex),this.setFunction(t.function),t.progress&&this.hookIteration(t.progress),this.options=t}setYData(t){this.data=t}setXData(t){this.dataX=t}setWeight(t){this.weight=t}setInitialParams(t){this.parms=t,this.parms=this.parms.map((t=>"function"==typeof t?t(this.data,this.dataX):t)),this.NPARMS=t.length}setSubset(t,e){void 0!==t&&void 0!==e&&(this._from=t,this._to=e)}hookIteration(t){this._hookIteration=e=>{let i=this.buildFit(e,200);t(i)}}setFunction(t){this._func=t}init(){if(void 0!==this._from&&void 0!==this._to){if(this._from>=this._to)throw"Impossible to fit negative subranges. The starting index must be lower than the ending index";if(this.NPTS=this._to-this._from+1,this.data&&this.data.getLength()<=this._to)throw`Wave Y has not enough point to be fitted to subrange [${this._from}, ${this._to}]`;if(this._from<0)throw"Impossible to fit a subrange with negative indices"}else this.NPTS=this.data.getLength(),this._from=0,this._to=this.data.getLength()-1;if(this.dataX&&this.dataX.getLength()<=this._to)throw`Wave X has not enough point to be fitted to subrange [${this._from}, ${this._to}]`;this.arrY=this.data.getDataY(),this.dataX?this.arrX=this.dataX.getDataY():this.arrX=this.data.getDataX(),this.resid=new Array(this.NPTS).fill(0),this.jac=new Array(this.NPTS).fill(0),this.jac=this.jac.map((t=>new Array(this.NPARMS)))}fit(){return this.log(`Starting the fit with initial parameter list {${this.parms.join()}};`),new l(this,this.NPARMS,this.NPTS,this._hookIteration),this.log(`Fit successful. Output parameters {${this.parms.join()}};`),this._result=this.buildFit(this.parms,200),this.options.done&&this.options.done(this.parms,this._result),this._result}func(t,e){return this._func(t,e)}computeResiduals(){for(var t=0,e=0;e<this.NPTS;e++)this.resid[e]=(this.func(this.arrX[e+this._from],this.parms)-this.arrY[e+this._from])*this.WEIGHT,t+=this.resid[e]*this.resid[e];return t}log(t){this.options.log&&console.log(t)}nudge(t){for(var e=0;e<this.NPARMS;e++)this.parms[e]+=t[e];return this.computeResiduals()}buildJacobian(){for(var t=new Array(this.NPARMS),e=.5/this.DELTAP,i=0;i<this.NPARMS;i++){for(var s=0;s<this.NPARMS;s++)t[s]=s==i?this.DELTAP:0;if(this.nudge(t)==this.BIGVAL)throw"Bad dBuildJacobian() exit 2";for(var r=0;r<this.NPTS;r++)this.jac[r][i]=this.getResidualElement(r);for(s=0;s<this.NPARMS;s++)t[s]=s==i?-2*this.DELTAP:0;if(this.nudge(t)==this.BIGVAL)throw"Bad dBuildJacobian(). exit 3";for(r=0;r<this.NPTS;r++)this.jac[r][i]-=this.getResidualElement(r);for(r=0;r<this.NPTS;r++)this.jac[r][i]*=e;for(s=0;s<this.NPARMS;s++)t[s]=s==i?this.DELTAP:0;if(this.nudge(t)==this.BIGVAL)throw"Bad dBuildJacobian(). exit 4"}return!0}getResidualElement(t){return this.resid[t]}getJacobianElement(t,e){return this.jac[t][e]}buildFit(t,e){let i;if(e){const t=this.dataX.getMin(this._from,this._to),s=this.dataX.getMax(this._from,this._to);i=new Array(e).fill(0).map(((i,r)=>r*(s-t)/(e-1)+t))}else i=this.arrX;for(var s=new Array(i.length),r=0,a=i.length;r<a;r++)s[r]=this.func(i[r],this.parms);let n=this.options.waveform;return n.setData(s,i),n}}(r.extend({},{dataY:e,dataX:e.getXWaveform(),done:function(t){i(t)},waveform:new d},t));a.init(),a.fit()}))}getX(t,e=!1){return e&&this.dataInUse?this.dataInUse.x[t]*this.getXScale()+this.getXShift():this._xdata?this._xdata._data[t]*this.getXScale()+this.getXShift():this.xOffset+t*this.xScale}getXRaw(t,e=!1){return e&&this.dataInUse?this.dataInUse.x[t]:this._xdata?this._xdata._data[t]:t}_integrateP(t=0,e=this.getLength()-1){if((t=Math.round(t))>(e=Math.round(e))){let i=t;t=e,e=i}var i=e-t+1,s=0;let r,a=0;for(var n=this.getData(!1);t<=e;t++)n.length-1>t&&(r=this.getX(t+1)-this.getX(t),a+=r,s+=n[t]*r);return[s,i,a]}integrateP(t,e){return this._integrateP(t,e)[0]}integrate(t,e){return this.integrateP(this.getIndexFromX(t),this.getIndexFromX(e))}average(t=0,e=this.getLength()-1){return this.getAverageP(t,e)}mean(){return this.average()}stddev(){let t=0,e=0;const i=this.mean();for(var s=0;s<this.getLength();s++)t+=(this.getY(s)-i)**2,e++;return(t/e)**.5}getAverageP(t,e){var i=this._integrateP(t,e);return i[0]/i[2]}getAverageX(t,e){var i=this.integrate(t,e);return i[0]/i[2]}checkMonotonicity(){let t=1,e=this.getData(!1);const i=this._data.length;let s=e[1]>e[0];for(;t<i;t++)if(e[t]!==e[t-1]&&s!==e[t]>e[t-1])return this._monotoneous=!1;return this._monotoneousAscending=e[1]>e[0],this._monotoneous=!0}requireXMonotonicity(){this._xdata&&this._xdata.requireMonotonicity()}requireMonotonicity(){if(!this.isMonotoneous())throw"The wave must be monotonic"}isMonotoneous(){return!!this._monotoneous}isXMonotoneous(){return!this._xdata||this._xdata.isMonotoneous()}invert(t){return(t||this._data).reverse(),this._xdata&&this._xdata.invert(),this.isMonotoneous()&&(this._monotoneousAscending=!this._monotoneousAscending),this}resampleForDisplay(t){let e=0;this.requireXMonotonicity();let i,s,r,a,n,o,h,l,u=!1,d=this.getDataY(),p={x:[],y:[]},g=[],c=!1,f=0;const m=this.getLength();if(!t.xPosition)throw"No position calculation method provided";if(!t.resampleToPx)throw'No "resampleToPx" method was provided. Unit: px per point';if(t.minX>t.maxX){let e=t.minX;t.minX=t.maxX,t.maxX=e}for((this._xdata&&!this._xdata.getMonotoneousAscending()||!this._xdata&&this.xScale<-0)&&(u=!0,e=m);u?e>0:e<m;u?e--:e++)if(l=this.getX(e),t.minX>l)f=e;else if(h=t.xPosition(l),c)if(Math.abs(h-o)>t.resampleToPx||e==m||0==e||isNaN(d[e])){let e=(n+l)/2;if(p.x.push(e),p.y.push(i/a),g.push(e,s,r),void 0!==t.maxX&&l>t.maxX)break;c=!1}else i+=d[e],a++,s=Math.min(s,d[e]),r=Math.max(r,d[e]);else{for(f?(p.x.push(l),p.y.push(d[f])):f=e;isNaN(d[e]);)u?e--:e++;i=s=r=d[f],a=1,o=h,n=l,f=0,c=!0}return this.dataInUseType="resampled",this.dataInUse=p,g}interpolate(t){let e,i=this.getDataY();if(this._xdata){let s=this._xdata.getData(!1);try{e=v(t,s,!this._xdata.getMonotoneousAscending())}catch(t){return NaN}return s[e]==t?i[e]:(t-s[e])/(s[e+1]-s[e])*(i[e+1]-i[e])+i[e]}{e=(t-this.xOffset)/this.xScale;let s=Math.floor(e);return(e-s)*(i[s+1]-i[s])+i[s]}}interpolateIndex_X(t){if(this.getDataY(),this._xdata){let e=this._xdata.getData(),i=Math.floor(t);return(t-i)*(e[i+1]-e[i])+e[i]}}getMonotoneousAscending(){return this.isMonotoneous()?this._monotoneousAscending:"The waveform is not monotoneous"}getXMonotoneousAscending(){return this._xdata?this._xdata.getMonotoneousAscending():this.xScale>0}isXMonotoneousAscending(){return this.getXMonotoneousAscending()}divide(t){return this._arithmetic(t,x)}divideBy(t){return this.divide(t)}multiply(t){return this._arithmetic(t,c)}multiplyBy(t){return this.multiply(t)}log(){return this.logBase(10)}ln(){return this.logBase(Math.E)}logBase(t){let e=Math.log(t);this._data.map((t=>Math.log(t)/e))}add(t){return this._arithmetic(t,f)}addBy(t){return this.add(t)}subtract(t){return this._arithmetic(t,m)}subtractBy(t){return this.subtract(t)}math(t){for(var e=0;e<this.getLength();e++)this._data[e]=t(this.getY(e),this.getX(e));return this._setData(this._data),this}_arithmetic(t,e){return t instanceof d?this._waveArithmetic(t,e):"number"==typeof t?this._numberArithmetic(t,e):void 0}_numberArithmetic(t,e){let i=0,s=this.getLength();if(e==c){for(;i<s;i++)this._data[i]*=t;this.minY*=t,this.maxY*=t}else if(e==x){for(;i<s;i++)this._data[i]/=t;this.minY/=t,this.maxY/=t}else if(e==f){for(;i<s;i++)this._data[i]+=t;this.minY+=t,this.maxY+=t}else if(e==m){for(;i<s;i++)this._data[i]-=t;this.minY-=t,this.maxY-=t}return this}_waveArithmetic(t,e){let i=this.getDataY(),s=0;const r=this.getLength();if(this.requireXMonotonicity(),t.requireXMonotonicity(),this._xdata&&t.xdata){const i=new Set,r=this._xdata._data,a=t.xdata._data;for(s=0;s<r.length;s++)i.add(r[s]);for(s=0;s<a.length;s++)i.add(a[s]);const n=Array.from(i.values());n.sort(((t,e)=>t-e));const o=n.map((i=>e==c?this.interpolate(i)*t.interpolate(i):e==x?this.interpolate(i)/t.interpolate(i):e==f?this.interpolate(i)+t.interpolate(i):e==m?this.interpolate(i)-t.interpolate(i):void 0));this._setData(o),this._xdata._setData(n)}else{if(e==c)for(;s<r;s++)i[s]*=t.interpolate(this.getX(s));else if(e==x)for(;s<r;s++)i[s]/=t.interpolate(this.getX(s));else if(e==f)for(;s<r;s++)i[s]+=t.interpolate(this.getX(s));else if(e==m)for(;s<r;s++)i[s]-=t.interpolate(this.getX(s));this._setData(i)}return this}aggregate(t="x"){this._dataAggregated={},this._dataAggregationDirection=t.toUpperCase();var e=function(t){for(var e=1;t>>=1;)e<<=1;return e}(this.getLength());this._dataAggregating=h({minX:this.minX,maxX:this.maxX,minY:this.minY,maxY:this.maxY,data:this._data,xdata:this._xdata?this._xdata.getData():void 0,xScale:this.xScale,xOffset:this.xOffset,numPoints:e,direction:t}).then((t=>{this._dataAggregated=t.aggregates,this._dataAggregating=void 0}))}hasAggregation(){return!!this._dataAggregated}selectAggregatedData(t){if(t<2)return!1;var e=function(t){t--;for(var e=2;t>>=1;)e<<=1;return e}(t);return this._dataAggregated[e]?(this.dataInUseType=`aggregate${this._dataAggregationDirection}`,void(this.dataInUse=this._dataAggregated[e])):this._dataAggregating?this._dataAggregating:(this.dataInUseType="none",void(this.dataInUse={y:this._data,x:this.getXWaveform()._data}))}duplicate(t=!0){var e=new d;return e._setData(this.getDataY().slice()),e.rescaleX(this.xOffset,this.xScale),e.setShift(this.getShift()),e.setScale(this.getScale()),this._xdata?(t?e.setXWaveform(this._xdata.duplicate()):e.setXWaveform(this._xdata),e.setXShift(this.getXShift()),e.setXScale(this.getXScale())):(e.xOffset=this.xOffset,e.xScale=this.xScale),e}subrangeX(t,e){if(this._xdata){var i=new d;const a=this.getXWaveform()._data;for(var s=0,r=this._data.length;s<r;s++)this._data[s]>=t&&this._data[s]<e&&i.append(a[s],this._data[s]);return i}{let i=this.getIndexFromX(t),s=this.getIndexFromX(e);return(new d).setData(this._data.slice(i,s)).rescaleX(this.xOffset,this.xScale)}}findLocalMinMax(t,e,i){this.getIndexFromX(t);let s=this.getIndexFromX(t+e),r=this.getIndexFromX(t-e);return this.findLocalMinMaxIndex(r,s,i)}findLocalMinMaxIndex(t,e,i){let s,r,a;if(e<t&&(s=e,e=t,t=s),"max"==i){r=Number.NEGATIVE_INFINITY;for(var n=t;n<=e;n++)this.getY(n)>r&&(r=this.getY(n),a=n)}else for(r=Number.POSITIVE_INFINITY,n=t;n<=e;n++)this.getY(n)<r&&(r=this.getY(n),a=n);return a!=t&&a!=e&&this.getX(a)}warn(t){console&&console.warn(t)}setUnit(t){return this.unit=t,this}setXUnit(t){return this.hasXWaveform()&&this._xdata.setUnit(t),this.xunit=t,this}getUnit(){return this.unit||""}getXUnit(){return this.hasXWaveform()?this._xdata.getUnit():this.xunit||""}hasXUnit(){return this.getXUnit().length>0}hasUnit(){return this.getUnit().length>0}findLevels(t,e){for(var i,s=(e=r.extend({box:1,edge:"both",rounding:"before",rangeP:[0,this.getLength()]},e)).rangeP[0],a=[],n=0;i=this.findLevel(t,r.extend(!0,{},e,{rangeP:[s,e.rangeP[1]]}));)if(a.push(i),s=Math.ceil(i),++n>1e3)return;return a}findLevel(t,e){var i,s,a,n,o,h;(e=r.extend({box:1,edge:"both",direction:"ascending",rounding:"before",rangeP:[0,this.getLength()]},e)).rangeX&&(e.rangeP=e.rangeX.map(this.getIndexFromX));var l=e.box;for(l%2==0&&l++,"descending"==e.direction?(a=e.rangeP[1],o=e.rangeP[0],h=-1):(a=e.rangeP[0],o=e.rangeP[1],h=1);;a+=h){if("descending"==e.direction){if(a<o)break}else if(a>o)break;if(!(a<e.rangeP[0]+(l-1)/2)){if(a>e.rangeP[1]-(l-1)/2)break;if(i=this.getAverageP(a-(l-1)/2,a+(l-1)/2),void 0!==s){if(i>=t&&s){if(s=!1,"ascending"==e.edge||"both"==e.edge)for(let i=a+(l-1)/2;i>=a-(l-1)/2;i--)if(this._data[i]>=t&&this._data[i-1]<=t)switch(e.rounding){case"before":return i-1;case"after":return i;case"interpolate":return y(t,this._data[i],this._data[i-1],i,i-1)}}else if(i<=t&&!s&&(s=!0,"descending"==e.edge||"both"==e.edge))for(n=a+(l-1)/2;n>=a-(l-1)/2;n--)if(this._data[n]<=t&&this._data[n-1]>=t)switch(e.rounding){case"before":return n-1;case"after":return n;case"interpolate":return y(t,this._data[n],this._data[n-1],n,n-1)}}else s=i<t}}}normalize(t){let e,i,s,r,a,n;if("max1"==t||"max100"==t){for(e=1,"max100"==t&&(e=100),r=this._data[0],n=1;n<this.getLength();n++)this._data[n]>r&&(r=this._data[n]);for(n=0;n<this.getLength();n++)this._data[n]/=r/e}else if("sum1"==t){for(i=0,n=0;n<this.getLength();n++)i+=this._data[n];for(n=0;n<this.getLength();n++)this._data[n]/=i}else if("max1min0"==t){for(r=this._data[0],s=this._data[0],n=1;n<this.getLength();n++)this._data[n]>r?r=this._data[n]:this._data[n]<s&&(s=this._data[n]);for(a=1/(r-s),n=0;n<this.getLength();n++)this._data[n]=(this._data[n]-s)*a}this.setData(this._data)}filterNaN(){for(var t=this._data.length-1;t>=0;t--)isNaN(this._data[t])&&(this._data=this._data.splice(t,1),this._xdata&&this._xdata._data.splice(t,1))}filterInfinity(){for(var t=this._data.length-1;t>=0;t--)isFinite(this._data[t])||(this._data=this._data.splice(t,1),this._xdata&&this._xdata._data.splice(t,1))}setErrorBarX(t){return t instanceof d||(t=new d(t)),this.getXWaveform().setErrorBar(t),this}setErrorBarXBelow(t){return t instanceof d||(t=new d(t)),this.getXWaveform().setErrorBarBelow(t),this}setErrorBarXAbove(t){return t instanceof d||(t=new d(t)),this.getXWaveform().setErrorBarAbove(t),this}setErrorBoxX(t){t instanceof d||(t=new d(t));var e=this.getXWaveform();return e.setErrorBoxAbove(t),e.setErrorBoxBelow(t),this}setErrorBoxXBelow(t){return t instanceof d||(t=new d(t)),this.getXWaveform().setErrorBoxBelow(t),this}setErrorBoxXAbove(t){return t instanceof d||(t=new d(t)),this.getXWaveform().setErrorBoxAbove(t),this}setErrorBar(t,e=!0){t instanceof d||(t=new d(t)),this.errors.nb++,this.errors.nb++,this.errors.bars.below=t,this.errors.bars.above=t,e&&this._setData(this._data)}setErrorBarBelow(t,e=!0){t instanceof d||(t=new d(t)),this.errors.nb++,this.errors.bars.below=t,e&&this._setData(this._data)}setErrorBarAbove(t,e=!0){t instanceof d||(t=new d(t)),this.errors.nb++,this.errors.bars.above=t,e&&this._setData(this._data)}setErrorBox(t,e=!0){t instanceof d||(t=new d(t)),this.errors.nb++,this.errors.nb++,this.errors.boxes.above=t,this.errors.boxes.below=t,e&&this._setData(this._data)}setErrorBoxBelow(t,e=!0){t instanceof d||(t=new d(t)),this.errors.nb++,this.errors.boxes.below=t,e&&this._setData(this._data)}setErrorBoxAbove(t,e=!0){t instanceof d||(t=new d(t)),this.errors.boxes.above=t,e&&this._setData(this._data)}getMaxError(t,e=p.ABOVE){return Math.max(this.getMaxErrorType(t,e,g.BOX),this.getMaxErrorType(t,e,g.BAR))}getMaxErrorType(t,e=p.ABOVE,i=g.BOX){let s,r;if(i==g.BOX)s=this.errors.boxes;else{if(i!=g.BAR)throw"Unknown type of error";s=this.errors.bars}return(r=s[e])||(e==p.ABOVE?s[e]==p.BELOW&&(r=s.below):s[e]==p.ABOVE&&(r=s.above)),r?r.getY(t):0}getErrorBarXBelow(t){return this.getErrorX(t,p.BELOW,g.BAR)}getErrorBarXAbove(t){return this.getErrorX(t,p.ABOVE,g.BAR)}getErrorBoxXBelow(t){return this.getErrorX(t,p.BELOW,g.BOX)}getErrorBoxXAbove(t){return this.getErrorX(t,p.ABOVE,g.BOX)}getErrorBarYBelow(t){return this.getError(t,p.BELOW,g.BAR)}getErrorBarYAbove(t){return this.getError(t,p.ABOVE,g.BAR)}getErrorBoxYBelow(t){return this.getError(t,p.BELOW,g.BOX)}getErrorBoxYAbove(t){return this.getError(t,p.ABOVE,g.BOX)}getErrorX(t,e=p.ABOVE,i=g.BAR){return!!this.hasXWaveform()&&this._xdata.getError(t,e,i)}getError(t,e=p.ABOVE,i=g.BAR){let s,r=i==g.BAR?this.errors.bars:this.errors.boxes;return!!r&&((s=e==p.ABOVE?r.above:r.below)?s.getY(t):void 0)}hasErrorBars(){return this.errors.nb>0||this.hasXWaveform()&&this._xdata.errors.nb>0}}var p,g;!function(t){t[t.ABOVE=0]="ABOVE",t[t.BELOW=1]="BELOW"}(p||(p={})),function(t){t[t.BOX=0]="BOX",t[t.BAR=1]="BAR"}(g||(g={}));const c=Symbol(),f=Symbol(),m=Symbol(),x=Symbol();function y(t,e,i,s,r){return(t-e)/(i-e)*(r-s)+s}function b(t,e,i,s,r=1,a=1){let n,o=Number.MAX_VALUE,h=-1;if(void 0!==t&&null==e)for(var l=0,u=i.length;l<u;l++)n=Math.abs((t-i[l])*r),n<o&&(h=l,o=n);else if(null==t&&void 0!==e)for(l=0,u=s.length;l<u;l++)n=Math.abs((e-s[l])*a),n<o&&(h=l,o=n);else for(l=0,u=i.length;l<u;l++)n=((t-i[l])*r)**2+((e-s[l])*a)**2,n<o&&(h=l,o=n);return h}function v(t,e,i=e[e.length-1]<e[0],s=!0){let r,a=0,n=e.length-1,o=0,h=1;if(!i&&(e[0]>t||e[n]<t)||i&&(e[0]<t||e[n]>t))throw new Error(`Target ${t} is not in the stack`);if(e[a]==t)return a;if(e[n]==t)return n;for(;;){if(o++,o>1e3)throw new Error("Error loop");for(r=Math.floor((a+n)/2);isNaN(e[r]);){if(r>=e.length-1)return e.length-1;if(r<=0)return 0;r+=h}if(e[r]==t)return r;if(r==a||r==n)return s?Math.abs(t-e[a])<Math.abs(t-e[n])?a:n:r;if(e[r]<t)i?n=r:a=r;else{if(!(e[r]>t))return!1;i?a=r:n=r}h*=-1}}class M extends d{hasXWaveform(){return!1}setXWaveform(t){if(Array.isArray(t))throw"Waveform must be of a pure Waveform instance (and not an array)";this._xdata=t}getYFromX(t){const e=this._xdata.indexOf(t);if(-1==e)throw`Cannot find key ${t}`;return this._data[e]}getY(t){return this._data[t]}getX(t){return this._xdata[t]}hasXUnit(){return!1}errorNotImplemented(){throw console.trace(),"Not available in hash waveform"}subrangeX(t,e){this.errorNotImplemented()}duplicate(){this.errorNotImplemented()}aggregate(){this.errorNotImplemented()}_waveArithmetic(){this.errorNotImplemented()}interpolateIndex_X(t){this.errorNotImplemented()}getXMonotoneousAscending(){this.errorNotImplemented()}isXMonotoneousAscending(){this.errorNotImplemented()}interpolate(){this.errorNotImplemented()}resampleForDisplay(){this.errorNotImplemented()}isXMonotoneous(){this.errorNotImplemented()}rescaleX(){this.errorNotImplemented()}getXMin(){}getXMax(){}computeXMinMax(){}setData(t){this._data=Object.values(t),this._xdata=Object.keys(t),this._setData()}_setData(){this.minY=Math.min(...this._data),this.maxY=Math.max(...this._data),this.checkMinMaxErrorBars()}}function A(t,e){return(t.x-e.x)**2+(t.y-e.y)**2}},2513:(t,e)=>{let i;Object.defineProperty(e,"__esModule",{value:!0}),e.SERIE_TYPE=e.SERIE_DEFAULT_STYLE=void 0,e.SERIE_DEFAULT_STYLE={line:{color:"black"}},e.SERIE_TYPE=i,function(t){t.LINE="line",t.LINE_3D="line3d",t.LINE_COLORED="line_colored",t.CONTOUR="contour",t.BAR="bar",t.BOX="box",t.SCATTER="scatter",t.ZONE="zone",t.ZONE_3D="zone3d",t.DENSITY_MAP="densitymap",t.HISTOGRAM="HISTOGRAM"}(i||(e.SERIE_TYPE=i={}))}},e={};function i(s){var r=e[s];if(void 0!==r)return r.exports;var a=e[s]={exports:{}};return t[s](a,a.exports,i),a.exports}i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i(5936);